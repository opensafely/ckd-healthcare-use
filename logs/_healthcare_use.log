------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\lsh1703468\Documents\repo\ckd-healthcare-use\logs/_healthcare_use.log
  log type:  text
 opened on:   8 Feb 2023, 18:37:44

. 
. cap file close tablecontent

. file open tablecontent using ./output/`dataset'_healthcare_use.csv, write text replace
(file ./output/_healthcare_use.csv not found)

. 
. **Column headings
. *There are three column headings for each year 2017-2022:
. *Column 1 = the number of people in each CKD group as of the beginning of each year (i.e. in April)
. *Column 2 = the number of people who remain within the same CKD group, progress to a more advanced CKD group, or die by the end of the year (i.e. by the subsequent April)
. *Column 3 = Column 2 as a percentage of Column 1
. file write tablecontent _tab _tab ("`dataset'_N") _tab ("April_N") _tab ("April_pc") _tab ("May_N") _tab ("May_pc") _tab ("June_N") _tab ("June_pc") _tab ("July_N") _tab ("July_pc") _tab ("August_N") _tab ("August_pc") _tab ("September_N") _tab ("Sep
> tember_pc") _tab ("October_N") _tab ("October_pc") _tab ("November_N") _tab ("November_pc") _tab ("December_N") _tab ("December_pc") _tab ("January_N") _tab ("January_pc") _tab ("February_N") _tab ("February_pc") _tab ("March_N") _tab ("March_pc") _n
> (2)

. 
. **Loops through datasets for each year `x' 2017-2022
. use ./output/`dataset'_ckd_complete.dta, clear
file ./output/_ckd_complete.dta not found
r(601);

end of do-file

r(601);

. use ./output/2017_ckd_complete.dta, clear

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Disclosure minimisation
. *safecount provides a count with any counts <=5 returned at "<=5"
. *round(r(N),5) rounds counts to the nearest 5 with any counts <=5 returned as "."
. 
. forvalues cat = 1/6 {
  2. foreach resource of varlist hospital_days admitted_patients fistula_formation pd_insertion critical_care_days critical_care_patients emergency_days outpatient_appointments nephrology_appointmnets transplant_appointments gp_interactions blood_press
> ure albuminuria creatinine {
  3. foreach month of varlist m4 m5 m6 m7 m8 m9 m10 m11 m12 m1 m2 m3 {
  4. 
. qui safecount if ckd_group==`cat'
  5. local baseline_ckd`cat' = round(r(N),5)
  6. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `month'_`resource'==1
  7. local ckd`cat'_`month'_`resource' = round(r(N),5)
  8. local percent_ckd`cat'_`month'_`resource' = (`ckd`cat'_`month'_`resource''/`baseline_ckd`cat'')*100
  9. }
 10. }
 11. }
variable hospital_days not found
r(111);

end of do-file

r(111);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. local resource "hospital_days admitted_patients fistula_formation pd_insertion critical_care_days critical_care_patients emergency_days outpatient_appointments nephrology_appointmnets transplant_appointments gp_interactions blood_pressure albuminuria
>  creatinine"

. local month "m4 m5 m6 m7 m8 m9 m10 m11 m12 m1 m2 m3"

. 
. 
. forvalues cat = 1/6 {
  2. foreach resource of local resource {
  3. foreach month of local month {
  4. qui safecount if ckd_group==`cat'
  5. local baseline_ckd`cat' = round(r(N),5)
  6. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `month'_`resource'==1
  7. local ckd`cat'_`month'_`resource' = round(r(N),5)
  8. local percent_ckd`cat'_`month'_`resource' = (`ckd`cat'_`month'_`resource''/`baseline_ckd`cat'')*100
  9. }
 10. }
 11. }

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. file write tablecontent ("Albuminuria") _tab _tab (`baseline_ckd1') _n(1)
invalid syntax
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. file write tablecontent ("Albuminuria") _tab _tab (`baseline_ckd1') _n
invalid syntax
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. 
. local resource "hospital_days admitted_patients fistula_formation pd_insertion critical_care_days critical_care_patients emergency_days outpatient_appointments nephrology_appointmnets transplant_appointments gp_interactions blood_pressure albuminuria
>  creatinine"

. local month "m4 m5 m6 m7 m8 m9 m10 m11 m12 m1 m2 m3"

. 
. 
. forvalues cat = 1/6 {
  2. foreach resource of local resource {
  3. foreach month of local month {
  4. qui safecount if ckd_group==`cat'
  5. local baseline_ckd`cat' = round(r(N),5)
  6. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `month'_`resource'==1
  7. local ckd`cat'_`month'_`resource' = round(r(N),5)
  8. local percent_ckd`cat'_`month'_`resource' = (`ckd`cat'_`month'_`resource''/`baseline_ckd`cat'')*100
  9. }
 10. }
 11. }

. 
. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("Albuminuria") _tab _tab (`baseline_ckd1') _n
invalid syntax
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. file open tablecontent using ./output/`dataset'_healthcare_use.csv, write text replace

. 
. **Column headings
. *There are three column headings for each year 2017-2022:
. *Column 1 = the number of people in each CKD group as of the beginning of each year (i.e. in April)
. *Column 2 = the number of people who remain within the same CKD group, progress to a more advanced CKD group, or die by the end of the year (i.e. by the subsequent April)
. *Column 3 = Column 2 as a percentage of Column 1
. file write tablecontent _tab _tab ("`dataset'_N") _tab ("April_N") _tab ("April_pc") _tab ("May_N") _tab ("May_pc") _tab ("June_N") _tab ("June_pc") _tab ("July_N") _tab ("July_pc") _tab ("August_N") _tab ("August_pc") _tab ("September_N") _tab ("Sep
> tember_pc") _tab ("October_N") _tab ("October_pc") _tab ("November_N") _tab ("November_pc") _tab ("December_N") _tab ("December_pc") _tab ("January_N") _tab ("January_pc") _tab ("February_N") _tab ("February_pc") _tab ("March_N") _tab ("March_pc") _n
> (2)

. 
end of do-file

. use ./output/2017_ckd_complete.dta, clear

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Disclosure minimisation
. *safecount provides a count with any counts <=5 returned at "<=5"
. *round(r(N),5) rounds counts to the nearest 5 with any counts <=5 returned as "."
. 
. local resource "hospital_days admitted_patients fistula_formation pd_insertion critical_care_days critical_care_patients emergency_days outpatient_appointments nephrology_appointmnets transplant_appointments gp_interactions blood_pressure albuminuria
>  creatinine"

. local month "m4 m5 m6 m7 m8 m9 m10 m11 m12 m1 m2 m3"

. 
. 
. forvalues cat = 1/6 {
  2. foreach resource of local resource {
  3. foreach month of local month {
  4. qui safecount if ckd_group==`cat'
  5. local baseline_ckd`cat' = round(r(N),5)
  6. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `month'_`resource'==1
  7. local ckd`cat'_`month'_`resource' = round(r(N),5)
  8. local percent_ckd`cat'_`month'_`resource' = (`ckd`cat'_`month'_`resource''/`baseline_ckd`cat'')*100
  9. }
 10. }
 11. }

. 
. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("Albuminuria") _tab _tab (`baseline_ckd1') _n
invalid syntax
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. local resource "hospital_days admitted_patients fistula_formation pd_insertion critical_care_days critical_care_patients emergency_days outpatient_appointments nephrology_appointmnets transplant_appointments gp_interactions blood_pressure albuminuria
>  creatinine"

. local month "m4 m5 m6 m7 m8 m9 m10 m11 m12 m1 m2 m3"

. 
. 
. forvalues cat = 1/6 {
  2. foreach resource of local resource {
  3. foreach month of local month {
  4. qui safecount if ckd_group==`cat'
  5. local baseline_ckd`cat' = round(r(N),5)
  6. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `month'_`resource'==1
  7. local ckd`cat'_`month'_`resource' = round(r(N),5)
  8. local percent_ckd`cat'_`month'_`resource' = (`ckd`cat'_`month'_`resource''/`baseline_ckd`cat'')*100
  9. 
. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("Albuminuria") _tab _tab (`baseline_ckd1') _n
 10. file write tablecontent _tab ("`resource'") _tab _tab (`ckd1_m4_`resource'') _tab _tab _tab (`ckd1_m5_`resource'') _tab _tab _tab (`ckd1_m6_`resource'') _tab _tab _tab (`ckd1_m7_`resource'') _tab _tab _tab (`ckd1_m8_`resource'') _tab _tab _tab (`c
> kd1_m9_`resource'') _tab _tab _tab (`ckd1_m10_`resource'') _tab _tab _tab (`ckd1_m11_`resource'') _tab _tab _tab (`ckd1_m12_`resource'') _tab _tab _tab (`ckd1_m1_`resource'') _tab _tab _tab (`ckd1_m2_`resource'') _tab _tab _tab (`ckd1_m3_`resource'')
>  _n
 11. 
. }
 12. }
 13. }

. 
end of do-file

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace
file handle tablecontent already exists
r(110);

. clear

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace
file handle tablecontent already exists
r(110);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. 
. **Column headings
. *There are three column headings for each year 2017-2022:
. *Column 1 = the number of people in each CKD group as of the beginning of each year (i.e. in April)
. *Column 2 = the number of people who remain within the same CKD group, progress to a more advanced CKD group, or die by the end of the year (i.e. by the subsequent April)
. *Column 3 = Column 2 as a percentage of Column 1
. file write tablecontent _tab _tab ("`dataset'_N") _tab ("April_N") _tab ("April_pc") _tab ("May_N") _tab ("May_pc") _tab ("June_N") _tab ("June_pc") _tab ("July_N") _tab ("July_pc") _tab ("August_N") _tab ("August_pc") _tab ("September_N") _tab ("Sep
> tember_pc") _tab ("October_N") _tab ("October_pc") _tab ("November_N") _tab ("November_pc") _tab ("December_N") _tab ("December_pc") _tab ("January_N") _tab ("January_pc") _tab ("February_N") _tab ("February_pc") _tab ("March_N") _tab ("March_pc") _n
> (2)

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. 
end of do-file

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace
(file ./output/2017_healthcare_use.csv not found)

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. file write tablecontent _tab _tab ("`dataset'_N") _tab ("April_N") _tab ("April_pc") _tab ("May_N") _tab ("May_pc") _tab ("June_N") _tab ("June_pc") _tab ("July_N") _tab ("July_pc") _tab ("August_N") _tab ("August_pc") _tab ("September_N") _tab ("Sep
> tember_pc") _tab ("October_N") _tab ("October_pc") _tab ("November_N") _tab ("November_pc") _tab ("December_N") _tab ("December_pc") _tab ("January_N") _tab ("January_pc") _tab ("February_N") _tab ("February_pc") _tab ("March_N") _tab ("March_pc") _n
> (2)

. 
end of do-file

. use ./output/2017_ckd_complete.dta, clear

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of local resource {
  3. foreach month of local month {
  4. qui safecount if ckd_group==`cat'
  5. local baseline_ckd`cat' = round(r(N),5)
  6. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `month'_`resource'==1
  7. local ckd`cat'_`month'_`resource' = round(r(N),5)
  8. local percent_ckd`cat'_`month'_`resource' = (`ckd`cat'_`month'_`resource''/`baseline_ckd`cat'')*100
  9. 
. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("lab`ckd'") _tab _tab (`baseline_ckd`ckd'') _n
 16. file write tablecontent _tab ("`resource'") _tab _tab (`ckd`ckd'_m4_`resource'') _tab _tab _tab (`ckd`ckd'_m5_`resource'') _tab _tab _tab (`ckd`ckd'_m6_`resource'') _tab _tab _tab (`ckd`ckd'_m7_`resource'') _tab _tab _tab (`ckd`ckd'_m8_`resource''
> ) _tab _tab _tab (`ckd`ckd'_m9_`resource'') _tab _tab _tab (`ckd`ckd'_m10_`resource'') _tab _tab _tab (`ckd`ckd'_m11_`resource'') _tab _tab _tab (`ckd`ckd'_m12_`resource'') _tab _tab _tab (`ckd`ckd'_m1_`resource'') _tab _tab _tab (`ckd`ckd'_m2_`resou
> rce'') _tab _tab _tab (`ckd`ckd'_m3_`resource'') _n
 17. 
. }
 18. }
 19. }

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. 
end of do-file

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Column headings
. *There are three column headings for each year 2017-2022:
. *Column 1 = the number of people in each CKD group as of the beginning of each year (i.e. in April)
. *Column 2 = the number of people who remain within the same CKD group, progress to a more advanced CKD group, or die by the end of the year (i.e. by the subsequent April)
. *Column 3 = Column 2 as a percentage of Column 1
. file write tablecontent _tab _tab ("`dataset'_N") _tab ("April_N") _tab ("April_pc") _tab ("May_N") _tab ("May_pc") _tab ("June_N") _tab ("June_pc") _tab ("July_N") _tab ("July_pc") _tab ("August_N") _tab ("August_pc") _tab ("September_N") _tab ("Sep
> tember_pc") _tab ("October_N") _tab ("October_pc") _tab ("November_N") _tab ("November_pc") _tab ("December_N") _tab ("December_pc") _tab ("January_N") _tab ("January_pc") _tab ("February_N") _tab ("February_pc") _tab ("March_N") _tab ("March_pc") _n
> (2)

. 
end of do-file

. use ./output/2017_ckd_complete.dta, clear

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Disclosure minimisation
. *safecount provides a count with any counts <=5 returned at "<=5"
. *round(r(N),5) rounds counts to the nearest 5 with any counts <=5 returned as "."
. 
. local resource "hospital_days admitted_patients fistula_formation pd_insertion critical_care_days critical_care_patients emergency_days outpatient_appointments nephrology_appointmnets transplant_appointments gp_interactions blood_pressure albuminuria
>  creatinine"

. local month "m4 m5 m6 m7 m8 m9 m10 m11 m12 m1 m2 m3"

. 
. 
. forvalues cat = 1/6 {
  2. foreach resource of local resource {
  3. foreach month of local month {
  4. qui safecount if ckd_group==`cat'
  5. local baseline_ckd`cat' = round(r(N),5)
  6. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `month'_`resource'==1
  7. local ckd`cat'_`month'_`resource' = round(r(N),5)
  8. local percent_ckd`cat'_`month'_`resource' = (`ckd`cat'_`month'_`resource''/`baseline_ckd`cat'')*100
  9. 
. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("lab`cat'") _tab _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("`resource'") _tab _tab (`ckd`cat'_m4_`resource'') _tab _tab _tab (`ckd`cat'_m5_`resource'') _tab _tab _tab (`ckd`cat'_m6_`resource'') _tab _tab _tab (`ckd`cat'_m7_`resource'') _tab _tab _tab (`ckd`cat'_m8_`resource''
> ) _tab _tab _tab (`ckd`cat'_m9_`resource'') _tab _tab _tab (`ckd`cat'_m10_`resource'') _tab _tab _tab (`ckd`cat'_m11_`resource'') _tab _tab _tab (`ckd`cat'_m12_`resource'') _tab _tab _tab (`ckd`cat'_m1_`resource'') _tab _tab _tab (`ckd`cat'_m2_`resou
> rce'') _tab _tab _tab (`ckd`cat'_m3_`resource'') _n
 17. 
. }
 18. }
 19. }

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. local resource "hospital_days admitted_patients fistula_formation pd_insertion critical_care_days critical_care_patients emergency_days outpatient_appointments nephrology_appointmnets transplant_appointments gp_interactions blood_pressure albuminuria
>  creatinine"

. local month "m4 m5 m6 m7 m8 m9 m10 m11 m12 m1 m2 m3"

. 
. 
. forvalues cat = 1/6 {
  2. foreach resource of local resource {
  3. foreach month of local month {
  4. qui safecount if ckd_group==`cat'
  5. local baseline_ckd`cat' = round(r(N),5)
  6. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `month'_`resource'==1
  7. local ckd`cat'_`month'_`resource' = round(r(N),5)
  8. local percent_ckd`cat'_`month'_`resource' = (`ckd`cat'_`month'_`resource''/`baseline_ckd`cat'')*100
  9. 
. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. }
 16. }
 17. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("lab`cat'") _tab _tab (`baseline_ckd`cat'') _n
 18. file write tablecontent _tab ("`resource'") _tab _tab (`ckd`cat'_m4_`resource'') _tab _tab _tab (`ckd`cat'_m5_`resource'') _tab _tab _tab (`ckd`cat'_m6_`resource'') _tab _tab _tab (`ckd`cat'_m7_`resource'') _tab _tab _tab (`ckd`cat'_m8_`resource''
> ) _tab _tab _tab (`ckd`cat'_m9_`resource'') _tab _tab _tab (`ckd`cat'_m10_`resource'') _tab _tab _tab (`ckd`cat'_m11_`resource'') _tab _tab _tab (`ckd`cat'_m12_`resource'') _tab _tab _tab (`ckd`cat'_m1_`resource'') _tab _tab _tab (`ckd`cat'_m2_`resou
> rce'') _tab _tab _tab (`ckd`cat'_m3_`resource'') _n
 19. }
invalid syntax
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. local resource "hospital_days admitted_patients fistula_formation pd_insertion critical_care_days critical_care_patients emergency_days outpatient_appointments nephrology_appointmnets transplant_appointments gp_interactions blood_pressure albuminuria
>  creatinine"

. local month "m4 m5 m6 m7 m8 m9 m10 m11 m12 m1 m2 m3"

. 
. 
. forvalues cat = 1/6 {
  2. foreach resource of local resource {
  3. foreach month of local month {
  4. qui safecount if ckd_group==`cat'
  5. local baseline_ckd`cat' = round(r(N),5)
  6. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `month'_`resource'==1
  7. local ckd`cat'_`month'_`resource' = round(r(N),5)
  8. local percent_ckd`cat'_`month'_`resource' = (`ckd`cat'_`month'_`resource''/`baseline_ckd`cat'')*100
  9. 
. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. }
 16. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("lab`cat'") _tab _tab (`baseline_ckd`cat'') _n
 17. file write tablecontent _tab ("`resource'") _tab _tab (`ckd`cat'_m4_`resource'') _tab _tab _tab (`ckd`cat'_m5_`resource'') _tab _tab _tab (`ckd`cat'_m6_`resource'') _tab _tab _tab (`ckd`cat'_m7_`resource'') _tab _tab _tab (`ckd`cat'_m8_`resource''
> ) _tab _tab _tab (`ckd`cat'_m9_`resource'') _tab _tab _tab (`ckd`cat'_m10_`resource'') _tab _tab _tab (`ckd`cat'_m11_`resource'') _tab _tab _tab (`ckd`cat'_m12_`resource'') _tab _tab _tab (`ckd`cat'_m1_`resource'') _tab _tab _tab (`ckd`cat'_m2_`resou
> rce'') _tab _tab _tab (`ckd`cat'_m3_`resource'') _n
 18. }
 19. }

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. 
. local resource "hospital_days admitted_patients fistula_formation pd_insertion critical_care_days critical_care_patients emergency_days outpatient_appointments nephrology_appointmnets transplant_appointments gp_interactions blood_pressure albuminuria
>  creatinine"

. local month "m4 m5 m6 m7 m8 m9 m10 m11 m12 m1 m2 m3"

. 
. 
. forvalues cat = 1/6 {
  2. foreach resource of local resource {
  3. foreach month of local month {
  4. qui safecount if ckd_group==`cat'
  5. local baseline_ckd`cat' = round(r(N),5)
  6. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `month'_`resource'==1
  7. local ckd`cat'_`month'_`resource' = round(r(N),5)
  8. local percent_ckd`cat'_`month'_`resource' = (`ckd`cat'_`month'_`resource''/`baseline_ckd`cat'')*100
  9. 
. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. }
 16. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 17. file write tablecontent _tab ("`resource'") _tab _tab (`ckd`cat'_m4_`resource'') _tab _tab _tab (`ckd`cat'_m5_`resource'') _tab _tab _tab (`ckd`cat'_m6_`resource'') _tab _tab _tab (`ckd`cat'_m7_`resource'') _tab _tab _tab (`ckd`cat'_m8_`resource''
> ) _tab _tab _tab (`ckd`cat'_m9_`resource'') _tab _tab _tab (`ckd`cat'_m10_`resource'') _tab _tab _tab (`ckd`cat'_m11_`resource'') _tab _tab _tab (`ckd`cat'_m12_`resource'') _tab _tab _tab (`ckd`cat'_m1_`resource'') _tab _tab _tab (`ckd`cat'_m2_`resou
> rce'') _tab _tab _tab (`ckd`cat'_m3_`resource'') _n
 18. }
 19. }

. file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. *file open tablecontent using ./output/2017_healthcare_use.csv, write text replace
. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace
file handle tablecontent already exists
r(110);

end of do-file

r(110);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Column headings
. *There are three column headings for each year 2017-2022:
. *Column 1 = the number of people in each CKD group as of the beginning of each year (i.e. in April)
. *Column 2 = the number of people who remain within the same CKD group, progress to a more advanced CKD group, or die by the end of the year (i.e. by the subsequent April)
. *Column 3 = Column 2 as a percentage of Column 1
. file write tablecontent _tab _tab ("`dataset'_N") _tab ("April_N") _tab ("April_pc") _tab ("May_N") _tab ("May_pc") _tab ("June_N") _tab ("June_pc") _tab ("July_N") _tab ("July_pc") _tab ("August_N") _tab ("August_pc") _tab ("September_N") _tab ("Sep
> tember_pc") _tab ("October_N") _tab ("October_pc") _tab ("November_N") _tab ("November_pc") _tab ("December_N") _tab ("December_pc") _tab ("January_N") _tab ("January_pc") _tab ("February_N") _tab ("February_pc") _tab ("March_N") _tab ("March_pc") _n
> (2)

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. 
. **Disclosure minimisation
. *safecount provides a count with any counts <=5 returned at "<=5"
. *round(r(N),5) rounds counts to the nearest 5 with any counts <=5 returned as "."
. 
. local resource "hospital_days admitted_patients fistula_formation pd_insertion critical_care_days critical_care_patients emergency_days outpatient_appointments nephrology_appointmnets transplant_appointments gp_interactions blood_pressure albuminuria
>  creatinine"

. local month "m4 m5 m6 m7 m8 m9 m10 m11 m12 m1 m2 m3"

. 
. 
. forvalues cat = 1/6 {
  2. foreach resource of local resource {
  3. foreach month of local month {
  4. qui safecount if ckd_group==`cat'
  5. local baseline_ckd`cat' = round(r(N),5)
  6. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `month'_`resource'==1
  7. local ckd`cat'_`month'_`resource' = round(r(N),5)
  8. local percent_ckd`cat'_`month'_`resource' = (`ckd`cat'_`month'_`resource''/`baseline_ckd`cat'')*100
  9. 
. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. }
 16. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 17. file write tablecontent _tab ("`resource'") _tab _tab (`ckd`cat'_m4_`resource'') _tab _tab _tab (`ckd`cat'_m5_`resource'') _tab _tab _tab (`ckd`cat'_m6_`resource'') _tab _tab _tab (`ckd`cat'_m7_`resource'') _tab _tab _tab (`ckd`cat'_m8_`resource''
> ) _tab _tab _tab (`ckd`cat'_m9_`resource'') _tab _tab _tab (`ckd`cat'_m10_`resource'') _tab _tab _tab (`ckd`cat'_m11_`resource'') _tab _tab _tab (`ckd`cat'_m12_`resource'') _tab _tab _tab (`ckd`cat'_m1_`resource'') _tab _tab _tab (`ckd`cat'_m2_`resou
> rce'') _tab _tab _tab (`ckd`cat'_m3_`resource'') _n
 18. }
 19. }

. file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. local resource "hospital_days admitted_patients fistula_formation pd_insertion critical_care_days critical_care_patients emergency_days outpatient_appointments nephrology_appointmnets transplant_appointments gp_interactions blood_pressure albuminuria
>  creatinine"

. local month "m4 m5 m6 m7 m8 m9 m10 m11 m12 m1 m2 m3"

. 
. 
. forvalues cat = 1/6 {
  2. foreach resource of local resource {
  3. foreach month of local month {
  4. qui safecount if ckd_group==`cat'
  5. local baseline_ckd`cat' = round(r(N),5)
  6. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & "`month'_`resource'"==1
  7. local ckd`cat'_`month'_`resource' = round(r(N),5)
  8. local percent_ckd`cat'_`month'_`resource' = (`ckd`cat'_`month'_`resource''/`baseline_ckd`cat'')*100
  9. 
. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. }
 16. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 17. file write tablecontent _tab ("`resource'") _tab _tab (`ckd`cat'_m4_`resource'') _tab _tab _tab (`ckd`cat'_m5_`resource'') _tab _tab _tab (`ckd`cat'_m6_`resource'') _tab _tab _tab (`ckd`cat'_m7_`resource'') _tab _tab _tab (`ckd`cat'_m8_`resource''
> ) _tab _tab _tab (`ckd`cat'_m9_`resource'') _tab _tab _tab (`ckd`cat'_m10_`resource'') _tab _tab _tab (`ckd`cat'_m11_`resource'') _tab _tab _tab (`ckd`cat'_m12_`resource'') _tab _tab _tab (`ckd`cat'_m1_`resource'') _tab _tab _tab (`ckd`cat'_m2_`resou
> rce'') _tab _tab _tab (`ckd`cat'_m3_`resource'') _n
 18. }
 19. }

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of local resource {
  3. foreach month of local month {
  4. safecount if ckd_group==`cat'
  5. local baseline_ckd`cat' = round(r(N),5)
  6. *Number/percentage of people in group with code for each outcome each month
. safecount if ckd_group==`cat' & "`month'_`resource'"==1
  7. local ckd`cat'_`month'_`resource' = round(r(N),5)
  8. local percent_ckd`cat'_`month'_`resource' = (`ckd`cat'_`month'_`resource''/`baseline_ckd`cat'')*100
  9. 
. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. }
 16. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 17. file write tablecontent _tab ("`resource'") _tab _tab (`ckd`cat'_m4_`resource'') _tab _tab _tab (`ckd`cat'_m5_`resource'') _tab _tab _tab (`ckd`cat'_m6_`resource'') _tab _tab _tab (`ckd`cat'_m7_`resource'') _tab _tab _tab (`ckd`cat'_m8_`resource''
> ) _tab _tab _tab (`ckd`cat'_m9_`resource'') _tab _tab _tab (`ckd`cat'_m10_`resource'') _tab _tab _tab (`ckd`cat'_m11_`resource'') _tab _tab _tab (`ckd`cat'_m12_`resource'') _tab _tab _tab (`ckd`cat'_m1_`resource'') _tab _tab _tab (`ckd`cat'_m2_`resou
> rce'') _tab _tab _tab (`ckd`cat'_m3_`resource'') _n
 18. }
 19. }

. file close tablecontent
file handle tablecontent not found
r(111);

end of do-file

r(111);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Column headings
. *There are three column headings for each year 2017-2022:
. *Column 1 = the number of people in each CKD group as of the beginning of each year (i.e. in April)
. *Column 2 = the number of people who remain within the same CKD group, progress to a more advanced CKD group, or die by the end of the year (i.e. by the subsequent April)
. *Column 3 = Column 2 as a percentage of Column 1
. file write tablecontent _tab _tab ("`dataset'_N") _tab ("April_N") _tab ("April_pc") _tab ("May_N") _tab ("May_pc") _tab ("June_N") _tab ("June_pc") _tab ("July_N") _tab ("July_pc") _tab ("August_N") _tab ("August_pc") _tab ("September_N") _tab ("Sep
> tember_pc") _tab ("October_N") _tab ("October_pc") _tab ("November_N") _tab ("November_pc") _tab ("December_N") _tab ("December_pc") _tab ("January_N") _tab ("January_pc") _tab ("February_N") _tab ("February_pc") _tab ("March_N") _tab ("March_pc") _n
> (2)

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. local resource "hospital_days admitted_patients fistula_formation pd_insertion critical_care_days critical_care_patients emergency_days outpatient_appointments nephrology_appointmnets transplant_appointments gp_interactions blood_pressure albuminuria
>  creatinine"

. local month "m4 m5 m6 m7 m8 m9 m10 m11 m12 m1 m2 m3"

. 
. 
. forvalues cat = 1/6 {
  2. foreach resource of local resource {
  3. foreach month of local month {
  4. safecount if ckd_group==`cat'
  5. local baseline_ckd`cat' = round(r(N),5)
  6. *Number/percentage of people in group with code for each outcome each month
. safecount if ckd_group==`cat' & "`month'_`resource'"==1
  7. local ckd`cat'_`month'_`resource' = round(r(N),5)
  8. local percent_ckd`cat'_`month'_`resource' = (`ckd`cat'_`month'_`resource''/`baseline_ckd`cat'')*100
  9. 
. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. }
 16. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 17. file write tablecontent _tab ("`resource'") _tab _tab (`ckd`cat'_m4_`resource'') _tab _tab _tab (`ckd`cat'_m5_`resource'') _tab _tab _tab (`ckd`cat'_m6_`resource'') _tab _tab _tab (`ckd`cat'_m7_`resource'') _tab _tab _tab (`ckd`cat'_m8_`resource''
> ) _tab _tab _tab (`ckd`cat'_m9_`resource'') _tab _tab _tab (`ckd`cat'_m10_`resource'') _tab _tab _tab (`ckd`cat'_m11_`resource'') _tab _tab _tab (`ckd`cat'_m12_`resource'') _tab _tab _tab (`ckd`cat'_m1_`resource'') _tab _tab _tab (`ckd`cat'_m2_`resou
> rce'') _tab _tab _tab (`ckd`cat'_m3_`resource'') _n
 18. }
 19. }

. 
end of do-file

. safecount if ckd_group==`cat'
invalid syntax
r(198);

. safecount if ckd_group==1
  592

. safecount if ckd_group==1 & "`month'_`resource'"==1
type mismatch
r(109);

. safecount if ckd_group==`cat' & `month'_`resource'==1
invalid syntax
r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Column headings
. *There are three column headings for each year 2017-2022:
. *Column 1 = the number of people in each CKD group as of the beginning of each year (i.e. in April)
. *Column 2 = the number of people who remain within the same CKD group, progress to a more advanced CKD group, or die by the end of the year (i.e. by the subsequent April)
. *Column 3 = Column 2 as a percentage of Column 1
. file write tablecontent _tab _tab ("`dataset'_N") _tab ("April_N") _tab ("April_pc") _tab ("May_N") _tab ("May_pc") _tab ("June_N") _tab ("June_pc") _tab ("July_N") _tab ("July_pc") _tab ("August_N") _tab ("August_pc") _tab ("September_N") _tab ("Sep
> tember_pc") _tab ("October_N") _tab ("October_pc") _tab ("November_N") _tab ("November_pc") _tab ("December_N") _tab ("December_pc") _tab ("January_N") _tab ("January_pc") _tab ("February_N") _tab ("February_pc") _tab ("March_N") _tab ("March_pc") _n
> (2)

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_fistula_formation m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_out
> patient_appointments m5_outpatient_appointments m6_outpatient_appointments m7_outpatient_appointments m8_outpatient_appointments m9_outpatient_appointments m10_outpatient_appointments m11_outpatient_appointments m12_outpatient_appointments m1_outpati
> ent_appointments m2_outpatient_appointments m3_outpatient_appointments m4_nephrology_appointments m5_nephrology_appointments m6_nephrology_appointments m7_nephrology_appointments m8_nephrology_appointments m9_nephrology_appointments m10_nephrology_ap
> pointments m11_nephrology_appointments m12_nephrology_appointments m1_nephrology_appointments m2_nephrology_appointments m3_nephrology_appointments m4_transplant_appointments m5_transplant_appointments m6_transplant_appointments m7_transplant_appoint
> ments m8_transplant_appointments m9_transplant_appointments m10_transplant_appointments m11_transplant_appointments m12_transplant_appointments m1_transplant_appointments m2_transplant_appointments m3_transplant_appointments m4_gp_interactions m5_gp_
> interactions m6_gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood
> _pressure m7_blood_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria 
> m9_albuminuria m10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine
>  m2_creatinine m3_creatinine {
  3. safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local percent_ckd`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. 
. local lab1: label ckd_group 1
  9. local lab2: label ckd_group 2
 10. local lab3: label ckd_group 3
 11. local lab4: label ckd_group 4
 12. local lab5: label ckd_group 5
 13. local lab6: label ckd_group 6
 14. 
. }
 15. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("`Hospital days'") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`ca
> t'_m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') 
> _tab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 17. }
  592
  15
  592
  8
  592
  10
  592
  14
  592

** COUNT <=5 **
  592
  10
  592
  12
  592
  12
  592
  12
  592
  7
  592
  13
  592

** COUNT <=5 **
  592
  57
_percent_ckd1_m4_admitted_patients invalid name
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_fistula_formation m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_out
> patient_appointments m5_outpatient_appointments m6_outpatient_appointments m7_outpatient_appointments m8_outpatient_appointments m9_outpatient_appointments m10_outpatient_appointments m11_outpatient_appointments m12_outpatient_appointments m1_outpati
> ent_appointments m2_outpatient_appointments m3_outpatient_appointments m4_nephrology_appointments m5_nephrology_appointments m6_nephrology_appointments m7_nephrology_appointments m8_nephrology_appointments m9_nephrology_appointments m10_nephrology_ap
> pointments m11_nephrology_appointments m12_nephrology_appointments m1_nephrology_appointments m2_nephrology_appointments m3_nephrology_appointments m4_transplant_appointments m5_transplant_appointments m6_transplant_appointments m7_transplant_appoint
> ments m8_transplant_appointments m9_transplant_appointments m10_transplant_appointments m11_transplant_appointments m12_transplant_appointments m1_transplant_appointments m2_transplant_appointments m3_transplant_appointments m4_gp_interactions m5_gp_
> interactions m6_gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood
> _pressure m7_blood_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria 
> m9_albuminuria m10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine
>  m2_creatinine m3_creatinine {
  3. safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local percent_ckd`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. 
. local lab1: label ckd_group 1
  9. local lab2: label ckd_group 2
 10. local lab3: label ckd_group 3
 11. local lab4: label ckd_group 4
 12. local lab5: label ckd_group 5
 13. local lab6: label ckd_group 6
 14. 
. }
 15. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("`Hospital days'") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`ca
> t'_m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') 
> _tab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 17. }
  592
  15
  592
  8
  592
  10
  592
  14
  592

** COUNT <=5 **
  592
  10
  592
  12
  592
  12
  592
  12
  592
  7
  592
  13
  592

** COUNT <=5 **
  592
  57
_percent_ckd1_m4_admitted_patients invalid name
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_fistula_formation m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_out
> patient_appointments m5_outpatient_appointments m6_outpatient_appointments m7_outpatient_appointments m8_outpatient_appointments m9_outpatient_appointments m10_outpatient_appointments m11_outpatient_appointments m12_outpatient_appointments m1_outpati
> ent_appointments m2_outpatient_appointments m3_outpatient_appointments m4_nephrology_appointments m5_nephrology_appointments m6_nephrology_appointments m7_nephrology_appointments m8_nephrology_appointments m9_nephrology_appointments m10_nephrology_ap
> pointments m11_nephrology_appointments m12_nephrology_appointments m1_nephrology_appointments m2_nephrology_appointments m3_nephrology_appointments m4_transplant_appointments m5_transplant_appointments m6_transplant_appointments m7_transplant_appoint
> ments m8_transplant_appointments m9_transplant_appointments m10_transplant_appointments m11_transplant_appointments m12_transplant_appointments m1_transplant_appointments m2_transplant_appointments m3_transplant_appointments m4_gp_interactions m5_gp_
> interactions m6_gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood
> _pressure m7_blood_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria 
> m9_albuminuria m10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine
>  m2_creatinine m3_creatinine {
  3. safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local %ckd`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. 
. local lab1: label ckd_group 1
  9. local lab2: label ckd_group 2
 10. local lab3: label ckd_group 3
 11. local lab4: label ckd_group 4
 12. local lab5: label ckd_group 5
 13. local lab6: label ckd_group 6
 14. 
. }
 15. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("`Hospital days'") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`ca
> t'_m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') 
> _tab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 17. }
  592
  15
_% invalid name
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_fistula_formation m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_out
> patient_appointments m5_outpatient_appointments m6_outpatient_appointments m7_outpatient_appointments m8_outpatient_appointments m9_outpatient_appointments m10_outpatient_appointments m11_outpatient_appointments m12_outpatient_appointments m1_outpati
> ent_appointments m2_outpatient_appointments m3_outpatient_appointments m4_nephrology_appointments m5_nephrology_appointments m6_nephrology_appointments m7_nephrology_appointments m8_nephrology_appointments m9_nephrology_appointments m10_nephrology_ap
> pointments m11_nephrology_appointments m12_nephrology_appointments m1_nephrology_appointments m2_nephrology_appointments m3_nephrology_appointments m4_transplant_appointments m5_transplant_appointments m6_transplant_appointments m7_transplant_appoint
> ments m8_transplant_appointments m9_transplant_appointments m10_transplant_appointments m11_transplant_appointments m12_transplant_appointments m1_transplant_appointments m2_transplant_appointments m3_transplant_appointments m4_gp_interactions m5_gp_
> interactions m6_gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood
> _pressure m7_blood_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria 
> m9_albuminuria m10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine
>  m2_creatinine m3_creatinine {
  3. safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. 
. local lab1: label ckd_group 1
  9. local lab2: label ckd_group 2
 10. local lab3: label ckd_group 3
 11. local lab4: label ckd_group 4
 12. local lab5: label ckd_group 5
 13. local lab6: label ckd_group 6
 14. 
. }
 15. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("`Hospital days'") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`ca
> t'_m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') 
> _tab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 17. }
  592
  15
  592
  8
  592
  10
  592
  14
  592

** COUNT <=5 **
  592
  10
  592
  12
  592
  12
  592
  12
  592
  7
  592
  13
  592

** COUNT <=5 **
  592
  57
  592
  60
  592
  54
  592
  67
  592
  59
  592
  64
  592
  51
  592
  61
  592
  49
  592
  65
  592
  69
  592
  6
  592
  15
  592
  18
  592
  12
  592
  12
  592
  12
  592
  6
  592
  15
  592
  18
  592
  11
  592
  11
  592
  12
  592
  6
  592
  15
  592
  8
  592
  18
  592
  13
  592
  13
  592
  13
  592
  6
  592
  16
  592
  20
  592
  13
  592
  10
  592
  13
  592
  11
  592
  14
  592
  10
  592
  14
  592
  6
  592
  7
  592
  10
  592
  10
  592
  7
  592
  7
  592
  8
  592
  11
  592
  51
  592
  61
  592
  55
  592
  61
  592
  47
  592
  54
  592
  48
  592
  59
  592
  60
  592
  50
  592
  54
  592
  71
  592
  9
  592
  7
  592
  12
  592
  7
  592
  6
  592
  8
  592

** COUNT <=5 **
  592
  9
  592

** COUNT <=5 **
  592

** COUNT <=5 **
  592
  10
  592
  6
  592
  10
  592
  13
  592
  7
  592
  9
  592
  8
  592
  9
  592
  10
_ckd1_m10_outpatient_appointments invalid name
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. file write tablecontent _tab _tab ("`dataset'_N") _tab ("April_N") _tab ("April_pc") _tab ("May_N") _tab ("May_pc") _tab ("June_N") _tab ("June_pc") _tab ("July_N") _tab ("July_pc") _tab ("August_N") _tab ("August_pc") _tab ("September_N") _tab ("Sep
> tember_pc") _tab ("October_N") _tab ("October_pc") _tab ("November_N") _tab ("November_pc") _tab ("December_N") _tab ("December_pc") _tab ("January_N") _tab ("January_pc") _tab ("February_N") _tab ("February_pc") _tab ("March_N") _tab ("March_pc") _n
> (2)

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_fistula_formation m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. 
. local lab1: label ckd_group 1
  9. local lab2: label ckd_group 2
 10. local lab3: label ckd_group 3
 11. local lab4: label ckd_group 4
 12. local lab5: label ckd_group 5
 13. local lab6: label ckd_group 6
 14. 
. }
 15. 
unexpected end of file
r(612);

end of do-file

r(612);
. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_fistula_formation m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. 
. local lab1: label ckd_group 1
  9. local lab2: label ckd_group 2
 10. local lab3: label ckd_group 3
 11. local lab4: label ckd_group 4
 12. local lab5: label ckd_group 5
 13. local lab6: label ckd_group 6
 14. 
. }
 15. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("`Hospital days'") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`ca
> t'_m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') 
> _tab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 17. }
  608
  12
  608
  8
  608
  8
  608
  11
  608
  8
  608
  6
  608
  12
  608
  7
  608

** COUNT <=5 **
  608
  10
  608
  7
  608
  13
  608
  65
  608
  59
  608
  64
  608
  56
  608
  56
  608
  56
  608
  62
  608
  49
  608
  65
  608
  71
  608
  54
  608
  8
  608
  8
  608
  12
  608
  14
  608
  14
  608
  13
  608
  11
  608
  11
  608
  20
  608
  10
  608
  6
  608
  6
  608
  8
  608
  7
  608
  9
  608
  11
  608
  17
  608
  10
  608
  8
  608
  13
  608
  10
  608
  8
  608
  13
  608
  10
  608
  13
  608

** COUNT <=5 **
  608
  15
  608
  8
  608
  9
  608
  13
  608
  9
  608

** COUNT <=5 **
  608
  6
  608
  6
  608
  10
  608
  6
  608
  10
  608
  62
  608
  50
  608
  55
  608
  59
  608
  64
  608
  71
  608
  61
  608
  71
  608
  79
  608
  56
  608
  61
  608
  57
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  11
  608
  11
  608
  10
  608
  8
  608
  7
  608
  8
  608

** COUNT <=5 **
  608
  13
  608
  8
  608
  10
  608
  6
  608
  7
  608
  9
  608
  9
  608
  10
  608
  16
  608
  12
  608
  12
  608
  10
  608
  7
  608
  9
  608
  8
  608
  7
  608
  9
  608
  10
  608

** COUNT <=5 **
  608
  11
  608
  10
  608
  6
  608

** COUNT <=5 **
  608
  17
  608
  9
  608
  16
  608
  8
  608
  9
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  15
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  10
  608
  7
  608
  10
  608
  8
  608
  9
  608
  9
  608

** COUNT <=5 **
  608
  7
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  11
  608
  7
  608
  9
  608

** COUNT <=5 **
  608
  9
  608
  11
  608
  9
  608

** COUNT <=5 **
  608
  180
  608
  179
  608
  184
  608
  177
  608
  167
  608
  184
  608
  185
  608
  183
  608
  176
  608
  182
  608
  181
  608
  192
  608
  33
  608
  36
  608
  31
  608
  32
  608
  36
  608
  35
  608
  25
  608
  26
  608
  24
  608
  28
  608
  37
  608
  34
  608
  120
  608
  137
  608
  124
  608
  97
  608
  118
  608
  113
  608
  110
  608
  126
  608
  109
  608
  126
  608
  117
  608
  117
  350

** COUNT <=5 **
  350
  6
  350
  7
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  10
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  6
  350
  6
  350
  29
  350
  37
  350
  30
  350
  24
  350
  34
  350
  44
  350
  40
  350
  38
  350
  37
  350
  37
  350
  28
  350
  8
  350
  8
  350
  8
  350
  9
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  15
  350
  8
  350
  7
  350
  7
  350
  6
  350
  8
  350

** COUNT <=5 **
  350
  6
  350
  6
  350
  7
  350

** COUNT <=5 **
  350
  6
  350
  10
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  7
  350
  8
  350
  11
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  6
  350
  6
  350

** COUNT <=5 **
  350
  7
  350

** COUNT <=5 **
  350
  8
  350
  7
  350
  7
  350
  6
  350
  31
  350
  30
  350
  39
  350
  33
  350
  30
  350
  37
  350
  27
  350
  41
  350
  39
  350
  33
  350
  46
  350
  34
  350
  6
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  11
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  8
  350
  8
  350

** COUNT <=5 **
  350
  7
  350

** COUNT <=5 **
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  6
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  7
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  0
  350

** COUNT <=5 **
  350
  6
  350
  9
  350
  9
  350
  6
  350

** COUNT <=5 **
  350
  9
  350
  6
  350
  7
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  6
  350
  6
  350
  10
  350
  9
  350
  6
  350
  10
  350
  8
  350

** COUNT <=5 **
  350
  7
  350
  106
  350
  107
  350
  112
  350
  98
  350
  91
  350
  113
  350
  96
  350
  100
  350
  108
  350
  102
  350
  102
  350
  96
  350
  19
  350
  16
  350
  17
  350
  14
  350
  14
  350
  19
  350
  19
  350
  13
  350
  31
  350
  13
  350
  17
  350
  16
  350
  71
  350
  82
  350
  66
  350
  74
  350
  72
  350
  77
  350
  81
  350
  62
  350
  77
  350
  69
  350
  62
  350
  76
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  6
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  6
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  7
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  210
  8
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  6
  210
  6
  210

** COUNT <=5 **
  210
  0
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  18
  210
  21
  210
  14
  210
  26
  210
  20
  210
  18
  210
  12
  210
  19
  210
  18
  210
  26
  210
  26
  210

** COUNT <=5 **
  210
  6
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  0
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  6
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  6
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  8
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  10
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  29
  210
  24
  210
  25
  210
  26
  210
  20
  210
  15
  210
  26
  210
  24
  210
  18
  210
  28
  210
  20
  210
  13
  210
  6
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  0
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  6
  210
  6
  210

** COUNT <=5 **
  210
  6
  210
  6
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  7
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  0
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  6
  210
  7
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  0
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  7
  210

** COUNT <=5 **
  210
  7
  210

** COUNT <=5 **
  210
  61
  210
  64
  210
  66
  210
  60
  210
  50
  210
  58
  210
  69
  210
  65
  210
  61
  210
  64
  210
  62
  210
  79
  210
  15
  210
  7
  210
  13
  210
  11
  210
  6
  210
  11
  210

** COUNT <=5 **
  210
  12
  210
  9
  210
  14
  210
  15
  210
  9
  210
  43
  210
  36
  210
  34
  210
  46
  210
  39
  210
  41
  210
  45
  210
  32
  210
  46
  210
  53
  210
  38
  210
  44
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  6
  176
  17
  176
  16
  176
  21
  176
  19
  176
  19
  176
  22
  176
  23
  176
  16
  176
  15
  176
  16
  176
  9
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  7
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176
  6
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176
  7
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  18
  176
  17
  176
  17
  176
  22
  176
  22
  176
  21
  176
  20
  176
  13
  176
  14
  176
  22
  176
  19
  176
  18
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  6
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  6
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  7
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  6
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176
  64
  176
  47
  176
  64
  176
  56
  176
  49
  176
  53
  176
  51
  176
  59
  176
  52
  176
  49
  176
  63
  176
  60
  176
  8
  176
  8
  176
  10
  176
  9
  176
  9
  176
  8
  176
  7
  176
  7
  176
  7
  176
  12
  176
  8
  176
  8
  176
  37
  176
  34
  176
  33
  176
  36
  176
  47
  176
  35
  176
  28
  176
  31
  176
  32
  176
  42
  176
  32
  176
  34
  34
  0
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  6
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  8
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  6
  34

** COUNT <=5 **
  34
  7
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  8
  34
  9
  34
  9
  34
  10
  34
  13
  34
  12
  34
  13
  34
  7
  34
  9
  34
  8
  34
  7
  34
  11
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  7
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  8
  34
  9
  34
  8
  34

** COUNT <=5 **
  34
  9
  34
  8

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_fistula_formation m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. 
. local lab1: label ckd_group 1
  9. local lab2: label ckd_group 2
 10. local lab3: label ckd_group 3
 11. local lab4: label ckd_group 4
 12. local lab5: label ckd_group 5
 13. local lab6: label ckd_group 6
 14. 
. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 15. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`cat'
> _m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') _t
> ab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 16. }
 17. }
  608
  12
invalid syntax
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_fistula_formation m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. 
. local lab1: label ckd_group 1
  9. local lab2: label ckd_group 2
 10. local lab3: label ckd_group 3
 11. local lab4: label ckd_group 4
 12. local lab5: label ckd_group 5
 13. local lab6: label ckd_group 6
 14. }
 15. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`cat'
> _m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') _t
> ab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 17. }
  608
  12
  608
  8
  608
  8
  608
  11
  608
  8
  608
  6
  608
  12
  608
  7
  608

** COUNT <=5 **
  608
  10
  608
  7
  608
  13
  608
  65
  608
  59
  608
  64
  608
  56
  608
  56
  608
  56
  608
  62
  608
  49
  608
  65
  608
  71
  608
  54
  608
  8
  608
  8
  608
  12
  608
  14
  608
  14
  608
  13
  608
  11
  608
  11
  608
  20
  608
  10
  608
  6
  608
  6
  608
  8
  608
  7
  608
  9
  608
  11
  608
  17
  608
  10
  608
  8
  608
  13
  608
  10
  608
  8
  608
  13
  608
  10
  608
  13
  608

** COUNT <=5 **
  608
  15
  608
  8
  608
  9
  608
  13
  608
  9
  608

** COUNT <=5 **
  608
  6
  608
  6
  608
  10
  608
  6
  608
  10
  608
  62
  608
  50
  608
  55
  608
  59
  608
  64
  608
  71
  608
  61
  608
  71
  608
  79
  608
  56
  608
  61
  608
  57
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  11
  608
  11
  608
  10
  608
  8
  608
  7
  608
  8
  608

** COUNT <=5 **
  608
  13
  608
  8
  608
  10
  608
  6
  608
  7
  608
  9
  608
  9
  608
  10
  608
  16
  608
  12
  608
  12
  608
  10
  608
  7
  608
  9
  608
  8
  608
  7
  608
  9
  608
  10
  608

** COUNT <=5 **
  608
  11
  608
  10
  608
  6
  608

** COUNT <=5 **
  608
  17
  608
  9
  608
  16
  608
  8
  608
  9
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  15
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  10
  608
  7
  608
  10
  608
  8
  608
  9
  608
  9
  608

** COUNT <=5 **
  608
  7
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  11
  608
  7
  608
  9
  608

** COUNT <=5 **
  608
  9
  608
  11
  608
  9
  608

** COUNT <=5 **
  608
  180
  608
  179
  608
  184
  608
  177
  608
  167
  608
  184
  608
  185
  608
  183
  608
  176
  608
  182
  608
  181
  608
  192
  608
  33
  608
  36
  608
  31
  608
  32
  608
  36
  608
  35
  608
  25
  608
  26
  608
  24
  608
  28
  608
  37
  608
  34
  608
  120
  608
  137
  608
  124
  608
  97
  608
  118
  608
  113
  608
  110
  608
  126
  608
  109
  608
  126
  608
  117
  608
  117
  350

** COUNT <=5 **
  350
  6
  350
  7
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  10
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  6
  350
  6
  350
  29
  350
  37
  350
  30
  350
  24
  350
  34
  350
  44
  350
  40
  350
  38
  350
  37
  350
  37
  350
  28
  350
  8
  350
  8
  350
  8
  350
  9
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  15
  350
  8
  350
  7
  350
  7
  350
  6
  350
  8
  350

** COUNT <=5 **
  350
  6
  350
  6
  350
  7
  350

** COUNT <=5 **
  350
  6
  350
  10
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  7
  350
  8
  350
  11
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  6
  350
  6
  350

** COUNT <=5 **
  350
  7
  350

** COUNT <=5 **
  350
  8
  350
  7
  350
  7
  350
  6
  350
  31
  350
  30
  350
  39
  350
  33
  350
  30
  350
  37
  350
  27
  350
  41
  350
  39
  350
  33
  350
  46
  350
  34
  350
  6
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  11
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  8
  350
  8
  350

** COUNT <=5 **
  350
  7
  350

** COUNT <=5 **
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  6
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  7
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  0
  350

** COUNT <=5 **
  350
  6
  350
  9
  350
  9
  350
  6
  350

** COUNT <=5 **
  350
  9
  350
  6
  350
  7
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  6
  350
  6
  350
  10
  350
  9
  350
  6
  350
  10
  350
  8
  350

** COUNT <=5 **
  350
  7
  350
  106
  350
  107
  350
  112
  350
  98
  350
  91
  350
  113
  350
  96
  350
  100
  350
  108
  350
  102
  350
  102
  350
  96
  350
  19
  350
  16
  350
  17
  350
  14
  350
  14
  350
  19
  350
  19
  350
  13
  350
  31
  350
  13
  350
  17
  350
  16
  350
  71
  350
  82
  350
  66
  350
  74
  350
  72
  350
  77
  350
  81
  350
  62
  350
  77
  350
  69
  350
  62
  350
  76
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  6
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  6
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  7
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  210
  8
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  6
  210
  6
  210

** COUNT <=5 **
  210
  0
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  18
  210
  21
  210
  14
  210
  26
  210
  20
  210
  18
  210
  12
  210
  19
  210
  18
  210
  26
  210
  26
  210

** COUNT <=5 **
  210
  6
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  0
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  6
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  6
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  8
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  10
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  29
  210
  24
  210
  25
  210
  26
  210
  20
  210
  15
  210
  26
  210
  24
  210
  18
  210
  28
  210
  20
  210
  13
  210
  6
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  0
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  6
  210
  6
  210

** COUNT <=5 **
  210
  6
  210
  6
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  7
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  0
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  6
  210
  7
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  0
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  7
  210

** COUNT <=5 **
  210
  7
  210

** COUNT <=5 **
  210
  61
  210
  64
  210
  66
  210
  60
  210
  50
  210
  58
  210
  69
  210
  65
  210
  61
  210
  64
  210
  62
  210
  79
  210
  15
  210
  7
  210
  13
  210
  11
  210
  6
  210
  11
  210

** COUNT <=5 **
  210
  12
  210
  9
  210
  14
  210
  15
  210
  9
  210
  43
  210
  36
  210
  34
  210
  46
  210
  39
  210
  41
  210
  45
  210
  32
  210
  46
  210
  53
  210
  38
  210
  44
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  6
  176
  17
  176
  16
  176
  21
  176
  19
  176
  19
  176
  22
  176
  23
  176
  16
  176
  15
  176
  16
  176
  9
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  7
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176
  6
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176
  7
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  18
  176
  17
  176
  17
  176
  22
  176
  22
  176
  21
  176
  20
  176
  13
  176
  14
  176
  22
  176
  19
  176
  18
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  6
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  6
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  7
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  6
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176
  64
  176
  47
  176
  64
  176
  56
  176
  49
  176
  53
  176
  51
  176
  59
  176
  52
  176
  49
  176
  63
  176
  60
  176
  8
  176
  8
  176
  10
  176
  9
  176
  9
  176
  8
  176
  7
  176
  7
  176
  7
  176
  12
  176
  8
  176
  8
  176
  37
  176
  34
  176
  33
  176
  36
  176
  47
  176
  35
  176
  28
  176
  31
  176
  32
  176
  42
  176
  32
  176
  34
  34
  0
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  6
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  8
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  6
  34

** COUNT <=5 **
  34
  7
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  8
  34
  9
  34
  9
  34
  10
  34
  13
  34
  12
  34
  13
  34
  7
  34
  9
  34
  8
  34
  7
  34
  11
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  7
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  8
  34
  9
  34
  8
  34

** COUNT <=5 **
  34
  9
  34
  8

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_fistula_formation m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. 
. local lab1: label ckd_group 1
  9. local lab2: label ckd_group 2
 10. local lab3: label ckd_group 3
 11. local lab4: label ckd_group 4
 12. local lab5: label ckd_group 5
 13. local lab6: label ckd_group 6
 14. }
 15. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`cat'
> _m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') _t
> ab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 17. file write tablecontent _tab ("Hospitalised patients") _tab _tab (`ckd`cat'_m4_admitted_patients') _tab _tab _tab (`ckd`cat'_m5_admitted_patients') _tab _tab _tab (`ckd`cat'_m6_admitted_patients') _tab _tab _tab (`ckd`cat'_m7_admitted_patients') _
> tab _tab _tab (`ckd`cat'_m8_admitted_patients') _tab _tab _tab (`ckd`cat'_m9_admitted_patients') _tab _tab _tab (`ckd`cat'_m10_admitted_patients') _tab _tab _tab (`ckd`cat'_m11_admitted_patients') _tab _tab _tab (`ckd`cat'_m12_admitted_patients') _ta
> b _tab _tab (`ckd`cat'_m1_admitted_patients') _tab _tab _tab (`ckd`cat'_m2_admitted_patients') _tab _tab _tab (`ckd`cat'_m3_admitted_patients') _n
 18. file write tablecontent _tab ("AVF formation") _tab _tab (`ckd`cat'_m4_fistula_formation') _tab _tab _tab (`ckd`cat'_m5_fistula_formation') _tab _tab _tab (`ckd`cat'_m6_fistula_formation') _tab _tab _tab (`ckd`cat'_m7_fistula_formation') _tab _tab
>  _tab (`ckd`cat'_m8_fistula_formation') _tab _tab _tab (`ckd`cat'_m9_fistula_formation') _tab _tab _tab (`ckd`cat'_m10_fistula_formation') _tab _tab _tab (`ckd`cat'_m11_fistula_formation') _tab _tab _tab (`ckd`cat'_m12_fistula_formation') _tab _tab _
> tab (`ckd`cat'_m1_fistula_formation') _tab _tab _tab (`ckd`cat'_m2_fistula_formation') _tab _tab _tab (`ckd`cat'_m3_fistula_formation') _n
 19. file write tablecontent _tab ("PD insertion") _tab _tab (`ckd`cat'_m4_pd_insertion') _tab _tab _tab (`ckd`cat'_m5_pd_insertion') _tab _tab _tab (`ckd`cat'_m6_pd_insertion') _tab _tab _tab (`ckd`cat'_m7_pd_insertion') _tab _tab _tab (`ckd`cat'_m8_p
> d_insertion') _tab _tab _tab (`ckd`cat'_m9_pd_insertion') _tab _tab _tab (`ckd`cat'_m10_pd_insertion') _tab _tab _tab (`ckd`cat'_m11_pd_insertion') _tab _tab _tab (`ckd`cat'_m12_pd_insertion') _tab _tab _tab (`ckd`cat'_m1_pd_insertion') _tab _tab _ta
> b (`ckd`cat'_m2_pd_insertion') _tab _tab _tab (`ckd`cat'_m3_pd_insertion') _n
 20. file write tablecontent _tab ("ICU days") _tab _tab (`ckd`cat'_m4_critical_care_days') _tab _tab _tab (`ckd`cat'_m5_critical_care_days') _tab _tab _tab (`ckd`cat'_m6_critical_care_days') _tab _tab _tab (`ckd`cat'_m7_critical_care_days') _tab _tab 
> _tab (`ckd`cat'_m8_critical_care_days') _tab _tab _tab (`ckd`cat'_m9_critical_care_days') _tab _tab _tab (`ckd`cat'_m10_critical_care_days') _tab _tab _tab (`ckd`cat'_m11_critical_care_days') _tab _tab _tab (`ckd`cat'_m12_critical_care_days') _tab _t
> ab _tab (`ckd`cat'_m1_critical_care_days') _tab _tab _tab (`ckd`cat'_m2_critical_care_days') _tab _tab _tab (`ckd`cat'_m3_critical_care_days') _n
 21. file write tablecontent _tab ("ICU patients") _tab _tab (`ckd`cat'_m4_critical_care_patients') _tab _tab _tab (`ckd`cat'_m5_critical_care_patients') _tab _tab _tab (`ckd`cat'_m6_critical_care_patients') _tab _tab _tab (`ckd`cat'_m7_critical_care_p
> atients') _tab _tab _tab (`ckd`cat'_m8_critical_care_patients') _tab _tab _tab (`ckd`cat'_m9_critical_care_patients') _tab _tab _tab (`ckd`cat'_m10_critical_care_patients') _tab _tab _tab (`ckd`cat'_m11_critical_care_patients') _tab _tab _tab (`ckd`c
> at'_m12_critical_care_patients') _tab _tab _tab (`ckd`cat'_m1_critical_care_patients') _tab _tab _tab (`ckd`cat'_m2_critical_care_patients') _tab _tab _tab (`ckd`cat'_m3_critical_care_patients') _n
 22. file write tablecontent _tab ("ED days") _tab _tab (`ckd`cat'_m4_emergency_days') _tab _tab _tab (`ckd`cat'_m5_emergency_days') _tab _tab _tab (`ckd`cat'_m6_emergency_days') _tab _tab _tab (`ckd`cat'_m7_emergency_days') _tab _tab _tab (`ckd`cat'_m
> 8_emergency_days') _tab _tab _tab (`ckd`cat'_m9_emergency_days') _tab _tab _tab (`ckd`cat'_m10_emergency_days') _tab _tab _tab (`ckd`cat'_m11_emergency_days') _tab _tab _tab (`ckd`cat'_m12_emergency_days') _tab _tab _tab (`ckd`cat'_m1_emergency_days'
> ) _tab _tab _tab (`ckd`cat'_m2_emergency_days') _tab _tab _tab (`ckd`cat'_m3_emergency_days') _n
 23. file write tablecontent _tab ("OPD appts") _tab _tab (`ckd`cat'_m4_op_appts') _tab _tab _tab (`ckd`cat'_m5_op_appts') _tab _tab _tab (`ckd`cat'_m6_op_appts') _tab _tab _tab (`ckd`cat'_m7_op_appts') _tab _tab _tab (`ckd`cat'_m8_op_appts') _tab _tab
>  _tab (`ckd`cat'_m9_op_appts') _tab _tab _tab (`ckd`cat'_m10_op_appts') _tab _tab _tab (`ckd`cat'_m11_op_appts') _tab _tab _tab (`ckd`cat'_m12_op_appts') _tab _tab _tab (`ckd`cat'_m1_op_appts') _tab _tab _tab (`ckd`cat'_m2_op_appts') _tab _tab _tab (
> `ckd`cat'_m3_op_appts') _n
 24. file write tablecontent _tab ("Neph appts") _tab _tab (`ckd`cat'_m4_neph_appts') _tab _tab _tab (`ckd`cat'_m5_neph_appts') _tab _tab _tab (`ckd`cat'_m6_neph_appts') _tab _tab _tab (`ckd`cat'_m7_neph_appts') _tab _tab _tab (`ckd`cat'_m8_neph_appts'
> ) _tab _tab _tab (`ckd`cat'_m9_neph_appts') _tab _tab _tab (`ckd`cat'_m10_neph_appts') _tab _tab _tab (`ckd`cat'_m11_neph_appts') _tab _tab _tab (`ckd`cat'_m12_neph_appts') _tab _tab _tab (`ckd`cat'_m1_neph_appts') _tab _tab _tab (`ckd`cat'_m2_neph_a
> ppts') _tab _tab _tab (`ckd`cat'_m3_neph_appts') _n
 25. file write tablecontent _tab ("Tx appts") _tab _tab (`ckd`cat'_m4_tx_appts') _tab _tab _tab (`ckd`cat'_m5_tx_appts') _tab _tab _tab (`ckd`cat'_m6_tx_appts') _tab _tab _tab (`ckd`cat'_m7_tx_appts') _tab _tab _tab (`ckd`cat'_m8_tx_appts') _tab _tab 
> _tab (`ckd`cat'_m9_tx_appts') _tab _tab _tab (`ckd`cat'_m10_tx_appts') _tab _tab _tab (`ckd`cat'_m11_tx_appts') _tab _tab _tab (`ckd`cat'_m12_tx_appts') _tab _tab _tab (`ckd`cat'_m1_tx_appts') _tab _tab _tab (`ckd`cat'_m2_tx_appts') _tab _tab _tab (`
> ckd`cat'_m3_tx_appts') _n
 26. file write tablecontent _tab ("GP interactions") _tab _tab (`ckd`cat'_m4_gp_interactions') _tab _tab _tab (`ckd`cat'_m5_gp_interactions') _tab _tab _tab (`ckd`cat'_m6_gp_interactions') _tab _tab _tab (`ckd`cat'_m7_gp_interactions') _tab _tab _tab 
> (`ckd`cat'_m8_gp_interactions') _tab _tab _tab (`ckd`cat'_m9_gp_interactions') _tab _tab _tab (`ckd`cat'_m10_gp_interactions') _tab _tab _tab (`ckd`cat'_m11_gp_interactions') _tab _tab _tab (`ckd`cat'_m12_gp_interactions') _tab _tab _tab (`ckd`cat'_m
> 1_gp_interactions') _tab _tab _tab (`ckd`cat'_m2_gp_interactions') _tab _tab _tab (`ckd`cat'_m3_gp_interactions') _n
 27. file write tablecontent _tab ("BP measurements") _tab _tab (`ckd`cat'_m4_blood_pressure') _tab _tab _tab (`ckd`cat'_m5_blood_pressure') _tab _tab _tab (`ckd`cat'_m6_blood_pressure') _tab _tab _tab (`ckd`cat'_m7_blood_pressure') _tab _tab _tab (`ck
> d`cat'_m8_blood_pressure') _tab _tab _tab (`ckd`cat'_m9_blood_pressure') _tab _tab _tab (`ckd`cat'_m10_blood_pressure') _tab _tab _tab (`ckd`cat'_m11_blood_pressure') _tab _tab _tab (`ckd`cat'_m12_blood_pressure') _tab _tab _tab (`ckd`cat'_m1_blood_p
> ressure') _tab _tab _tab (`ckd`cat'_m2_blood_pressure') _tab _tab _tab (`ckd`cat'_m3_blood_pressure') _n
 28. file write tablecontent _tab ("uACR tests") _tab _tab (`ckd`cat'_m4_albuminuria') _tab _tab _tab (`ckd`cat'_m5_albuminuria') _tab _tab _tab (`ckd`cat'_m6_albuminuria') _tab _tab _tab (`ckd`cat'_m7_albuminuria') _tab _tab _tab (`ckd`cat'_m8_albumin
> uria') _tab _tab _tab (`ckd`cat'_m9_albuminuria') _tab _tab _tab (`ckd`cat'_m10_albuminuria') _tab _tab _tab (`ckd`cat'_m11_albuminuria') _tab _tab _tab (`ckd`cat'_m12_albuminuria') _tab _tab _tab (`ckd`cat'_m1_albuminuria') _tab _tab _tab (`ckd`cat'
> _m2_albuminuria') _tab _tab _tab (`ckd`cat'_m3_albuminuria') _n
 29. file write tablecontent _tab ("Creatinine tests") _tab _tab (`ckd`cat'_m4_creatinine') _tab _tab _tab (`ckd`cat'_m5_creatinine') _tab _tab _tab (`ckd`cat'_m6_creatinine') _tab _tab _tab (`ckd`cat'_m7_creatinine') _tab _tab _tab (`ckd`cat'_m8_creat
> inine') _tab _tab _tab (`ckd`cat'_m9_creatinine') _tab _tab _tab (`ckd`cat'_m10_creatinine') _tab _tab _tab (`ckd`cat'_m11_creatinine') _tab _tab _tab (`ckd`cat'_m12_creatinine') _tab _tab _tab (`ckd`cat'_m1_creatinine') _tab _tab _tab (`ckd`cat'_m2_
> creatinine') _tab _tab _tab (`ckd`cat'_m3_creatinine') _n
 30. }
  608
  12
  608
  8
  608
  8
  608
  11
  608
  8
  608
  6
  608
  12
  608
  7
  608

** COUNT <=5 **
  608
  10
  608
  7
  608
  13
  608
  65
  608
  59
  608
  64
  608
  56
  608
  56
  608
  56
  608
  62
  608
  49
  608
  65
  608
  71
  608
  54
  608
  8
  608
  8
  608
  12
  608
  14
  608
  14
  608
  13
  608
  11
  608
  11
  608
  20
  608
  10
  608
  6
  608
  6
  608
  8
  608
  7
  608
  9
  608
  11
  608
  17
  608
  10
  608
  8
  608
  13
  608
  10
  608
  8
  608
  13
  608
  10
  608
  13
  608

** COUNT <=5 **
  608
  15
  608
  8
  608
  9
  608
  13
  608
  9
  608

** COUNT <=5 **
  608
  6
  608
  6
  608
  10
  608
  6
  608
  10
  608
  62
  608
  50
  608
  55
  608
  59
  608
  64
  608
  71
  608
  61
  608
  71
  608
  79
  608
  56
  608
  61
  608
  57
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  11
  608
  11
  608
  10
  608
  8
  608
  7
  608
  8
  608

** COUNT <=5 **
  608
  13
  608
  8
  608
  10
  608
  6
  608
  7
  608
  9
  608
  9
  608
  10
  608
  16
  608
  12
  608
  12
  608
  10
  608
  7
  608
  9
  608
  8
  608
  7
  608
  9
  608
  10
  608

** COUNT <=5 **
  608
  11
  608
  10
  608
  6
  608

** COUNT <=5 **
  608
  17
  608
  9
  608
  16
  608
  8
  608
  9
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  15
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  10
  608
  7
  608
  10
  608
  8
  608
  9
  608
  9
  608

** COUNT <=5 **
  608
  7
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  11
  608
  7
  608
  9
  608

** COUNT <=5 **
  608
  9
  608
  11
  608
  9
  608

** COUNT <=5 **
  608
  180
  608
  179
  608
  184
  608
  177
  608
  167
  608
  184
  608
  185
  608
  183
  608
  176
  608
  182
  608
  181
  608
  192
  608
  33
  608
  36
  608
  31
  608
  32
  608
  36
  608
  35
  608
  25
  608
  26
  608
  24
  608
  28
  608
  37
  608
  34
  608
  120
  608
  137
  608
  124
  608
  97
  608
  118
  608
  113
  608
  110
  608
  126
  608
  109
  608
  126
  608
  117
  608
  117
invalid syntax
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Column headings
. *There are three column headings for each year 2017-2022:
. *Column 1 = the number of people in each CKD group as of the beginning of each year (i.e. in April)
. *Column 2 = the number of people who remain within the same CKD group, progress to a more advanced CKD group, or die by the end of the year (i.e. by the subsequent April)
. *Column 3 = Column 2 as a percentage of Column 1
. file write tablecontent _tab _tab ("`dataset'_N") _tab ("April_N") _tab ("April_pc") _tab ("May_N") _tab ("May_pc") _tab ("June_N") _tab ("June_pc") _tab ("July_N") _tab ("July_pc") _tab ("August_N") _tab ("August_pc") _tab ("September_N") _tab ("Sep
> tember_pc") _tab ("October_N") _tab ("October_pc") _tab ("November_N") _tab ("November_pc") _tab ("December_N") _tab ("December_pc") _tab ("January_N") _tab ("January_pc") _tab ("February_N") _tab ("February_pc") _tab ("March_N") _tab ("March_pc") _n
> (2)

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Disclosure minimisation
. *safecount provides a count with any counts <=5 returned at "<=5"
. *round(r(N),5) rounds counts to the nearest 5 with any counts <=5 returned as "."
. 
. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_fistula_formation m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. 
. local lab1: label ckd_group 1
  9. local lab2: label ckd_group 2
 10. local lab3: label ckd_group 3
 11. local lab4: label ckd_group 4
 12. local lab5: label ckd_group 5
 13. local lab6: label ckd_group 6
 14. }
 15. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`cat'
> _m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') _t
> ab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 17. file write tablecontent _tab ("Hospitalised patients") _tab _tab (`ckd`cat'_m4_admitted_patients') _tab _tab _tab (`ckd`cat'_m5_admitted_patients') _tab _tab _tab (`ckd`cat'_m6_admitted_patients') _tab _tab _tab (`ckd`cat'_m7_admitted_patients') _
> tab _tab _tab (`ckd`cat'_m8_admitted_patients') _tab _tab _tab (`ckd`cat'_m9_admitted_patients') _tab _tab _tab (`ckd`cat'_m10_admitted_patients') _tab _tab _tab (`ckd`cat'_m11_admitted_patients') _tab _tab _tab (`ckd`cat'_m12_admitted_patients') _ta
> b _tab _tab (`ckd`cat'_m1_admitted_patients') _tab _tab _tab (`ckd`cat'_m2_admitted_patients') _tab _tab _tab (`ckd`cat'_m3_admitted_patients') _n
 18. file write tablecontent _tab ("AVF formation") _tab _tab (`ckd`cat'_m4_fistula_formation') _tab _tab _tab (`ckd`cat'_m5_fistula_formation') _tab _tab _tab (`ckd`cat'_m6_fistula_formation') _tab _tab _tab (`ckd`cat'_m7_fistula_formation') _tab _tab
>  _tab (`ckd`cat'_m8_fistula_formation') _tab _tab _tab (`ckd`cat'_m9_fistula_formation') _tab _tab _tab (`ckd`cat'_m10_fistula_formation') _tab _tab _tab (`ckd`cat'_m11_fistula_formation') _tab _tab _tab (`ckd`cat'_m12_fistula_formation') _tab _tab _
> tab (`ckd`cat'_m1_fistula_formation') _tab _tab _tab (`ckd`cat'_m2_fistula_formation') _tab _tab _tab (`ckd`cat'_m3_fistula_formation') _n
 19. file write tablecontent _tab ("PD insertion") _tab _tab (`ckd`cat'_m4_pd_insertion') _tab _tab _tab (`ckd`cat'_m5_pd_insertion') _tab _tab _tab (`ckd`cat'_m6_pd_insertion') _tab _tab _tab (`ckd`cat'_m7_pd_insertion') _tab _tab _tab (`ckd`cat'_m8_p
> d_insertion') _tab _tab _tab (`ckd`cat'_m9_pd_insertion') _tab _tab _tab (`ckd`cat'_m10_pd_insertion') _tab _tab _tab (`ckd`cat'_m11_pd_insertion') _tab _tab _tab (`ckd`cat'_m12_pd_insertion') _tab _tab _tab (`ckd`cat'_m1_pd_insertion') _tab _tab _ta
> b (`ckd`cat'_m2_pd_insertion') _tab _tab _tab (`ckd`cat'_m3_pd_insertion') _n
 20. file write tablecontent _tab ("ICU days") _tab _tab (`ckd`cat'_m4_critical_care_days') _tab _tab _tab (`ckd`cat'_m5_critical_care_days') _tab _tab _tab (`ckd`cat'_m6_critical_care_days') _tab _tab _tab (`ckd`cat'_m7_critical_care_days') _tab _tab 
> _tab (`ckd`cat'_m8_critical_care_days') _tab _tab _tab (`ckd`cat'_m9_critical_care_days') _tab _tab _tab (`ckd`cat'_m10_critical_care_days') _tab _tab _tab (`ckd`cat'_m11_critical_care_days') _tab _tab _tab (`ckd`cat'_m12_critical_care_days') _tab _t
> ab _tab (`ckd`cat'_m1_critical_care_days') _tab _tab _tab (`ckd`cat'_m2_critical_care_days') _tab _tab _tab (`ckd`cat'_m3_critical_care_days') _n
 21. file write tablecontent _tab ("ICU patients") _tab _tab (`ckd`cat'_m4_critical_care_patients') _tab _tab _tab (`ckd`cat'_m5_critical_care_patients') _tab _tab _tab (`ckd`cat'_m6_critical_care_patients') _tab _tab _tab (`ckd`cat'_m7_critical_care_p
> atients') _tab _tab _tab (`ckd`cat'_m8_critical_care_patients') _tab _tab _tab (`ckd`cat'_m9_critical_care_patients') _tab _tab _tab (`ckd`cat'_m10_critical_care_patients') _tab _tab _tab (`ckd`cat'_m11_critical_care_patients') _tab _tab _tab (`ckd`c
> at'_m12_critical_care_patients') _tab _tab _tab (`ckd`cat'_m1_critical_care_patients') _tab _tab _tab (`ckd`cat'_m2_critical_care_patients') _tab _tab _tab (`ckd`cat'_m3_critical_care_patients') _n
 22. file write tablecontent _tab ("ED days") _tab _tab (`ckd`cat'_m4_emergency_days') _tab _tab _tab (`ckd`cat'_m5_emergency_days') _tab _tab _tab (`ckd`cat'_m6_emergency_days') _tab _tab _tab (`ckd`cat'_m7_emergency_days') _tab _tab _tab (`ckd`cat'_m
> 8_emergency_days') _tab _tab _tab (`ckd`cat'_m9_emergency_days') _tab _tab _tab (`ckd`cat'_m10_emergency_days') _tab _tab _tab (`ckd`cat'_m11_emergency_days') _tab _tab _tab (`ckd`cat'_m12_emergency_days') _tab _tab _tab (`ckd`cat'_m1_emergency_days'
> ) _tab _tab _tab (`ckd`cat'_m2_emergency_days') _tab _tab _tab (`ckd`cat'_m3_emergency_days') _n
 23. file write tablecontent _tab ("OPD appts") _tab _tab (`ckd`cat'_m4_op_appts') _tab _tab _tab (`ckd`cat'_m5_op_appts') _tab _tab _tab (`ckd`cat'_m6_op_appts') _tab _tab _tab (`ckd`cat'_m7_op_appts') _tab _tab _tab (`ckd`cat'_m8_op_appts') _tab _tab
>  _tab (`ckd`cat'_m9_op_appts') _tab _tab _tab (`ckd`cat'_m10_op_appts') _tab _tab _tab (`ckd`cat'_m11_op_appts') _tab _tab _tab (`ckd`cat'_m12_op_appts') _tab _tab _tab (`ckd`cat'_m1_op_appts') _tab _tab _tab (`ckd`cat'_m2_op_appts') _tab _tab _tab (
> `ckd`cat'_m3_op_appts') _n
 24. file write tablecontent _tab ("Neph appts") _tab _tab (`ckd`cat'_m4_neph_appts') _tab _tab _tab (`ckd`cat'_m5_neph_appts') _tab _tab _tab (`ckd`cat'_m6_neph_appts') _tab _tab _tab (`ckd`cat'_m7_neph_appts') _tab _tab _tab (`ckd`cat'_m8_neph_appts'
> ) _tab _tab _tab (`ckd`cat'_m9_neph_appts') _tab _tab _tab (`ckd`cat'_m10_neph_appts') _tab _tab _tab (`ckd`cat'_m11_neph_appts') _tab _tab _tab (`ckd`cat'_m12_neph_appts') _tab _tab _tab (`ckd`cat'_m1_neph_appts') _tab _tab _tab (`ckd`cat'_m2_neph_a
> ppts') _tab _tab _tab (`ckd`cat'_m3_neph_appts') _n
 25. file write tablecontent _tab ("Tx appts") _tab _tab (`ckd`cat'_m4_tx_appts') _tab _tab _tab (`ckd`cat'_m5_tx_appts') _tab _tab _tab (`ckd`cat'_m6_tx_appts') _tab _tab _tab (`ckd`cat'_m7_tx_appts') _tab _tab _tab (`ckd`cat'_m8_tx_appts') _tab _tab 
> _tab (`ckd`cat'_m9_tx_appts') _tab _tab _tab (`ckd`cat'_m10_tx_appts') _tab _tab _tab (`ckd`cat'_m11_tx_appts') _tab _tab _tab (`ckd`cat'_m12_tx_appts') _tab _tab _tab (`ckd`cat'_m1_tx_appts') _tab _tab _tab (`ckd`cat'_m2_tx_appts') _tab _tab _tab (`
> ckd`cat'_m3_tx_appts') _n
 26. file write tablecontent _tab ("GP interactions") _tab _tab (`ckd`cat'_m4_gp_interactions') _tab _tab _tab (`ckd`cat'_m5_gp_interactions') _tab _tab _tab (`ckd`cat'_m6_gp_interactions') _tab _tab _tab (`ckd`cat'_m7_gp_interactions') _tab _tab _tab 
> (`ckd`cat'_m8_gp_interactions') _tab _tab _tab (`ckd`cat'_m9_gp_interactions') _tab _tab _tab (`ckd`cat'_m10_gp_interactions') _tab _tab _tab (`ckd`cat'_m11_gp_interactions') _tab _tab _tab (`ckd`cat'_m12_gp_interactions') _tab _tab _tab (`ckd`cat'_m
> 1_gp_interactions') _tab _tab _tab (`ckd`cat'_m2_gp_interactions') _tab _tab _tab (`ckd`cat'_m3_gp_interactions') _n
 27. file write tablecontent _tab ("BP measurements") _tab _tab (`ckd`cat'_m4_blood_pressure') _tab _tab _tab (`ckd`cat'_m5_blood_pressure') _tab _tab _tab (`ckd`cat'_m6_blood_pressure') _tab _tab _tab (`ckd`cat'_m7_blood_pressure') _tab _tab _tab (`ck
> d`cat'_m8_blood_pressure') _tab _tab _tab (`ckd`cat'_m9_blood_pressure') _tab _tab _tab (`ckd`cat'_m10_blood_pressure') _tab _tab _tab (`ckd`cat'_m11_blood_pressure') _tab _tab _tab (`ckd`cat'_m12_blood_pressure') _tab _tab _tab (`ckd`cat'_m1_blood_p
> ressure') _tab _tab _tab (`ckd`cat'_m2_blood_pressure') _tab _tab _tab (`ckd`cat'_m3_blood_pressure') _n
 28. file write tablecontent _tab ("uACR tests") _tab _tab (`ckd`cat'_m4_albuminuria') _tab _tab _tab (`ckd`cat'_m5_albuminuria') _tab _tab _tab (`ckd`cat'_m6_albuminuria') _tab _tab _tab (`ckd`cat'_m7_albuminuria') _tab _tab _tab (`ckd`cat'_m8_albumin
> uria') _tab _tab _tab (`ckd`cat'_m9_albuminuria') _tab _tab _tab (`ckd`cat'_m10_albuminuria') _tab _tab _tab (`ckd`cat'_m11_albuminuria') _tab _tab _tab (`ckd`cat'_m12_albuminuria') _tab _tab _tab (`ckd`cat'_m1_albuminuria') _tab _tab _tab (`ckd`cat'
> _m2_albuminuria') _tab _tab _tab (`ckd`cat'_m3_albuminuria') _n
 29. file write tablecontent _tab ("Creatinine tests") _tab _tab (`ckd`cat'_m4_creatinine') _tab _tab _tab (`ckd`cat'_m5_creatinine') _tab _tab _tab (`ckd`cat'_m6_creatinine') _tab _tab _tab (`ckd`cat'_m7_creatinine') _tab _tab _tab (`ckd`cat'_m8_creat
> inine') _tab _tab _tab (`ckd`cat'_m9_creatinine') _tab _tab _tab (`ckd`cat'_m10_creatinine') _tab _tab _tab (`ckd`cat'_m11_creatinine') _tab _tab _tab (`ckd`cat'_m12_creatinine') _tab _tab _tab (`ckd`cat'_m1_creatinine') _tab _tab _tab (`ckd`cat'_m2_
> creatinine') _tab _tab _tab (`ckd`cat'_m3_creatinine') _n(2)
 30. }
  608
  12
  608
  8
  608
  8
  608
  11
  608
  8
  608
  6
  608
  12
  608
  7
  608

** COUNT <=5 **
  608
  10
  608
  7
  608
  13
  608
  65
  608
  59
  608
  64
  608
  56
  608
  56
  608
  56
  608
  62
  608
  49
  608
  65
  608
  71
  608
  54
  608
  8
  608
  8
  608
  12
  608
  14
  608
  14
  608
  13
  608
  11
  608
  11
  608
  20
  608
  10
  608
  6
  608
  6
  608
  8
  608
  7
  608
  9
  608
  11
  608
  17
  608
  10
  608
  8
  608
  13
  608
  10
  608
  8
  608
  13
  608
  10
  608
  13
  608

** COUNT <=5 **
  608
  15
  608
  8
  608
  9
  608
  13
  608
  9
  608

** COUNT <=5 **
  608
  6
  608
  6
  608
  10
  608
  6
  608
  10
  608
  62
  608
  50
  608
  55
  608
  59
  608
  64
  608
  71
  608
  61
  608
  71
  608
  79
  608
  56
  608
  61
  608
  57
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  11
  608
  11
  608
  10
  608
  8
  608
  7
  608
  8
  608

** COUNT <=5 **
  608
  13
  608
  8
  608
  10
  608
  6
  608
  7
  608
  9
  608
  9
  608
  10
  608
  16
  608
  12
  608
  12
  608
  10
  608
  7
  608
  9
  608
  8
  608
  7
  608
  9
  608
  10
  608

** COUNT <=5 **
  608
  11
  608
  10
  608
  6
  608

** COUNT <=5 **
  608
  17
  608
  9
  608
  16
  608
  8
  608
  9
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  15
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  10
  608
  7
  608
  10
  608
  8
  608
  9
  608
  9
  608

** COUNT <=5 **
  608
  7
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  11
  608
  7
  608
  9
  608

** COUNT <=5 **
  608
  9
  608
  11
  608
  9
  608

** COUNT <=5 **
  608
  180
  608
  179
  608
  184
  608
  177
  608
  167
  608
  184
  608
  185
  608
  183
  608
  176
  608
  182
  608
  181
  608
  192
  608
  33
  608
  36
  608
  31
  608
  32
  608
  36
  608
  35
  608
  25
  608
  26
  608
  24
  608
  28
  608
  37
  608
  34
  608
  120
  608
  137
  608
  124
  608
  97
  608
  118
  608
  113
  608
  110
  608
  126
  608
  109
  608
  126
  608
  117
  608
  117
invalid syntax
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_fistula_formation m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. 
. local lab1: label ckd_group 1
  9. local lab2: label ckd_group 2
 10. local lab3: label ckd_group 3
 11. local lab4: label ckd_group 4
 12. local lab5: label ckd_group 5
 13. local lab6: label ckd_group 6
 14. 
. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab (`baseline_ckd`cat'') _n
 15. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`cat'
> _m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') _t
> ab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 16. file write tablecontent _tab ("Hospitalised patients") _tab _tab (`ckd`cat'_m4_admitted_patients') _tab _tab _tab (`ckd`cat'_m5_admitted_patients') _tab _tab _tab (`ckd`cat'_m6_admitted_patients') _tab _tab _tab (`ckd`cat'_m7_admitted_patients') _
> tab _tab _tab (`ckd`cat'_m8_admitted_patients') _tab _tab _tab (`ckd`cat'_m9_admitted_patients') _tab _tab _tab (`ckd`cat'_m10_admitted_patients') _tab _tab _tab (`ckd`cat'_m11_admitted_patients') _tab _tab _tab (`ckd`cat'_m12_admitted_patients') _ta
> b _tab _tab (`ckd`cat'_m1_admitted_patients') _tab _tab _tab (`ckd`cat'_m2_admitted_patients') _tab _tab _tab (`ckd`cat'_m3_admitted_patients') _n
 17. file write tablecontent _tab ("AVF formation") _tab _tab (`ckd`cat'_m4_fistula_formation') _tab _tab _tab (`ckd`cat'_m5_fistula_formation') _tab _tab _tab (`ckd`cat'_m6_fistula_formation') _tab _tab _tab (`ckd`cat'_m7_fistula_formation') _tab _tab
>  _tab (`ckd`cat'_m8_fistula_formation') _tab _tab _tab (`ckd`cat'_m9_fistula_formation') _tab _tab _tab (`ckd`cat'_m10_fistula_formation') _tab _tab _tab (`ckd`cat'_m11_fistula_formation') _tab _tab _tab (`ckd`cat'_m12_fistula_formation') _tab _tab _
> tab (`ckd`cat'_m1_fistula_formation') _tab _tab _tab (`ckd`cat'_m2_fistula_formation') _tab _tab _tab (`ckd`cat'_m3_fistula_formation') _n
 18. file write tablecontent _tab ("PD insertion") _tab _tab (`ckd`cat'_m4_pd_insertion') _tab _tab _tab (`ckd`cat'_m5_pd_insertion') _tab _tab _tab (`ckd`cat'_m6_pd_insertion') _tab _tab _tab (`ckd`cat'_m7_pd_insertion') _tab _tab _tab (`ckd`cat'_m8_p
> d_insertion') _tab _tab _tab (`ckd`cat'_m9_pd_insertion') _tab _tab _tab (`ckd`cat'_m10_pd_insertion') _tab _tab _tab (`ckd`cat'_m11_pd_insertion') _tab _tab _tab (`ckd`cat'_m12_pd_insertion') _tab _tab _tab (`ckd`cat'_m1_pd_insertion') _tab _tab _ta
> b (`ckd`cat'_m2_pd_insertion') _tab _tab _tab (`ckd`cat'_m3_pd_insertion') _n
 19. file write tablecontent _tab ("ICU days") _tab _tab (`ckd`cat'_m4_critical_care_days') _tab _tab _tab (`ckd`cat'_m5_critical_care_days') _tab _tab _tab (`ckd`cat'_m6_critical_care_days') _tab _tab _tab (`ckd`cat'_m7_critical_care_days') _tab _tab 
> _tab (`ckd`cat'_m8_critical_care_days') _tab _tab _tab (`ckd`cat'_m9_critical_care_days') _tab _tab _tab (`ckd`cat'_m10_critical_care_days') _tab _tab _tab (`ckd`cat'_m11_critical_care_days') _tab _tab _tab (`ckd`cat'_m12_critical_care_days') _tab _t
> ab _tab (`ckd`cat'_m1_critical_care_days') _tab _tab _tab (`ckd`cat'_m2_critical_care_days') _tab _tab _tab (`ckd`cat'_m3_critical_care_days') _n
 20. file write tablecontent _tab ("ICU patients") _tab _tab (`ckd`cat'_m4_critical_care_patients') _tab _tab _tab (`ckd`cat'_m5_critical_care_patients') _tab _tab _tab (`ckd`cat'_m6_critical_care_patients') _tab _tab _tab (`ckd`cat'_m7_critical_care_p
> atients') _tab _tab _tab (`ckd`cat'_m8_critical_care_patients') _tab _tab _tab (`ckd`cat'_m9_critical_care_patients') _tab _tab _tab (`ckd`cat'_m10_critical_care_patients') _tab _tab _tab (`ckd`cat'_m11_critical_care_patients') _tab _tab _tab (`ckd`c
> at'_m12_critical_care_patients') _tab _tab _tab (`ckd`cat'_m1_critical_care_patients') _tab _tab _tab (`ckd`cat'_m2_critical_care_patients') _tab _tab _tab (`ckd`cat'_m3_critical_care_patients') _n
 21. file write tablecontent _tab ("ED days") _tab _tab (`ckd`cat'_m4_emergency_days') _tab _tab _tab (`ckd`cat'_m5_emergency_days') _tab _tab _tab (`ckd`cat'_m6_emergency_days') _tab _tab _tab (`ckd`cat'_m7_emergency_days') _tab _tab _tab (`ckd`cat'_m
> 8_emergency_days') _tab _tab _tab (`ckd`cat'_m9_emergency_days') _tab _tab _tab (`ckd`cat'_m10_emergency_days') _tab _tab _tab (`ckd`cat'_m11_emergency_days') _tab _tab _tab (`ckd`cat'_m12_emergency_days') _tab _tab _tab (`ckd`cat'_m1_emergency_days'
> ) _tab _tab _tab (`ckd`cat'_m2_emergency_days') _tab _tab _tab (`ckd`cat'_m3_emergency_days') _n
 22. file write tablecontent _tab ("OPD appts") _tab _tab (`ckd`cat'_m4_op_appts') _tab _tab _tab (`ckd`cat'_m5_op_appts') _tab _tab _tab (`ckd`cat'_m6_op_appts') _tab _tab _tab (`ckd`cat'_m7_op_appts') _tab _tab _tab (`ckd`cat'_m8_op_appts') _tab _tab
>  _tab (`ckd`cat'_m9_op_appts') _tab _tab _tab (`ckd`cat'_m10_op_appts') _tab _tab _tab (`ckd`cat'_m11_op_appts') _tab _tab _tab (`ckd`cat'_m12_op_appts') _tab _tab _tab (`ckd`cat'_m1_op_appts') _tab _tab _tab (`ckd`cat'_m2_op_appts') _tab _tab _tab (
> `ckd`cat'_m3_op_appts') _n
 23. file write tablecontent _tab ("Neph appts") _tab _tab (`ckd`cat'_m4_neph_appts') _tab _tab _tab (`ckd`cat'_m5_neph_appts') _tab _tab _tab (`ckd`cat'_m6_neph_appts') _tab _tab _tab (`ckd`cat'_m7_neph_appts') _tab _tab _tab (`ckd`cat'_m8_neph_appts'
> ) _tab _tab _tab (`ckd`cat'_m9_neph_appts') _tab _tab _tab (`ckd`cat'_m10_neph_appts') _tab _tab _tab (`ckd`cat'_m11_neph_appts') _tab _tab _tab (`ckd`cat'_m12_neph_appts') _tab _tab _tab (`ckd`cat'_m1_neph_appts') _tab _tab _tab (`ckd`cat'_m2_neph_a
> ppts') _tab _tab _tab (`ckd`cat'_m3_neph_appts') _n
 24. file write tablecontent _tab ("Tx appts") _tab _tab (`ckd`cat'_m4_tx_appts') _tab _tab _tab (`ckd`cat'_m5_tx_appts') _tab _tab _tab (`ckd`cat'_m6_tx_appts') _tab _tab _tab (`ckd`cat'_m7_tx_appts') _tab _tab _tab (`ckd`cat'_m8_tx_appts') _tab _tab 
> _tab (`ckd`cat'_m9_tx_appts') _tab _tab _tab (`ckd`cat'_m10_tx_appts') _tab _tab _tab (`ckd`cat'_m11_tx_appts') _tab _tab _tab (`ckd`cat'_m12_tx_appts') _tab _tab _tab (`ckd`cat'_m1_tx_appts') _tab _tab _tab (`ckd`cat'_m2_tx_appts') _tab _tab _tab (`
> ckd`cat'_m3_tx_appts') _n
 25. file write tablecontent _tab ("GP interactions") _tab _tab (`ckd`cat'_m4_gp_interactions') _tab _tab _tab (`ckd`cat'_m5_gp_interactions') _tab _tab _tab (`ckd`cat'_m6_gp_interactions') _tab _tab _tab (`ckd`cat'_m7_gp_interactions') _tab _tab _tab 
> (`ckd`cat'_m8_gp_interactions') _tab _tab _tab (`ckd`cat'_m9_gp_interactions') _tab _tab _tab (`ckd`cat'_m10_gp_interactions') _tab _tab _tab (`ckd`cat'_m11_gp_interactions') _tab _tab _tab (`ckd`cat'_m12_gp_interactions') _tab _tab _tab (`ckd`cat'_m
> 1_gp_interactions') _tab _tab _tab (`ckd`cat'_m2_gp_interactions') _tab _tab _tab (`ckd`cat'_m3_gp_interactions') _n
 26. file write tablecontent _tab ("BP measurements") _tab _tab (`ckd`cat'_m4_blood_pressure') _tab _tab _tab (`ckd`cat'_m5_blood_pressure') _tab _tab _tab (`ckd`cat'_m6_blood_pressure') _tab _tab _tab (`ckd`cat'_m7_blood_pressure') _tab _tab _tab (`ck
> d`cat'_m8_blood_pressure') _tab _tab _tab (`ckd`cat'_m9_blood_pressure') _tab _tab _tab (`ckd`cat'_m10_blood_pressure') _tab _tab _tab (`ckd`cat'_m11_blood_pressure') _tab _tab _tab (`ckd`cat'_m12_blood_pressure') _tab _tab _tab (`ckd`cat'_m1_blood_p
> ressure') _tab _tab _tab (`ckd`cat'_m2_blood_pressure') _tab _tab _tab (`ckd`cat'_m3_blood_pressure') _n
 27. file write tablecontent _tab ("uACR tests") _tab _tab (`ckd`cat'_m4_albuminuria') _tab _tab _tab (`ckd`cat'_m5_albuminuria') _tab _tab _tab (`ckd`cat'_m6_albuminuria') _tab _tab _tab (`ckd`cat'_m7_albuminuria') _tab _tab _tab (`ckd`cat'_m8_albumin
> uria') _tab _tab _tab (`ckd`cat'_m9_albuminuria') _tab _tab _tab (`ckd`cat'_m10_albuminuria') _tab _tab _tab (`ckd`cat'_m11_albuminuria') _tab _tab _tab (`ckd`cat'_m12_albuminuria') _tab _tab _tab (`ckd`cat'_m1_albuminuria') _tab _tab _tab (`ckd`cat'
> _m2_albuminuria') _tab _tab _tab (`ckd`cat'_m3_albuminuria') _n
 28. file write tablecontent _tab ("Creatinine tests") _tab _tab (`ckd`cat'_m4_creatinine') _tab _tab _tab (`ckd`cat'_m5_creatinine') _tab _tab _tab (`ckd`cat'_m6_creatinine') _tab _tab _tab (`ckd`cat'_m7_creatinine') _tab _tab _tab (`ckd`cat'_m8_creat
> inine') _tab _tab _tab (`ckd`cat'_m9_creatinine') _tab _tab _tab (`ckd`cat'_m10_creatinine') _tab _tab _tab (`ckd`cat'_m11_creatinine') _tab _tab _tab (`ckd`cat'_m12_creatinine') _tab _tab _tab (`ckd`cat'_m1_creatinine') _tab _tab _tab (`ckd`cat'_m2_
> creatinine') _tab _tab _tab (`ckd`cat'_m3_creatinine') _n(2)
 29. }
 30. }
  608
  12
invalid syntax
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_fistula_formation m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. }
  9. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`cat'
> _m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') _t
> ab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 17. file write tablecontent _tab ("Hospitalised patients") _tab _tab (`ckd`cat'_m4_admitted_patients') _tab _tab _tab (`ckd`cat'_m5_admitted_patients') _tab _tab _tab (`ckd`cat'_m6_admitted_patients') _tab _tab _tab (`ckd`cat'_m7_admitted_patients') _
> tab _tab _tab (`ckd`cat'_m8_admitted_patients') _tab _tab _tab (`ckd`cat'_m9_admitted_patients') _tab _tab _tab (`ckd`cat'_m10_admitted_patients') _tab _tab _tab (`ckd`cat'_m11_admitted_patients') _tab _tab _tab (`ckd`cat'_m12_admitted_patients') _ta
> b _tab _tab (`ckd`cat'_m1_admitted_patients') _tab _tab _tab (`ckd`cat'_m2_admitted_patients') _tab _tab _tab (`ckd`cat'_m3_admitted_patients') _n
 18. file write tablecontent _tab ("AVF formation") _tab _tab (`ckd`cat'_m4_fistula_formation') _tab _tab _tab (`ckd`cat'_m5_fistula_formation') _tab _tab _tab (`ckd`cat'_m6_fistula_formation') _tab _tab _tab (`ckd`cat'_m7_fistula_formation') _tab _tab
>  _tab (`ckd`cat'_m8_fistula_formation') _tab _tab _tab (`ckd`cat'_m9_fistula_formation') _tab _tab _tab (`ckd`cat'_m10_fistula_formation') _tab _tab _tab (`ckd`cat'_m11_fistula_formation') _tab _tab _tab (`ckd`cat'_m12_fistula_formation') _tab _tab _
> tab (`ckd`cat'_m1_fistula_formation') _tab _tab _tab (`ckd`cat'_m2_fistula_formation') _tab _tab _tab (`ckd`cat'_m3_fistula_formation') _n
 19. file write tablecontent _tab ("PD insertion") _tab _tab (`ckd`cat'_m4_pd_insertion') _tab _tab _tab (`ckd`cat'_m5_pd_insertion') _tab _tab _tab (`ckd`cat'_m6_pd_insertion') _tab _tab _tab (`ckd`cat'_m7_pd_insertion') _tab _tab _tab (`ckd`cat'_m8_p
> d_insertion') _tab _tab _tab (`ckd`cat'_m9_pd_insertion') _tab _tab _tab (`ckd`cat'_m10_pd_insertion') _tab _tab _tab (`ckd`cat'_m11_pd_insertion') _tab _tab _tab (`ckd`cat'_m12_pd_insertion') _tab _tab _tab (`ckd`cat'_m1_pd_insertion') _tab _tab _ta
> b (`ckd`cat'_m2_pd_insertion') _tab _tab _tab (`ckd`cat'_m3_pd_insertion') _n
 20. file write tablecontent _tab ("ICU days") _tab _tab (`ckd`cat'_m4_critical_care_days') _tab _tab _tab (`ckd`cat'_m5_critical_care_days') _tab _tab _tab (`ckd`cat'_m6_critical_care_days') _tab _tab _tab (`ckd`cat'_m7_critical_care_days') _tab _tab 
> _tab (`ckd`cat'_m8_critical_care_days') _tab _tab _tab (`ckd`cat'_m9_critical_care_days') _tab _tab _tab (`ckd`cat'_m10_critical_care_days') _tab _tab _tab (`ckd`cat'_m11_critical_care_days') _tab _tab _tab (`ckd`cat'_m12_critical_care_days') _tab _t
> ab _tab (`ckd`cat'_m1_critical_care_days') _tab _tab _tab (`ckd`cat'_m2_critical_care_days') _tab _tab _tab (`ckd`cat'_m3_critical_care_days') _n
 21. file write tablecontent _tab ("ICU patients") _tab _tab (`ckd`cat'_m4_critical_care_patients') _tab _tab _tab (`ckd`cat'_m5_critical_care_patients') _tab _tab _tab (`ckd`cat'_m6_critical_care_patients') _tab _tab _tab (`ckd`cat'_m7_critical_care_p
> atients') _tab _tab _tab (`ckd`cat'_m8_critical_care_patients') _tab _tab _tab (`ckd`cat'_m9_critical_care_patients') _tab _tab _tab (`ckd`cat'_m10_critical_care_patients') _tab _tab _tab (`ckd`cat'_m11_critical_care_patients') _tab _tab _tab (`ckd`c
> at'_m12_critical_care_patients') _tab _tab _tab (`ckd`cat'_m1_critical_care_patients') _tab _tab _tab (`ckd`cat'_m2_critical_care_patients') _tab _tab _tab (`ckd`cat'_m3_critical_care_patients') _n
 22. file write tablecontent _tab ("ED days") _tab _tab (`ckd`cat'_m4_emergency_days') _tab _tab _tab (`ckd`cat'_m5_emergency_days') _tab _tab _tab (`ckd`cat'_m6_emergency_days') _tab _tab _tab (`ckd`cat'_m7_emergency_days') _tab _tab _tab (`ckd`cat'_m
> 8_emergency_days') _tab _tab _tab (`ckd`cat'_m9_emergency_days') _tab _tab _tab (`ckd`cat'_m10_emergency_days') _tab _tab _tab (`ckd`cat'_m11_emergency_days') _tab _tab _tab (`ckd`cat'_m12_emergency_days') _tab _tab _tab (`ckd`cat'_m1_emergency_days'
> ) _tab _tab _tab (`ckd`cat'_m2_emergency_days') _tab _tab _tab (`ckd`cat'_m3_emergency_days') _n
 23. file write tablecontent _tab ("OPD appts") _tab _tab (`ckd`cat'_m4_op_appts') _tab _tab _tab (`ckd`cat'_m5_op_appts') _tab _tab _tab (`ckd`cat'_m6_op_appts') _tab _tab _tab (`ckd`cat'_m7_op_appts') _tab _tab _tab (`ckd`cat'_m8_op_appts') _tab _tab
>  _tab (`ckd`cat'_m9_op_appts') _tab _tab _tab (`ckd`cat'_m10_op_appts') _tab _tab _tab (`ckd`cat'_m11_op_appts') _tab _tab _tab (`ckd`cat'_m12_op_appts') _tab _tab _tab (`ckd`cat'_m1_op_appts') _tab _tab _tab (`ckd`cat'_m2_op_appts') _tab _tab _tab (
> `ckd`cat'_m3_op_appts') _n
 24. file write tablecontent _tab ("Neph appts") _tab _tab (`ckd`cat'_m4_neph_appts') _tab _tab _tab (`ckd`cat'_m5_neph_appts') _tab _tab _tab (`ckd`cat'_m6_neph_appts') _tab _tab _tab (`ckd`cat'_m7_neph_appts') _tab _tab _tab (`ckd`cat'_m8_neph_appts'
> ) _tab _tab _tab (`ckd`cat'_m9_neph_appts') _tab _tab _tab (`ckd`cat'_m10_neph_appts') _tab _tab _tab (`ckd`cat'_m11_neph_appts') _tab _tab _tab (`ckd`cat'_m12_neph_appts') _tab _tab _tab (`ckd`cat'_m1_neph_appts') _tab _tab _tab (`ckd`cat'_m2_neph_a
> ppts') _tab _tab _tab (`ckd`cat'_m3_neph_appts') _n
 25. file write tablecontent _tab ("Tx appts") _tab _tab (`ckd`cat'_m4_tx_appts') _tab _tab _tab (`ckd`cat'_m5_tx_appts') _tab _tab _tab (`ckd`cat'_m6_tx_appts') _tab _tab _tab (`ckd`cat'_m7_tx_appts') _tab _tab _tab (`ckd`cat'_m8_tx_appts') _tab _tab 
> _tab (`ckd`cat'_m9_tx_appts') _tab _tab _tab (`ckd`cat'_m10_tx_appts') _tab _tab _tab (`ckd`cat'_m11_tx_appts') _tab _tab _tab (`ckd`cat'_m12_tx_appts') _tab _tab _tab (`ckd`cat'_m1_tx_appts') _tab _tab _tab (`ckd`cat'_m2_tx_appts') _tab _tab _tab (`
> ckd`cat'_m3_tx_appts') _n
 26. file write tablecontent _tab ("GP interactions") _tab _tab (`ckd`cat'_m4_gp_interactions') _tab _tab _tab (`ckd`cat'_m5_gp_interactions') _tab _tab _tab (`ckd`cat'_m6_gp_interactions') _tab _tab _tab (`ckd`cat'_m7_gp_interactions') _tab _tab _tab 
> (`ckd`cat'_m8_gp_interactions') _tab _tab _tab (`ckd`cat'_m9_gp_interactions') _tab _tab _tab (`ckd`cat'_m10_gp_interactions') _tab _tab _tab (`ckd`cat'_m11_gp_interactions') _tab _tab _tab (`ckd`cat'_m12_gp_interactions') _tab _tab _tab (`ckd`cat'_m
> 1_gp_interactions') _tab _tab _tab (`ckd`cat'_m2_gp_interactions') _tab _tab _tab (`ckd`cat'_m3_gp_interactions') _n
 27. file write tablecontent _tab ("BP measurements") _tab _tab (`ckd`cat'_m4_blood_pressure') _tab _tab _tab (`ckd`cat'_m5_blood_pressure') _tab _tab _tab (`ckd`cat'_m6_blood_pressure') _tab _tab _tab (`ckd`cat'_m7_blood_pressure') _tab _tab _tab (`ck
> d`cat'_m8_blood_pressure') _tab _tab _tab (`ckd`cat'_m9_blood_pressure') _tab _tab _tab (`ckd`cat'_m10_blood_pressure') _tab _tab _tab (`ckd`cat'_m11_blood_pressure') _tab _tab _tab (`ckd`cat'_m12_blood_pressure') _tab _tab _tab (`ckd`cat'_m1_blood_p
> ressure') _tab _tab _tab (`ckd`cat'_m2_blood_pressure') _tab _tab _tab (`ckd`cat'_m3_blood_pressure') _n
 28. file write tablecontent _tab ("uACR tests") _tab _tab (`ckd`cat'_m4_albuminuria') _tab _tab _tab (`ckd`cat'_m5_albuminuria') _tab _tab _tab (`ckd`cat'_m6_albuminuria') _tab _tab _tab (`ckd`cat'_m7_albuminuria') _tab _tab _tab (`ckd`cat'_m8_albumin
> uria') _tab _tab _tab (`ckd`cat'_m9_albuminuria') _tab _tab _tab (`ckd`cat'_m10_albuminuria') _tab _tab _tab (`ckd`cat'_m11_albuminuria') _tab _tab _tab (`ckd`cat'_m12_albuminuria') _tab _tab _tab (`ckd`cat'_m1_albuminuria') _tab _tab _tab (`ckd`cat'
> _m2_albuminuria') _tab _tab _tab (`ckd`cat'_m3_albuminuria') _n
 29. file write tablecontent _tab ("Creatinine tests") _tab _tab (`ckd`cat'_m4_creatinine') _tab _tab _tab (`ckd`cat'_m5_creatinine') _tab _tab _tab (`ckd`cat'_m6_creatinine') _tab _tab _tab (`ckd`cat'_m7_creatinine') _tab _tab _tab (`ckd`cat'_m8_creat
> inine') _tab _tab _tab (`ckd`cat'_m9_creatinine') _tab _tab _tab (`ckd`cat'_m10_creatinine') _tab _tab _tab (`ckd`cat'_m11_creatinine') _tab _tab _tab (`ckd`cat'_m12_creatinine') _tab _tab _tab (`ckd`cat'_m1_creatinine') _tab _tab _tab (`ckd`cat'_m2_
> creatinine') _tab _tab _tab (`ckd`cat'_m3_creatinine') _n(2)
 30. }
  608
  12
  608
  8
  608
  8
  608
  11
  608
  8
  608
  6
  608
  12
  608
  7
  608

** COUNT <=5 **
  608
  10
  608
  7
  608
  13
  608
  65
  608
  59
  608
  64
  608
  56
  608
  56
  608
  56
  608
  62
  608
  49
  608
  65
  608
  71
  608
  54
  608
  8
  608
  8
  608
  12
  608
  14
  608
  14
  608
  13
  608
  11
  608
  11
  608
  20
  608
  10
  608
  6
  608
  6
  608
  8
  608
  7
  608
  9
  608
  11
  608
  17
  608
  10
  608
  8
  608
  13
  608
  10
  608
  8
  608
  13
  608
  10
  608
  13
  608

** COUNT <=5 **
  608
  15
  608
  8
  608
  9
  608
  13
  608
  9
  608

** COUNT <=5 **
  608
  6
  608
  6
  608
  10
  608
  6
  608
  10
  608
  62
  608
  50
  608
  55
  608
  59
  608
  64
  608
  71
  608
  61
  608
  71
  608
  79
  608
  56
  608
  61
  608
  57
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  11
  608
  11
  608
  10
  608
  8
  608
  7
  608
  8
  608

** COUNT <=5 **
  608
  13
  608
  8
  608
  10
  608
  6
  608
  7
  608
  9
  608
  9
  608
  10
  608
  16
  608
  12
  608
  12
  608
  10
  608
  7
  608
  9
  608
  8
  608
  7
  608
  9
  608
  10
  608

** COUNT <=5 **
  608
  11
  608
  10
  608
  6
  608

** COUNT <=5 **
  608
  17
  608
  9
  608
  16
  608
  8
  608
  9
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  15
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  10
  608
  7
  608
  10
  608
  8
  608
  9
  608
  9
  608

** COUNT <=5 **
  608
  7
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  11
  608
  7
  608
  9
  608

** COUNT <=5 **
  608
  9
  608
  11
  608
  9
  608

** COUNT <=5 **
  608
  180
  608
  179
  608
  184
  608
  177
  608
  167
  608
  184
  608
  185
  608
  183
  608
  176
  608
  182
  608
  181
  608
  192
  608
  33
  608
  36
  608
  31
  608
  32
  608
  36
  608
  35
  608
  25
  608
  26
  608
  24
  608
  28
  608
  37
  608
  34
  608
  120
  608
  137
  608
  124
  608
  97
  608
  118
  608
  113
  608
  110
  608
  126
  608
  109
  608
  126
  608
  117
  608
  117
invalid syntax
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. 
. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_fistula_formation m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. 
. local lab1: label ckd_group 1
  9. local lab2: label ckd_group 2
 10. local lab3: label ckd_group 3
 11. local lab4: label ckd_group 4
 12. local lab5: label ckd_group 5
 13. local lab6: label ckd_group 6
 14. }
 15. }
  608
  12
  608
  8
  608
  8
  608
  11
  608
  8
  608
  6
  608
  12
  608
  7
  608

** COUNT <=5 **
  608
  10
  608
  7
  608
  13
  608
  65
  608
  59
  608
  64
  608
  56
  608
  56
  608
  56
  608
  62
  608
  49
  608
  65
  608
  71
  608
  54
  608
  8
  608
  8
  608
  12
  608
  14
  608
  14
  608
  13
  608
  11
  608
  11
  608
  20
  608
  10
  608
  6
  608
  6
  608
  8
  608
  7
  608
  9
  608
  11
  608
  17
  608
  10
  608
  8
  608
  13
  608
  10
  608
  8
  608
  13
  608
  10
  608
  13
  608

** COUNT <=5 **
  608
  15
  608
  8
  608
  9
  608
  13
  608
  9
  608

** COUNT <=5 **
  608
  6
  608
  6
  608
  10
  608
  6
  608
  10
  608
  62
  608
  50
  608
  55
  608
  59
  608
  64
  608
  71
  608
  61
  608
  71
  608
  79
  608
  56
  608
  61
  608
  57
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  11
  608
  11
  608
  10
  608
  8
  608
  7
  608
  8
  608

** COUNT <=5 **
  608
  13
  608
  8
  608
  10
  608
  6
  608
  7
  608
  9
  608
  9
  608
  10
  608
  16
  608
  12
  608
  12
  608
  10
  608
  7
  608
  9
  608
  8
  608
  7
  608
  9
  608
  10
  608

** COUNT <=5 **
  608
  11
  608
  10
  608
  6
  608

** COUNT <=5 **
  608
  17
  608
  9
  608
  16
  608
  8
  608
  9
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  15
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  10
  608
  7
  608
  10
  608
  8
  608
  9
  608
  9
  608

** COUNT <=5 **
  608
  7
  608

** COUNT <=5 **
  608

** COUNT <=5 **
  608
  11
  608
  7
  608
  9
  608

** COUNT <=5 **
  608
  9
  608
  11
  608
  9
  608

** COUNT <=5 **
  608
  180
  608
  179
  608
  184
  608
  177
  608
  167
  608
  184
  608
  185
  608
  183
  608
  176
  608
  182
  608
  181
  608
  192
  608
  33
  608
  36
  608
  31
  608
  32
  608
  36
  608
  35
  608
  25
  608
  26
  608
  24
  608
  28
  608
  37
  608
  34
  608
  120
  608
  137
  608
  124
  608
  97
  608
  118
  608
  113
  608
  110
  608
  126
  608
  109
  608
  126
  608
  117
  608
  117
  350

** COUNT <=5 **
  350
  6
  350
  7
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  10
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  6
  350
  6
  350
  29
  350
  37
  350
  30
  350
  24
  350
  34
  350
  44
  350
  40
  350
  38
  350
  37
  350
  37
  350
  28
  350
  8
  350
  8
  350
  8
  350
  9
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  15
  350
  8
  350
  7
  350
  7
  350
  6
  350
  8
  350

** COUNT <=5 **
  350
  6
  350
  6
  350
  7
  350

** COUNT <=5 **
  350
  6
  350
  10
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  7
  350
  8
  350
  11
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  6
  350
  6
  350

** COUNT <=5 **
  350
  7
  350

** COUNT <=5 **
  350
  8
  350
  7
  350
  7
  350
  6
  350
  31
  350
  30
  350
  39
  350
  33
  350
  30
  350
  37
  350
  27
  350
  41
  350
  39
  350
  33
  350
  46
  350
  34
  350
  6
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  11
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  8
  350
  8
  350

** COUNT <=5 **
  350
  7
  350

** COUNT <=5 **
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  6
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  7
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  8
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  0
  350

** COUNT <=5 **
  350
  6
  350
  9
  350
  9
  350
  6
  350

** COUNT <=5 **
  350
  9
  350
  6
  350
  7
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350

** COUNT <=5 **
  350
  6
  350
  6
  350
  10
  350
  9
  350
  6
  350
  10
  350
  8
  350

** COUNT <=5 **
  350
  7
  350
  106
  350
  107
  350
  112
  350
  98
  350
  91
  350
  113
  350
  96
  350
  100
  350
  108
  350
  102
  350
  102
  350
  96
  350
  19
  350
  16
  350
  17
  350
  14
  350
  14
  350
  19
  350
  19
  350
  13
  350
  31
  350
  13
  350
  17
  350
  16
  350
  71
  350
  82
  350
  66
  350
  74
  350
  72
  350
  77
  350
  81
  350
  62
  350
  77
  350
  69
  350
  62
  350
  76
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  0
  15
  0
  15
  0
  15
  0
  15

** COUNT <=5 **
  15
  6
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  6
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15
  0
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15
  7
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  15

** COUNT <=5 **
  210
  8
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  6
  210
  6
  210

** COUNT <=5 **
  210
  0
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  18
  210
  21
  210
  14
  210
  26
  210
  20
  210
  18
  210
  12
  210
  19
  210
  18
  210
  26
  210
  26
  210

** COUNT <=5 **
  210
  6
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  0
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  6
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  6
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  8
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  10
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  29
  210
  24
  210
  25
  210
  26
  210
  20
  210
  15
  210
  26
  210
  24
  210
  18
  210
  28
  210
  20
  210
  13
  210
  6
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  0
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  6
  210
  6
  210

** COUNT <=5 **
  210
  6
  210
  6
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  7
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  0
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  6
  210
  7
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  0
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210

** COUNT <=5 **
  210
  7
  210

** COUNT <=5 **
  210
  7
  210

** COUNT <=5 **
  210
  61
  210
  64
  210
  66
  210
  60
  210
  50
  210
  58
  210
  69
  210
  65
  210
  61
  210
  64
  210
  62
  210
  79
  210
  15
  210
  7
  210
  13
  210
  11
  210
  6
  210
  11
  210

** COUNT <=5 **
  210
  12
  210
  9
  210
  14
  210
  15
  210
  9
  210
  43
  210
  36
  210
  34
  210
  46
  210
  39
  210
  41
  210
  45
  210
  32
  210
  46
  210
  53
  210
  38
  210
  44
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  6
  176
  17
  176
  16
  176
  21
  176
  19
  176
  19
  176
  22
  176
  23
  176
  16
  176
  15
  176
  16
  176
  9
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  7
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176
  6
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176
  7
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  18
  176
  17
  176
  17
  176
  22
  176
  22
  176
  21
  176
  20
  176
  13
  176
  14
  176
  22
  176
  19
  176
  18
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  6
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  6
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  7
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176

** COUNT <=5 **
  176
  6
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176
  0
  176

** COUNT <=5 **
  176
  64
  176
  47
  176
  64
  176
  56
  176
  49
  176
  53
  176
  51
  176
  59
  176
  52
  176
  49
  176
  63
  176
  60
  176
  8
  176
  8
  176
  10
  176
  9
  176
  9
  176
  8
  176
  7
  176
  7
  176
  7
  176
  12
  176
  8
  176
  8
  176
  37
  176
  34
  176
  33
  176
  36
  176
  47
  176
  35
  176
  28
  176
  31
  176
  32
  176
  42
  176
  32
  176
  34
  34
  0
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  6
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  8
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  6
  34

** COUNT <=5 **
  34
  7
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34
  0
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34
  0
  34
  0
  34
  8
  34
  9
  34
  9
  34
  10
  34
  13
  34
  12
  34
  13
  34
  7
  34
  9
  34
  8
  34
  7
  34
  11
  34

** COUNT <=5 **
  34
  0
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  0
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  7
  34

** COUNT <=5 **
  34

** COUNT <=5 **
  34
  8
  34
  9
  34
  8
  34

** COUNT <=5 **
  34
  9
  34
  8

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_admitted_patients m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. 
. qui safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. }
  9. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`cat'
> _m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') _t
> ab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 17. file write tablecontent _tab ("Hospitalised patients") _tab _tab (`ckd`cat'_m4_admitted_patients') _tab _tab _tab (`ckd`cat'_m5_admitted_patients') _tab _tab _tab (`ckd`cat'_m6_admitted_patients') _tab _tab _tab (`ckd`cat'_m7_admitted_patients') _
> tab _tab _tab (`ckd`cat'_m8_admitted_patients') _tab _tab _tab (`ckd`cat'_m9_admitted_patients') _tab _tab _tab (`ckd`cat'_m10_admitted_patients') _tab _tab _tab (`ckd`cat'_m11_admitted_patients') _tab _tab _tab (`ckd`cat'_m12_admitted_patients') _ta
> b _tab _tab (`ckd`cat'_m1_admitted_patients') _tab _tab _tab (`ckd`cat'_m2_admitted_patients') _tab _tab _tab (`ckd`cat'_m3_admitted_patients') _n
 18. file write tablecontent _tab ("AVF formation") _tab _tab (`ckd`cat'_m4_fistula_formation') _tab _tab _tab (`ckd`cat'_m5_fistula_formation') _tab _tab _tab (`ckd`cat'_m6_fistula_formation') _tab _tab _tab (`ckd`cat'_m7_fistula_formation') _tab _tab
>  _tab (`ckd`cat'_m8_fistula_formation') _tab _tab _tab (`ckd`cat'_m9_fistula_formation') _tab _tab _tab (`ckd`cat'_m10_fistula_formation') _tab _tab _tab (`ckd`cat'_m11_fistula_formation') _tab _tab _tab (`ckd`cat'_m12_fistula_formation') _tab _tab _
> tab (`ckd`cat'_m1_fistula_formation') _tab _tab _tab (`ckd`cat'_m2_fistula_formation') _tab _tab _tab (`ckd`cat'_m3_fistula_formation') _n
 19. file write tablecontent _tab ("PD insertion") _tab _tab (`ckd`cat'_m4_pd_insertion') _tab _tab _tab (`ckd`cat'_m5_pd_insertion') _tab _tab _tab (`ckd`cat'_m6_pd_insertion') _tab _tab _tab (`ckd`cat'_m7_pd_insertion') _tab _tab _tab (`ckd`cat'_m8_p
> d_insertion') _tab _tab _tab (`ckd`cat'_m9_pd_insertion') _tab _tab _tab (`ckd`cat'_m10_pd_insertion') _tab _tab _tab (`ckd`cat'_m11_pd_insertion') _tab _tab _tab (`ckd`cat'_m12_pd_insertion') _tab _tab _tab (`ckd`cat'_m1_pd_insertion') _tab _tab _ta
> b (`ckd`cat'_m2_pd_insertion') _tab _tab _tab (`ckd`cat'_m3_pd_insertion') _n
 20. file write tablecontent _tab ("ICU days") _tab _tab (`ckd`cat'_m4_critical_care_days') _tab _tab _tab (`ckd`cat'_m5_critical_care_days') _tab _tab _tab (`ckd`cat'_m6_critical_care_days') _tab _tab _tab (`ckd`cat'_m7_critical_care_days') _tab _tab 
> _tab (`ckd`cat'_m8_critical_care_days') _tab _tab _tab (`ckd`cat'_m9_critical_care_days') _tab _tab _tab (`ckd`cat'_m10_critical_care_days') _tab _tab _tab (`ckd`cat'_m11_critical_care_days') _tab _tab _tab (`ckd`cat'_m12_critical_care_days') _tab _t
> ab _tab (`ckd`cat'_m1_critical_care_days') _tab _tab _tab (`ckd`cat'_m2_critical_care_days') _tab _tab _tab (`ckd`cat'_m3_critical_care_days') _n
 21. file write tablecontent _tab ("ICU patients") _tab _tab (`ckd`cat'_m4_critical_care_patients') _tab _tab _tab (`ckd`cat'_m5_critical_care_patients') _tab _tab _tab (`ckd`cat'_m6_critical_care_patients') _tab _tab _tab (`ckd`cat'_m7_critical_care_p
> atients') _tab _tab _tab (`ckd`cat'_m8_critical_care_patients') _tab _tab _tab (`ckd`cat'_m9_critical_care_patients') _tab _tab _tab (`ckd`cat'_m10_critical_care_patients') _tab _tab _tab (`ckd`cat'_m11_critical_care_patients') _tab _tab _tab (`ckd`c
> at'_m12_critical_care_patients') _tab _tab _tab (`ckd`cat'_m1_critical_care_patients') _tab _tab _tab (`ckd`cat'_m2_critical_care_patients') _tab _tab _tab (`ckd`cat'_m3_critical_care_patients') _n
 22. file write tablecontent _tab ("ED days") _tab _tab (`ckd`cat'_m4_emergency_days') _tab _tab _tab (`ckd`cat'_m5_emergency_days') _tab _tab _tab (`ckd`cat'_m6_emergency_days') _tab _tab _tab (`ckd`cat'_m7_emergency_days') _tab _tab _tab (`ckd`cat'_m
> 8_emergency_days') _tab _tab _tab (`ckd`cat'_m9_emergency_days') _tab _tab _tab (`ckd`cat'_m10_emergency_days') _tab _tab _tab (`ckd`cat'_m11_emergency_days') _tab _tab _tab (`ckd`cat'_m12_emergency_days') _tab _tab _tab (`ckd`cat'_m1_emergency_days'
> ) _tab _tab _tab (`ckd`cat'_m2_emergency_days') _tab _tab _tab (`ckd`cat'_m3_emergency_days') _n
 23. file write tablecontent _tab ("OPD appts") _tab _tab (`ckd`cat'_m4_op_appts') _tab _tab _tab (`ckd`cat'_m5_op_appts') _tab _tab _tab (`ckd`cat'_m6_op_appts') _tab _tab _tab (`ckd`cat'_m7_op_appts') _tab _tab _tab (`ckd`cat'_m8_op_appts') _tab _tab
>  _tab (`ckd`cat'_m9_op_appts') _tab _tab _tab (`ckd`cat'_m10_op_appts') _tab _tab _tab (`ckd`cat'_m11_op_appts') _tab _tab _tab (`ckd`cat'_m12_op_appts') _tab _tab _tab (`ckd`cat'_m1_op_appts') _tab _tab _tab (`ckd`cat'_m2_op_appts') _tab _tab _tab (
> `ckd`cat'_m3_op_appts') _n
 24. file write tablecontent _tab ("Neph appts") _tab _tab (`ckd`cat'_m4_neph_appts') _tab _tab _tab (`ckd`cat'_m5_neph_appts') _tab _tab _tab (`ckd`cat'_m6_neph_appts') _tab _tab _tab (`ckd`cat'_m7_neph_appts') _tab _tab _tab (`ckd`cat'_m8_neph_appts'
> ) _tab _tab _tab (`ckd`cat'_m9_neph_appts') _tab _tab _tab (`ckd`cat'_m10_neph_appts') _tab _tab _tab (`ckd`cat'_m11_neph_appts') _tab _tab _tab (`ckd`cat'_m12_neph_appts') _tab _tab _tab (`ckd`cat'_m1_neph_appts') _tab _tab _tab (`ckd`cat'_m2_neph_a
> ppts') _tab _tab _tab (`ckd`cat'_m3_neph_appts') _n
 25. file write tablecontent _tab ("Tx appts") _tab _tab (`ckd`cat'_m4_tx_appts') _tab _tab _tab (`ckd`cat'_m5_tx_appts') _tab _tab _tab (`ckd`cat'_m6_tx_appts') _tab _tab _tab (`ckd`cat'_m7_tx_appts') _tab _tab _tab (`ckd`cat'_m8_tx_appts') _tab _tab 
> _tab (`ckd`cat'_m9_tx_appts') _tab _tab _tab (`ckd`cat'_m10_tx_appts') _tab _tab _tab (`ckd`cat'_m11_tx_appts') _tab _tab _tab (`ckd`cat'_m12_tx_appts') _tab _tab _tab (`ckd`cat'_m1_tx_appts') _tab _tab _tab (`ckd`cat'_m2_tx_appts') _tab _tab _tab (`
> ckd`cat'_m3_tx_appts') _n
 26. file write tablecontent _tab ("GP interactions") _tab _tab (`ckd`cat'_m4_gp_interactions') _tab _tab _tab (`ckd`cat'_m5_gp_interactions') _tab _tab _tab (`ckd`cat'_m6_gp_interactions') _tab _tab _tab (`ckd`cat'_m7_gp_interactions') _tab _tab _tab 
> (`ckd`cat'_m8_gp_interactions') _tab _tab _tab (`ckd`cat'_m9_gp_interactions') _tab _tab _tab (`ckd`cat'_m10_gp_interactions') _tab _tab _tab (`ckd`cat'_m11_gp_interactions') _tab _tab _tab (`ckd`cat'_m12_gp_interactions') _tab _tab _tab (`ckd`cat'_m
> 1_gp_interactions') _tab _tab _tab (`ckd`cat'_m2_gp_interactions') _tab _tab _tab (`ckd`cat'_m3_gp_interactions') _n
 27. file write tablecontent _tab ("BP measurements") _tab _tab (`ckd`cat'_m4_blood_pressure') _tab _tab _tab (`ckd`cat'_m5_blood_pressure') _tab _tab _tab (`ckd`cat'_m6_blood_pressure') _tab _tab _tab (`ckd`cat'_m7_blood_pressure') _tab _tab _tab (`ck
> d`cat'_m8_blood_pressure') _tab _tab _tab (`ckd`cat'_m9_blood_pressure') _tab _tab _tab (`ckd`cat'_m10_blood_pressure') _tab _tab _tab (`ckd`cat'_m11_blood_pressure') _tab _tab _tab (`ckd`cat'_m12_blood_pressure') _tab _tab _tab (`ckd`cat'_m1_blood_p
> ressure') _tab _tab _tab (`ckd`cat'_m2_blood_pressure') _tab _tab _tab (`ckd`cat'_m3_blood_pressure') _n
 28. file write tablecontent _tab ("uACR tests") _tab _tab (`ckd`cat'_m4_albuminuria') _tab _tab _tab (`ckd`cat'_m5_albuminuria') _tab _tab _tab (`ckd`cat'_m6_albuminuria') _tab _tab _tab (`ckd`cat'_m7_albuminuria') _tab _tab _tab (`ckd`cat'_m8_albumin
> uria') _tab _tab _tab (`ckd`cat'_m9_albuminuria') _tab _tab _tab (`ckd`cat'_m10_albuminuria') _tab _tab _tab (`ckd`cat'_m11_albuminuria') _tab _tab _tab (`ckd`cat'_m12_albuminuria') _tab _tab _tab (`ckd`cat'_m1_albuminuria') _tab _tab _tab (`ckd`cat'
> _m2_albuminuria') _tab _tab _tab (`ckd`cat'_m3_albuminuria') _n
 29. file write tablecontent _tab ("Creatinine tests") _tab _tab (`ckd`cat'_m4_creatinine') _tab _tab _tab (`ckd`cat'_m5_creatinine') _tab _tab _tab (`ckd`cat'_m6_creatinine') _tab _tab _tab (`ckd`cat'_m7_creatinine') _tab _tab _tab (`ckd`cat'_m8_creat
> inine') _tab _tab _tab (`ckd`cat'_m9_creatinine') _tab _tab _tab (`ckd`cat'_m10_creatinine') _tab _tab _tab (`ckd`cat'_m11_creatinine') _tab _tab _tab (`ckd`cat'_m12_creatinine') _tab _tab _tab (`ckd`cat'_m1_creatinine') _tab _tab _tab (`ckd`cat'_m2_
> creatinine') _tab _tab _tab (`ckd`cat'_m3_creatinine') _n(2)
 30. }

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Column headings
. *There are three column headings for each year 2017-2022:
. *Column 1 = the number of people in each CKD group as of the beginning of each year (i.e. in April)
. *Column 2 = the number of people who remain within the same CKD group, progress to a more advanced CKD group, or die by the end of the year (i.e. by the subsequent April)
. *Column 3 = Column 2 as a percentage of Column 1
. file write tablecontent _tab _tab ("`dataset'_N") _tab ("April_N") _tab ("April_pc") _tab ("May_N") _tab ("May_pc") _tab ("June_N") _tab ("June_pc") _tab ("July_N") _tab ("July_pc") _tab ("August_N") _tab ("August_pc") _tab ("September_N") _tab ("Sep
> tember_pc") _tab ("October_N") _tab ("October_pc") _tab ("November_N") _tab ("November_pc") _tab ("December_N") _tab ("December_pc") _tab ("January_N") _tab ("January_pc") _tab ("February_N") _tab ("February_pc") _tab ("March_N") _tab ("March_pc") _n
> (2)

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. 
. **Disclosure minimisation
. *safecount provides a count with any counts <=5 returned at "<=5"
. *round(r(N),5) rounds counts to the nearest 5 with any counts <=5 returned as "."
. 
. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_admitted_patients m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. 
. qui safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. }
  9. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`cat'
> _m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') _t
> ab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 17. file write tablecontent _tab ("Hospitalised patients") _tab _tab (`ckd`cat'_m4_admitted_patients') _tab _tab _tab (`ckd`cat'_m5_admitted_patients') _tab _tab _tab (`ckd`cat'_m6_admitted_patients') _tab _tab _tab (`ckd`cat'_m7_admitted_patients') _
> tab _tab _tab (`ckd`cat'_m8_admitted_patients') _tab _tab _tab (`ckd`cat'_m9_admitted_patients') _tab _tab _tab (`ckd`cat'_m10_admitted_patients') _tab _tab _tab (`ckd`cat'_m11_admitted_patients') _tab _tab _tab (`ckd`cat'_m12_admitted_patients') _ta
> b _tab _tab (`ckd`cat'_m1_admitted_patients') _tab _tab _tab (`ckd`cat'_m2_admitted_patients') _tab _tab _tab (`ckd`cat'_m3_admitted_patients') _n
 18. file write tablecontent _tab ("AVF formation") _tab _tab (`ckd`cat'_m4_fistula_formation') _tab _tab _tab (`ckd`cat'_m5_fistula_formation') _tab _tab _tab (`ckd`cat'_m6_fistula_formation') _tab _tab _tab (`ckd`cat'_m7_fistula_formation') _tab _tab
>  _tab (`ckd`cat'_m8_fistula_formation') _tab _tab _tab (`ckd`cat'_m9_fistula_formation') _tab _tab _tab (`ckd`cat'_m10_fistula_formation') _tab _tab _tab (`ckd`cat'_m11_fistula_formation') _tab _tab _tab (`ckd`cat'_m12_fistula_formation') _tab _tab _
> tab (`ckd`cat'_m1_fistula_formation') _tab _tab _tab (`ckd`cat'_m2_fistula_formation') _tab _tab _tab (`ckd`cat'_m3_fistula_formation') _n
 19. file write tablecontent _tab ("PD insertion") _tab _tab (`ckd`cat'_m4_pd_insertion') _tab _tab _tab (`ckd`cat'_m5_pd_insertion') _tab _tab _tab (`ckd`cat'_m6_pd_insertion') _tab _tab _tab (`ckd`cat'_m7_pd_insertion') _tab _tab _tab (`ckd`cat'_m8_p
> d_insertion') _tab _tab _tab (`ckd`cat'_m9_pd_insertion') _tab _tab _tab (`ckd`cat'_m10_pd_insertion') _tab _tab _tab (`ckd`cat'_m11_pd_insertion') _tab _tab _tab (`ckd`cat'_m12_pd_insertion') _tab _tab _tab (`ckd`cat'_m1_pd_insertion') _tab _tab _ta
> b (`ckd`cat'_m2_pd_insertion') _tab _tab _tab (`ckd`cat'_m3_pd_insertion') _n
 20. file write tablecontent _tab ("ICU days") _tab _tab (`ckd`cat'_m4_critical_care_days') _tab _tab _tab (`ckd`cat'_m5_critical_care_days') _tab _tab _tab (`ckd`cat'_m6_critical_care_days') _tab _tab _tab (`ckd`cat'_m7_critical_care_days') _tab _tab 
> _tab (`ckd`cat'_m8_critical_care_days') _tab _tab _tab (`ckd`cat'_m9_critical_care_days') _tab _tab _tab (`ckd`cat'_m10_critical_care_days') _tab _tab _tab (`ckd`cat'_m11_critical_care_days') _tab _tab _tab (`ckd`cat'_m12_critical_care_days') _tab _t
> ab _tab (`ckd`cat'_m1_critical_care_days') _tab _tab _tab (`ckd`cat'_m2_critical_care_days') _tab _tab _tab (`ckd`cat'_m3_critical_care_days') _n
 21. file write tablecontent _tab ("ICU patients") _tab _tab (`ckd`cat'_m4_critical_care_patients') _tab _tab _tab (`ckd`cat'_m5_critical_care_patients') _tab _tab _tab (`ckd`cat'_m6_critical_care_patients') _tab _tab _tab (`ckd`cat'_m7_critical_care_p
> atients') _tab _tab _tab (`ckd`cat'_m8_critical_care_patients') _tab _tab _tab (`ckd`cat'_m9_critical_care_patients') _tab _tab _tab (`ckd`cat'_m10_critical_care_patients') _tab _tab _tab (`ckd`cat'_m11_critical_care_patients') _tab _tab _tab (`ckd`c
> at'_m12_critical_care_patients') _tab _tab _tab (`ckd`cat'_m1_critical_care_patients') _tab _tab _tab (`ckd`cat'_m2_critical_care_patients') _tab _tab _tab (`ckd`cat'_m3_critical_care_patients') _n
 22. file write tablecontent _tab ("ED days") _tab _tab (`ckd`cat'_m4_emergency_days') _tab _tab _tab (`ckd`cat'_m5_emergency_days') _tab _tab _tab (`ckd`cat'_m6_emergency_days') _tab _tab _tab (`ckd`cat'_m7_emergency_days') _tab _tab _tab (`ckd`cat'_m
> 8_emergency_days') _tab _tab _tab (`ckd`cat'_m9_emergency_days') _tab _tab _tab (`ckd`cat'_m10_emergency_days') _tab _tab _tab (`ckd`cat'_m11_emergency_days') _tab _tab _tab (`ckd`cat'_m12_emergency_days') _tab _tab _tab (`ckd`cat'_m1_emergency_days'
> ) _tab _tab _tab (`ckd`cat'_m2_emergency_days') _tab _tab _tab (`ckd`cat'_m3_emergency_days') _n
 23. file write tablecontent _tab ("OPD appts") _tab _tab (`ckd`cat'_m4_op_appts') _tab _tab _tab (`ckd`cat'_m5_op_appts') _tab _tab _tab (`ckd`cat'_m6_op_appts') _tab _tab _tab (`ckd`cat'_m7_op_appts') _tab _tab _tab (`ckd`cat'_m8_op_appts') _tab _tab
>  _tab (`ckd`cat'_m9_op_appts') _tab _tab _tab (`ckd`cat'_m10_op_appts') _tab _tab _tab (`ckd`cat'_m11_op_appts') _tab _tab _tab (`ckd`cat'_m12_op_appts') _tab _tab _tab (`ckd`cat'_m1_op_appts') _tab _tab _tab (`ckd`cat'_m2_op_appts') _tab _tab _tab (
> `ckd`cat'_m3_op_appts') _n
 24. file write tablecontent _tab ("Neph appts") _tab _tab (`ckd`cat'_m4_neph_appts') _tab _tab _tab (`ckd`cat'_m5_neph_appts') _tab _tab _tab (`ckd`cat'_m6_neph_appts') _tab _tab _tab (`ckd`cat'_m7_neph_appts') _tab _tab _tab (`ckd`cat'_m8_neph_appts'
> ) _tab _tab _tab (`ckd`cat'_m9_neph_appts') _tab _tab _tab (`ckd`cat'_m10_neph_appts') _tab _tab _tab (`ckd`cat'_m11_neph_appts') _tab _tab _tab (`ckd`cat'_m12_neph_appts') _tab _tab _tab (`ckd`cat'_m1_neph_appts') _tab _tab _tab (`ckd`cat'_m2_neph_a
> ppts') _tab _tab _tab (`ckd`cat'_m3_neph_appts') _n
 25. file write tablecontent _tab ("Tx appts") _tab _tab (`ckd`cat'_m4_tx_appts') _tab _tab _tab (`ckd`cat'_m5_tx_appts') _tab _tab _tab (`ckd`cat'_m6_tx_appts') _tab _tab _tab (`ckd`cat'_m7_tx_appts') _tab _tab _tab (`ckd`cat'_m8_tx_appts') _tab _tab 
> _tab (`ckd`cat'_m9_tx_appts') _tab _tab _tab (`ckd`cat'_m10_tx_appts') _tab _tab _tab (`ckd`cat'_m11_tx_appts') _tab _tab _tab (`ckd`cat'_m12_tx_appts') _tab _tab _tab (`ckd`cat'_m1_tx_appts') _tab _tab _tab (`ckd`cat'_m2_tx_appts') _tab _tab _tab (`
> ckd`cat'_m3_tx_appts') _n
 26. file write tablecontent _tab ("GP interactions") _tab _tab (`ckd`cat'_m4_gp_interactions') _tab _tab _tab (`ckd`cat'_m5_gp_interactions') _tab _tab _tab (`ckd`cat'_m6_gp_interactions') _tab _tab _tab (`ckd`cat'_m7_gp_interactions') _tab _tab _tab 
> (`ckd`cat'_m8_gp_interactions') _tab _tab _tab (`ckd`cat'_m9_gp_interactions') _tab _tab _tab (`ckd`cat'_m10_gp_interactions') _tab _tab _tab (`ckd`cat'_m11_gp_interactions') _tab _tab _tab (`ckd`cat'_m12_gp_interactions') _tab _tab _tab (`ckd`cat'_m
> 1_gp_interactions') _tab _tab _tab (`ckd`cat'_m2_gp_interactions') _tab _tab _tab (`ckd`cat'_m3_gp_interactions') _n
 27. file write tablecontent _tab ("BP measurements") _tab _tab (`ckd`cat'_m4_blood_pressure') _tab _tab _tab (`ckd`cat'_m5_blood_pressure') _tab _tab _tab (`ckd`cat'_m6_blood_pressure') _tab _tab _tab (`ckd`cat'_m7_blood_pressure') _tab _tab _tab (`ck
> d`cat'_m8_blood_pressure') _tab _tab _tab (`ckd`cat'_m9_blood_pressure') _tab _tab _tab (`ckd`cat'_m10_blood_pressure') _tab _tab _tab (`ckd`cat'_m11_blood_pressure') _tab _tab _tab (`ckd`cat'_m12_blood_pressure') _tab _tab _tab (`ckd`cat'_m1_blood_p
> ressure') _tab _tab _tab (`ckd`cat'_m2_blood_pressure') _tab _tab _tab (`ckd`cat'_m3_blood_pressure') _n
 28. file write tablecontent _tab ("uACR tests") _tab _tab (`ckd`cat'_m4_albuminuria') _tab _tab _tab (`ckd`cat'_m5_albuminuria') _tab _tab _tab (`ckd`cat'_m6_albuminuria') _tab _tab _tab (`ckd`cat'_m7_albuminuria') _tab _tab _tab (`ckd`cat'_m8_albumin
> uria') _tab _tab _tab (`ckd`cat'_m9_albuminuria') _tab _tab _tab (`ckd`cat'_m10_albuminuria') _tab _tab _tab (`ckd`cat'_m11_albuminuria') _tab _tab _tab (`ckd`cat'_m12_albuminuria') _tab _tab _tab (`ckd`cat'_m1_albuminuria') _tab _tab _tab (`ckd`cat'
> _m2_albuminuria') _tab _tab _tab (`ckd`cat'_m3_albuminuria') _n
 29. file write tablecontent _tab ("Creatinine tests") _tab _tab (`ckd`cat'_m4_creatinine') _tab _tab _tab (`ckd`cat'_m5_creatinine') _tab _tab _tab (`ckd`cat'_m6_creatinine') _tab _tab _tab (`ckd`cat'_m7_creatinine') _tab _tab _tab (`ckd`cat'_m8_creat
> inine') _tab _tab _tab (`ckd`cat'_m9_creatinine') _tab _tab _tab (`ckd`cat'_m10_creatinine') _tab _tab _tab (`ckd`cat'_m11_creatinine') _tab _tab _tab (`ckd`cat'_m12_creatinine') _tab _tab _tab (`ckd`cat'_m1_creatinine') _tab _tab _tab (`ckd`cat'_m2_
> creatinine') _tab _tab _tab (`ckd`cat'_m3_creatinine') _n(2)
 30. }

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace
file handle tablecontent already exists
r(110);

end of do-file

r(110);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Column headings
. *Measures of each outcome by month
. file write tablecontent _tab _tab ("`dataset'") _tab ("April") _tab ("May") _tab ("June") _tab ("July") _tab ("August") _tab ("September") _tab ("October") _tab ("November") _tab ("December") _tab ("January") _tab ("February") _tab ("March") _tab _n(
> 2)

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Disclosure minimisation
. *safecount provides a count with any counts <=5 returned at "<=5"
. *round(r(N),5) rounds counts to the nearest 5 with any counts <=5 returned as "."
. 
. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_admitted_patients m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. 
. qui safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. }
  9. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`cat'
> _m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') _t
> ab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 17. file write tablecontent _tab ("Hospitalised patients") _tab _tab (`ckd`cat'_m4_admitted_patients') _tab _tab _tab (`ckd`cat'_m5_admitted_patients') _tab _tab _tab (`ckd`cat'_m6_admitted_patients') _tab _tab _tab (`ckd`cat'_m7_admitted_patients') _
> tab _tab _tab (`ckd`cat'_m8_admitted_patients') _tab _tab _tab (`ckd`cat'_m9_admitted_patients') _tab _tab _tab (`ckd`cat'_m10_admitted_patients') _tab _tab _tab (`ckd`cat'_m11_admitted_patients') _tab _tab _tab (`ckd`cat'_m12_admitted_patients') _ta
> b _tab _tab (`ckd`cat'_m1_admitted_patients') _tab _tab _tab (`ckd`cat'_m2_admitted_patients') _tab _tab _tab (`ckd`cat'_m3_admitted_patients') _n
 18. file write tablecontent _tab ("AVF formation") _tab _tab (`ckd`cat'_m4_fistula_formation') _tab _tab _tab (`ckd`cat'_m5_fistula_formation') _tab _tab _tab (`ckd`cat'_m6_fistula_formation') _tab _tab _tab (`ckd`cat'_m7_fistula_formation') _tab _tab
>  _tab (`ckd`cat'_m8_fistula_formation') _tab _tab _tab (`ckd`cat'_m9_fistula_formation') _tab _tab _tab (`ckd`cat'_m10_fistula_formation') _tab _tab _tab (`ckd`cat'_m11_fistula_formation') _tab _tab _tab (`ckd`cat'_m12_fistula_formation') _tab _tab _
> tab (`ckd`cat'_m1_fistula_formation') _tab _tab _tab (`ckd`cat'_m2_fistula_formation') _tab _tab _tab (`ckd`cat'_m3_fistula_formation') _n
 19. file write tablecontent _tab ("PD insertion") _tab _tab (`ckd`cat'_m4_pd_insertion') _tab _tab _tab (`ckd`cat'_m5_pd_insertion') _tab _tab _tab (`ckd`cat'_m6_pd_insertion') _tab _tab _tab (`ckd`cat'_m7_pd_insertion') _tab _tab _tab (`ckd`cat'_m8_p
> d_insertion') _tab _tab _tab (`ckd`cat'_m9_pd_insertion') _tab _tab _tab (`ckd`cat'_m10_pd_insertion') _tab _tab _tab (`ckd`cat'_m11_pd_insertion') _tab _tab _tab (`ckd`cat'_m12_pd_insertion') _tab _tab _tab (`ckd`cat'_m1_pd_insertion') _tab _tab _ta
> b (`ckd`cat'_m2_pd_insertion') _tab _tab _tab (`ckd`cat'_m3_pd_insertion') _n
 20. file write tablecontent _tab ("ICU days") _tab _tab (`ckd`cat'_m4_critical_care_days') _tab _tab _tab (`ckd`cat'_m5_critical_care_days') _tab _tab _tab (`ckd`cat'_m6_critical_care_days') _tab _tab _tab (`ckd`cat'_m7_critical_care_days') _tab _tab 
> _tab (`ckd`cat'_m8_critical_care_days') _tab _tab _tab (`ckd`cat'_m9_critical_care_days') _tab _tab _tab (`ckd`cat'_m10_critical_care_days') _tab _tab _tab (`ckd`cat'_m11_critical_care_days') _tab _tab _tab (`ckd`cat'_m12_critical_care_days') _tab _t
> ab _tab (`ckd`cat'_m1_critical_care_days') _tab _tab _tab (`ckd`cat'_m2_critical_care_days') _tab _tab _tab (`ckd`cat'_m3_critical_care_days') _n
 21. file write tablecontent _tab ("ICU patients") _tab _tab (`ckd`cat'_m4_critical_care_patients') _tab _tab _tab (`ckd`cat'_m5_critical_care_patients') _tab _tab _tab (`ckd`cat'_m6_critical_care_patients') _tab _tab _tab (`ckd`cat'_m7_critical_care_p
> atients') _tab _tab _tab (`ckd`cat'_m8_critical_care_patients') _tab _tab _tab (`ckd`cat'_m9_critical_care_patients') _tab _tab _tab (`ckd`cat'_m10_critical_care_patients') _tab _tab _tab (`ckd`cat'_m11_critical_care_patients') _tab _tab _tab (`ckd`c
> at'_m12_critical_care_patients') _tab _tab _tab (`ckd`cat'_m1_critical_care_patients') _tab _tab _tab (`ckd`cat'_m2_critical_care_patients') _tab _tab _tab (`ckd`cat'_m3_critical_care_patients') _n
 22. file write tablecontent _tab ("ED days") _tab _tab (`ckd`cat'_m4_emergency_days') _tab _tab _tab (`ckd`cat'_m5_emergency_days') _tab _tab _tab (`ckd`cat'_m6_emergency_days') _tab _tab _tab (`ckd`cat'_m7_emergency_days') _tab _tab _tab (`ckd`cat'_m
> 8_emergency_days') _tab _tab _tab (`ckd`cat'_m9_emergency_days') _tab _tab _tab (`ckd`cat'_m10_emergency_days') _tab _tab _tab (`ckd`cat'_m11_emergency_days') _tab _tab _tab (`ckd`cat'_m12_emergency_days') _tab _tab _tab (`ckd`cat'_m1_emergency_days'
> ) _tab _tab _tab (`ckd`cat'_m2_emergency_days') _tab _tab _tab (`ckd`cat'_m3_emergency_days') _n
 23. file write tablecontent _tab ("OPD appts") _tab _tab (`ckd`cat'_m4_op_appts') _tab _tab _tab (`ckd`cat'_m5_op_appts') _tab _tab _tab (`ckd`cat'_m6_op_appts') _tab _tab _tab (`ckd`cat'_m7_op_appts') _tab _tab _tab (`ckd`cat'_m8_op_appts') _tab _tab
>  _tab (`ckd`cat'_m9_op_appts') _tab _tab _tab (`ckd`cat'_m10_op_appts') _tab _tab _tab (`ckd`cat'_m11_op_appts') _tab _tab _tab (`ckd`cat'_m12_op_appts') _tab _tab _tab (`ckd`cat'_m1_op_appts') _tab _tab _tab (`ckd`cat'_m2_op_appts') _tab _tab _tab (
> `ckd`cat'_m3_op_appts') _n
 24. file write tablecontent _tab ("Neph appts") _tab _tab (`ckd`cat'_m4_neph_appts') _tab _tab _tab (`ckd`cat'_m5_neph_appts') _tab _tab _tab (`ckd`cat'_m6_neph_appts') _tab _tab _tab (`ckd`cat'_m7_neph_appts') _tab _tab _tab (`ckd`cat'_m8_neph_appts'
> ) _tab _tab _tab (`ckd`cat'_m9_neph_appts') _tab _tab _tab (`ckd`cat'_m10_neph_appts') _tab _tab _tab (`ckd`cat'_m11_neph_appts') _tab _tab _tab (`ckd`cat'_m12_neph_appts') _tab _tab _tab (`ckd`cat'_m1_neph_appts') _tab _tab _tab (`ckd`cat'_m2_neph_a
> ppts') _tab _tab _tab (`ckd`cat'_m3_neph_appts') _n
 25. file write tablecontent _tab ("Tx appts") _tab _tab (`ckd`cat'_m4_tx_appts') _tab _tab _tab (`ckd`cat'_m5_tx_appts') _tab _tab _tab (`ckd`cat'_m6_tx_appts') _tab _tab _tab (`ckd`cat'_m7_tx_appts') _tab _tab _tab (`ckd`cat'_m8_tx_appts') _tab _tab 
> _tab (`ckd`cat'_m9_tx_appts') _tab _tab _tab (`ckd`cat'_m10_tx_appts') _tab _tab _tab (`ckd`cat'_m11_tx_appts') _tab _tab _tab (`ckd`cat'_m12_tx_appts') _tab _tab _tab (`ckd`cat'_m1_tx_appts') _tab _tab _tab (`ckd`cat'_m2_tx_appts') _tab _tab _tab (`
> ckd`cat'_m3_tx_appts') _n
 26. file write tablecontent _tab ("GP interactions") _tab _tab (`ckd`cat'_m4_gp_interactions') _tab _tab _tab (`ckd`cat'_m5_gp_interactions') _tab _tab _tab (`ckd`cat'_m6_gp_interactions') _tab _tab _tab (`ckd`cat'_m7_gp_interactions') _tab _tab _tab 
> (`ckd`cat'_m8_gp_interactions') _tab _tab _tab (`ckd`cat'_m9_gp_interactions') _tab _tab _tab (`ckd`cat'_m10_gp_interactions') _tab _tab _tab (`ckd`cat'_m11_gp_interactions') _tab _tab _tab (`ckd`cat'_m12_gp_interactions') _tab _tab _tab (`ckd`cat'_m
> 1_gp_interactions') _tab _tab _tab (`ckd`cat'_m2_gp_interactions') _tab _tab _tab (`ckd`cat'_m3_gp_interactions') _n
 27. file write tablecontent _tab ("BP measurements") _tab _tab (`ckd`cat'_m4_blood_pressure') _tab _tab _tab (`ckd`cat'_m5_blood_pressure') _tab _tab _tab (`ckd`cat'_m6_blood_pressure') _tab _tab _tab (`ckd`cat'_m7_blood_pressure') _tab _tab _tab (`ck
> d`cat'_m8_blood_pressure') _tab _tab _tab (`ckd`cat'_m9_blood_pressure') _tab _tab _tab (`ckd`cat'_m10_blood_pressure') _tab _tab _tab (`ckd`cat'_m11_blood_pressure') _tab _tab _tab (`ckd`cat'_m12_blood_pressure') _tab _tab _tab (`ckd`cat'_m1_blood_p
> ressure') _tab _tab _tab (`ckd`cat'_m2_blood_pressure') _tab _tab _tab (`ckd`cat'_m3_blood_pressure') _n
 28. file write tablecontent _tab ("uACR tests") _tab _tab (`ckd`cat'_m4_albuminuria') _tab _tab _tab (`ckd`cat'_m5_albuminuria') _tab _tab _tab (`ckd`cat'_m6_albuminuria') _tab _tab _tab (`ckd`cat'_m7_albuminuria') _tab _tab _tab (`ckd`cat'_m8_albumin
> uria') _tab _tab _tab (`ckd`cat'_m9_albuminuria') _tab _tab _tab (`ckd`cat'_m10_albuminuria') _tab _tab _tab (`ckd`cat'_m11_albuminuria') _tab _tab _tab (`ckd`cat'_m12_albuminuria') _tab _tab _tab (`ckd`cat'_m1_albuminuria') _tab _tab _tab (`ckd`cat'
> _m2_albuminuria') _tab _tab _tab (`ckd`cat'_m3_albuminuria') _n
 29. file write tablecontent _tab ("Creatinine tests") _tab _tab (`ckd`cat'_m4_creatinine') _tab _tab _tab (`ckd`cat'_m5_creatinine') _tab _tab _tab (`ckd`cat'_m6_creatinine') _tab _tab _tab (`ckd`cat'_m7_creatinine') _tab _tab _tab (`ckd`cat'_m8_creat
> inine') _tab _tab _tab (`ckd`cat'_m9_creatinine') _tab _tab _tab (`ckd`cat'_m10_creatinine') _tab _tab _tab (`ckd`cat'_m11_creatinine') _tab _tab _tab (`ckd`cat'_m12_creatinine') _tab _tab _tab (`ckd`cat'_m1_creatinine') _tab _tab _tab (`ckd`cat'_m2_
> creatinine') _tab _tab _tab (`ckd`cat'_m3_creatinine') _n(2)
 30. }

. file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Column headings
. *Measures of each outcome by month
. file write tablecontent _tab _tab ("`dataset'") _tab ("April") _tab ("May") _tab ("June") _tab ("July") _tab ("August") _tab ("September") _tab ("October") _tab ("November") _tab ("December") _tab ("January") _tab ("February") _tab ("March") _tab _n(
> 2)

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Disclosure minimisation
. *safecount provides a count with any counts <=5 returned at "<=5"
. *round(r(N),5) rounds counts to the nearest 5 with any counts <=5 returned as "."
. 
. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_admitted_patients m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. 
. qui safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. }
  9. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`cat'
> _m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') _t
> ab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 17. file write tablecontent _tab ("Hospitalised patients") _tab _tab (`ckd`cat'_m4_admitted_patients') _tab _tab _tab (`ckd`cat'_m5_admitted_patients') _tab _tab _tab (`ckd`cat'_m6_admitted_patients') _tab _tab _tab (`ckd`cat'_m7_admitted_patients') _
> tab _tab _tab (`ckd`cat'_m8_admitted_patients') _tab _tab _tab (`ckd`cat'_m9_admitted_patients') _tab _tab _tab (`ckd`cat'_m10_admitted_patients') _tab _tab _tab (`ckd`cat'_m11_admitted_patients') _tab _tab _tab (`ckd`cat'_m12_admitted_patients') _ta
> b _tab _tab (`ckd`cat'_m1_admitted_patients') _tab _tab _tab (`ckd`cat'_m2_admitted_patients') _tab _tab _tab (`ckd`cat'_m3_admitted_patients') _n
 18. file write tablecontent _tab ("AVF formation") _tab _tab (`ckd`cat'_m4_fistula_formation') _tab _tab _tab (`ckd`cat'_m5_fistula_formation') _tab _tab _tab (`ckd`cat'_m6_fistula_formation') _tab _tab _tab (`ckd`cat'_m7_fistula_formation') _tab _tab
>  _tab (`ckd`cat'_m8_fistula_formation') _tab _tab _tab (`ckd`cat'_m9_fistula_formation') _tab _tab _tab (`ckd`cat'_m10_fistula_formation') _tab _tab _tab (`ckd`cat'_m11_fistula_formation') _tab _tab _tab (`ckd`cat'_m12_fistula_formation') _tab _tab _
> tab (`ckd`cat'_m1_fistula_formation') _tab _tab _tab (`ckd`cat'_m2_fistula_formation') _tab _tab _tab (`ckd`cat'_m3_fistula_formation') _n
 19. file write tablecontent _tab ("PD insertion") _tab _tab (`ckd`cat'_m4_pd_insertion') _tab _tab _tab (`ckd`cat'_m5_pd_insertion') _tab _tab _tab (`ckd`cat'_m6_pd_insertion') _tab _tab _tab (`ckd`cat'_m7_pd_insertion') _tab _tab _tab (`ckd`cat'_m8_p
> d_insertion') _tab _tab _tab (`ckd`cat'_m9_pd_insertion') _tab _tab _tab (`ckd`cat'_m10_pd_insertion') _tab _tab _tab (`ckd`cat'_m11_pd_insertion') _tab _tab _tab (`ckd`cat'_m12_pd_insertion') _tab _tab _tab (`ckd`cat'_m1_pd_insertion') _tab _tab _ta
> b (`ckd`cat'_m2_pd_insertion') _tab _tab _tab (`ckd`cat'_m3_pd_insertion') _n
 20. file write tablecontent _tab ("ICU days") _tab _tab (`ckd`cat'_m4_critical_care_days') _tab _tab _tab (`ckd`cat'_m5_critical_care_days') _tab _tab _tab (`ckd`cat'_m6_critical_care_days') _tab _tab _tab (`ckd`cat'_m7_critical_care_days') _tab _tab 
> _tab (`ckd`cat'_m8_critical_care_days') _tab _tab _tab (`ckd`cat'_m9_critical_care_days') _tab _tab _tab (`ckd`cat'_m10_critical_care_days') _tab _tab _tab (`ckd`cat'_m11_critical_care_days') _tab _tab _tab (`ckd`cat'_m12_critical_care_days') _tab _t
> ab _tab (`ckd`cat'_m1_critical_care_days') _tab _tab _tab (`ckd`cat'_m2_critical_care_days') _tab _tab _tab (`ckd`cat'_m3_critical_care_days') _n
 21. file write tablecontent _tab ("ICU patients") _tab _tab (`ckd`cat'_m4_critical_care_patients') _tab _tab _tab (`ckd`cat'_m5_critical_care_patients') _tab _tab _tab (`ckd`cat'_m6_critical_care_patients') _tab _tab _tab (`ckd`cat'_m7_critical_care_p
> atients') _tab _tab _tab (`ckd`cat'_m8_critical_care_patients') _tab _tab _tab (`ckd`cat'_m9_critical_care_patients') _tab _tab _tab (`ckd`cat'_m10_critical_care_patients') _tab _tab _tab (`ckd`cat'_m11_critical_care_patients') _tab _tab _tab (`ckd`c
> at'_m12_critical_care_patients') _tab _tab _tab (`ckd`cat'_m1_critical_care_patients') _tab _tab _tab (`ckd`cat'_m2_critical_care_patients') _tab _tab _tab (`ckd`cat'_m3_critical_care_patients') _n
 22. file write tablecontent _tab ("ED days") _tab _tab (`ckd`cat'_m4_emergency_days') _tab _tab _tab (`ckd`cat'_m5_emergency_days') _tab _tab _tab (`ckd`cat'_m6_emergency_days') _tab _tab _tab (`ckd`cat'_m7_emergency_days') _tab _tab _tab (`ckd`cat'_m
> 8_emergency_days') _tab _tab _tab (`ckd`cat'_m9_emergency_days') _tab _tab _tab (`ckd`cat'_m10_emergency_days') _tab _tab _tab (`ckd`cat'_m11_emergency_days') _tab _tab _tab (`ckd`cat'_m12_emergency_days') _tab _tab _tab (`ckd`cat'_m1_emergency_days'
> ) _tab _tab _tab (`ckd`cat'_m2_emergency_days') _tab _tab _tab (`ckd`cat'_m3_emergency_days') _n
 23. file write tablecontent _tab ("OPD appts") _tab _tab (`ckd`cat'_m4_op_appts') _tab _tab _tab (`ckd`cat'_m5_op_appts') _tab _tab _tab (`ckd`cat'_m6_op_appts') _tab _tab _tab (`ckd`cat'_m7_op_appts') _tab _tab _tab (`ckd`cat'_m8_op_appts') _tab _tab
>  _tab (`ckd`cat'_m9_op_appts') _tab _tab _tab (`ckd`cat'_m10_op_appts') _tab _tab _tab (`ckd`cat'_m11_op_appts') _tab _tab _tab (`ckd`cat'_m12_op_appts') _tab _tab _tab (`ckd`cat'_m1_op_appts') _tab _tab _tab (`ckd`cat'_m2_op_appts') _tab _tab _tab (
> `ckd`cat'_m3_op_appts') _n
 24. file write tablecontent _tab ("Neph appts") _tab _tab (`ckd`cat'_m4_neph_appts') _tab _tab _tab (`ckd`cat'_m5_neph_appts') _tab _tab _tab (`ckd`cat'_m6_neph_appts') _tab _tab _tab (`ckd`cat'_m7_neph_appts') _tab _tab _tab (`ckd`cat'_m8_neph_appts'
> ) _tab _tab _tab (`ckd`cat'_m9_neph_appts') _tab _tab _tab (`ckd`cat'_m10_neph_appts') _tab _tab _tab (`ckd`cat'_m11_neph_appts') _tab _tab _tab (`ckd`cat'_m12_neph_appts') _tab _tab _tab (`ckd`cat'_m1_neph_appts') _tab _tab _tab (`ckd`cat'_m2_neph_a
> ppts') _tab _tab _tab (`ckd`cat'_m3_neph_appts') _n
 25. file write tablecontent _tab ("Tx appts") _tab _tab (`ckd`cat'_m4_tx_appts') _tab _tab _tab (`ckd`cat'_m5_tx_appts') _tab _tab _tab (`ckd`cat'_m6_tx_appts') _tab _tab _tab (`ckd`cat'_m7_tx_appts') _tab _tab _tab (`ckd`cat'_m8_tx_appts') _tab _tab 
> _tab (`ckd`cat'_m9_tx_appts') _tab _tab _tab (`ckd`cat'_m10_tx_appts') _tab _tab _tab (`ckd`cat'_m11_tx_appts') _tab _tab _tab (`ckd`cat'_m12_tx_appts') _tab _tab _tab (`ckd`cat'_m1_tx_appts') _tab _tab _tab (`ckd`cat'_m2_tx_appts') _tab _tab _tab (`
> ckd`cat'_m3_tx_appts') _n
 26. file write tablecontent _tab ("GP interactions") _tab _tab (`ckd`cat'_m4_gp_interactions') _tab _tab _tab (`ckd`cat'_m5_gp_interactions') _tab _tab _tab (`ckd`cat'_m6_gp_interactions') _tab _tab _tab (`ckd`cat'_m7_gp_interactions') _tab _tab _tab 
> (`ckd`cat'_m8_gp_interactions') _tab _tab _tab (`ckd`cat'_m9_gp_interactions') _tab _tab _tab (`ckd`cat'_m10_gp_interactions') _tab _tab _tab (`ckd`cat'_m11_gp_interactions') _tab _tab _tab (`ckd`cat'_m12_gp_interactions') _tab _tab _tab (`ckd`cat'_m
> 1_gp_interactions') _tab _tab _tab (`ckd`cat'_m2_gp_interactions') _tab _tab _tab (`ckd`cat'_m3_gp_interactions') _n
 27. file write tablecontent _tab ("BP measurements") _tab _tab (`ckd`cat'_m4_blood_pressure') _tab _tab _tab (`ckd`cat'_m5_blood_pressure') _tab _tab _tab (`ckd`cat'_m6_blood_pressure') _tab _tab _tab (`ckd`cat'_m7_blood_pressure') _tab _tab _tab (`ck
> d`cat'_m8_blood_pressure') _tab _tab _tab (`ckd`cat'_m9_blood_pressure') _tab _tab _tab (`ckd`cat'_m10_blood_pressure') _tab _tab _tab (`ckd`cat'_m11_blood_pressure') _tab _tab _tab (`ckd`cat'_m12_blood_pressure') _tab _tab _tab (`ckd`cat'_m1_blood_p
> ressure') _tab _tab _tab (`ckd`cat'_m2_blood_pressure') _tab _tab _tab (`ckd`cat'_m3_blood_pressure') _n
 28. file write tablecontent _tab ("uACR tests") _tab _tab (`ckd`cat'_m4_albuminuria') _tab _tab _tab (`ckd`cat'_m5_albuminuria') _tab _tab _tab (`ckd`cat'_m6_albuminuria') _tab _tab _tab (`ckd`cat'_m7_albuminuria') _tab _tab _tab (`ckd`cat'_m8_albumin
> uria') _tab _tab _tab (`ckd`cat'_m9_albuminuria') _tab _tab _tab (`ckd`cat'_m10_albuminuria') _tab _tab _tab (`ckd`cat'_m11_albuminuria') _tab _tab _tab (`ckd`cat'_m12_albuminuria') _tab _tab _tab (`ckd`cat'_m1_albuminuria') _tab _tab _tab (`ckd`cat'
> _m2_albuminuria') _tab _tab _tab (`ckd`cat'_m3_albuminuria') _n
 29. file write tablecontent _tab ("Creatinine tests") _tab _tab (`ckd`cat'_m4_creatinine') _tab _tab _tab (`ckd`cat'_m5_creatinine') _tab _tab _tab (`ckd`cat'_m6_creatinine') _tab _tab _tab (`ckd`cat'_m7_creatinine') _tab _tab _tab (`ckd`cat'_m8_creat
> inine') _tab _tab _tab (`ckd`cat'_m9_creatinine') _tab _tab _tab (`ckd`cat'_m10_creatinine') _tab _tab _tab (`ckd`cat'_m11_creatinine') _tab _tab _tab (`ckd`cat'_m12_creatinine') _tab _tab _tab (`ckd`cat'_m1_creatinine') _tab _tab _tab (`ckd`cat'_m2_
> creatinine') _tab _tab _tab (`ckd`cat'_m3_creatinine') _n(2)
 30. }

. file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. file write tablecontent _tab _tab ("2017'") _tab ("April") _tab ("May") _tab ("June") _tab ("July") _tab ("August") _tab ("September") _tab ("October") _tab ("November") _tab ("December") _tab ("January") _tab ("February") _tab ("March") _tab _n(2)

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_admitted_patients m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. 
. qui safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. }
  9. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. **Populate table with redacted counts
. *eGFR >60 with albuminuria
. file write tablecontent ("`lab`cat''") _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab _tab _tab (`ckd`cat'_m5_hospital_days') _tab _tab _tab (`ckd`cat'_m6_hospital_days') _tab _tab _tab (`ckd`cat'_m7_hospital_days') _tab _tab _tab (`ckd`cat'
> _m8_hospital_days') _tab _tab _tab (`ckd`cat'_m9_hospital_days') _tab _tab _tab (`ckd`cat'_m10_hospital_days') _tab _tab _tab (`ckd`cat'_m11_hospital_days') _tab _tab _tab (`ckd`cat'_m12_hospital_days') _tab _tab _tab (`ckd`cat'_m1_hospital_days') _t
> ab _tab _tab (`ckd`cat'_m2_hospital_days') _tab _tab _tab (`ckd`cat'_m3_hospital_days') _n
 17. file write tablecontent _tab ("Hospitalised patients") _tab _tab (`ckd`cat'_m4_admitted_patients') _tab _tab _tab (`ckd`cat'_m5_admitted_patients') _tab _tab _tab (`ckd`cat'_m6_admitted_patients') _tab _tab _tab (`ckd`cat'_m7_admitted_patients') _
> tab _tab _tab (`ckd`cat'_m8_admitted_patients') _tab _tab _tab (`ckd`cat'_m9_admitted_patients') _tab _tab _tab (`ckd`cat'_m10_admitted_patients') _tab _tab _tab (`ckd`cat'_m11_admitted_patients') _tab _tab _tab (`ckd`cat'_m12_admitted_patients') _ta
> b _tab _tab (`ckd`cat'_m1_admitted_patients') _tab _tab _tab (`ckd`cat'_m2_admitted_patients') _tab _tab _tab (`ckd`cat'_m3_admitted_patients') _n
 18. file write tablecontent _tab ("AVF formation") _tab _tab (`ckd`cat'_m4_fistula_formation') _tab _tab _tab (`ckd`cat'_m5_fistula_formation') _tab _tab _tab (`ckd`cat'_m6_fistula_formation') _tab _tab _tab (`ckd`cat'_m7_fistula_formation') _tab _tab
>  _tab (`ckd`cat'_m8_fistula_formation') _tab _tab _tab (`ckd`cat'_m9_fistula_formation') _tab _tab _tab (`ckd`cat'_m10_fistula_formation') _tab _tab _tab (`ckd`cat'_m11_fistula_formation') _tab _tab _tab (`ckd`cat'_m12_fistula_formation') _tab _tab _
> tab (`ckd`cat'_m1_fistula_formation') _tab _tab _tab (`ckd`cat'_m2_fistula_formation') _tab _tab _tab (`ckd`cat'_m3_fistula_formation') _n
 19. file write tablecontent _tab ("PD insertion") _tab _tab (`ckd`cat'_m4_pd_insertion') _tab _tab _tab (`ckd`cat'_m5_pd_insertion') _tab _tab _tab (`ckd`cat'_m6_pd_insertion') _tab _tab _tab (`ckd`cat'_m7_pd_insertion') _tab _tab _tab (`ckd`cat'_m8_p
> d_insertion') _tab _tab _tab (`ckd`cat'_m9_pd_insertion') _tab _tab _tab (`ckd`cat'_m10_pd_insertion') _tab _tab _tab (`ckd`cat'_m11_pd_insertion') _tab _tab _tab (`ckd`cat'_m12_pd_insertion') _tab _tab _tab (`ckd`cat'_m1_pd_insertion') _tab _tab _ta
> b (`ckd`cat'_m2_pd_insertion') _tab _tab _tab (`ckd`cat'_m3_pd_insertion') _n
 20. file write tablecontent _tab ("ICU days") _tab _tab (`ckd`cat'_m4_critical_care_days') _tab _tab _tab (`ckd`cat'_m5_critical_care_days') _tab _tab _tab (`ckd`cat'_m6_critical_care_days') _tab _tab _tab (`ckd`cat'_m7_critical_care_days') _tab _tab 
> _tab (`ckd`cat'_m8_critical_care_days') _tab _tab _tab (`ckd`cat'_m9_critical_care_days') _tab _tab _tab (`ckd`cat'_m10_critical_care_days') _tab _tab _tab (`ckd`cat'_m11_critical_care_days') _tab _tab _tab (`ckd`cat'_m12_critical_care_days') _tab _t
> ab _tab (`ckd`cat'_m1_critical_care_days') _tab _tab _tab (`ckd`cat'_m2_critical_care_days') _tab _tab _tab (`ckd`cat'_m3_critical_care_days') _n
 21. file write tablecontent _tab ("ICU patients") _tab _tab (`ckd`cat'_m4_critical_care_patients') _tab _tab _tab (`ckd`cat'_m5_critical_care_patients') _tab _tab _tab (`ckd`cat'_m6_critical_care_patients') _tab _tab _tab (`ckd`cat'_m7_critical_care_p
> atients') _tab _tab _tab (`ckd`cat'_m8_critical_care_patients') _tab _tab _tab (`ckd`cat'_m9_critical_care_patients') _tab _tab _tab (`ckd`cat'_m10_critical_care_patients') _tab _tab _tab (`ckd`cat'_m11_critical_care_patients') _tab _tab _tab (`ckd`c
> at'_m12_critical_care_patients') _tab _tab _tab (`ckd`cat'_m1_critical_care_patients') _tab _tab _tab (`ckd`cat'_m2_critical_care_patients') _tab _tab _tab (`ckd`cat'_m3_critical_care_patients') _n
 22. file write tablecontent _tab ("ED days") _tab _tab (`ckd`cat'_m4_emergency_days') _tab _tab _tab (`ckd`cat'_m5_emergency_days') _tab _tab _tab (`ckd`cat'_m6_emergency_days') _tab _tab _tab (`ckd`cat'_m7_emergency_days') _tab _tab _tab (`ckd`cat'_m
> 8_emergency_days') _tab _tab _tab (`ckd`cat'_m9_emergency_days') _tab _tab _tab (`ckd`cat'_m10_emergency_days') _tab _tab _tab (`ckd`cat'_m11_emergency_days') _tab _tab _tab (`ckd`cat'_m12_emergency_days') _tab _tab _tab (`ckd`cat'_m1_emergency_days'
> ) _tab _tab _tab (`ckd`cat'_m2_emergency_days') _tab _tab _tab (`ckd`cat'_m3_emergency_days') _n
 23. file write tablecontent _tab ("OPD appts") _tab _tab (`ckd`cat'_m4_op_appts') _tab _tab _tab (`ckd`cat'_m5_op_appts') _tab _tab _tab (`ckd`cat'_m6_op_appts') _tab _tab _tab (`ckd`cat'_m7_op_appts') _tab _tab _tab (`ckd`cat'_m8_op_appts') _tab _tab
>  _tab (`ckd`cat'_m9_op_appts') _tab _tab _tab (`ckd`cat'_m10_op_appts') _tab _tab _tab (`ckd`cat'_m11_op_appts') _tab _tab _tab (`ckd`cat'_m12_op_appts') _tab _tab _tab (`ckd`cat'_m1_op_appts') _tab _tab _tab (`ckd`cat'_m2_op_appts') _tab _tab _tab (
> `ckd`cat'_m3_op_appts') _n
 24. file write tablecontent _tab ("Neph appts") _tab _tab (`ckd`cat'_m4_neph_appts') _tab _tab _tab (`ckd`cat'_m5_neph_appts') _tab _tab _tab (`ckd`cat'_m6_neph_appts') _tab _tab _tab (`ckd`cat'_m7_neph_appts') _tab _tab _tab (`ckd`cat'_m8_neph_appts'
> ) _tab _tab _tab (`ckd`cat'_m9_neph_appts') _tab _tab _tab (`ckd`cat'_m10_neph_appts') _tab _tab _tab (`ckd`cat'_m11_neph_appts') _tab _tab _tab (`ckd`cat'_m12_neph_appts') _tab _tab _tab (`ckd`cat'_m1_neph_appts') _tab _tab _tab (`ckd`cat'_m2_neph_a
> ppts') _tab _tab _tab (`ckd`cat'_m3_neph_appts') _n
 25. file write tablecontent _tab ("Tx appts") _tab _tab (`ckd`cat'_m4_tx_appts') _tab _tab _tab (`ckd`cat'_m5_tx_appts') _tab _tab _tab (`ckd`cat'_m6_tx_appts') _tab _tab _tab (`ckd`cat'_m7_tx_appts') _tab _tab _tab (`ckd`cat'_m8_tx_appts') _tab _tab 
> _tab (`ckd`cat'_m9_tx_appts') _tab _tab _tab (`ckd`cat'_m10_tx_appts') _tab _tab _tab (`ckd`cat'_m11_tx_appts') _tab _tab _tab (`ckd`cat'_m12_tx_appts') _tab _tab _tab (`ckd`cat'_m1_tx_appts') _tab _tab _tab (`ckd`cat'_m2_tx_appts') _tab _tab _tab (`
> ckd`cat'_m3_tx_appts') _n
 26. file write tablecontent _tab ("GP interactions") _tab _tab (`ckd`cat'_m4_gp_interactions') _tab _tab _tab (`ckd`cat'_m5_gp_interactions') _tab _tab _tab (`ckd`cat'_m6_gp_interactions') _tab _tab _tab (`ckd`cat'_m7_gp_interactions') _tab _tab _tab 
> (`ckd`cat'_m8_gp_interactions') _tab _tab _tab (`ckd`cat'_m9_gp_interactions') _tab _tab _tab (`ckd`cat'_m10_gp_interactions') _tab _tab _tab (`ckd`cat'_m11_gp_interactions') _tab _tab _tab (`ckd`cat'_m12_gp_interactions') _tab _tab _tab (`ckd`cat'_m
> 1_gp_interactions') _tab _tab _tab (`ckd`cat'_m2_gp_interactions') _tab _tab _tab (`ckd`cat'_m3_gp_interactions') _n
 27. file write tablecontent _tab ("BP measurements") _tab _tab (`ckd`cat'_m4_blood_pressure') _tab _tab _tab (`ckd`cat'_m5_blood_pressure') _tab _tab _tab (`ckd`cat'_m6_blood_pressure') _tab _tab _tab (`ckd`cat'_m7_blood_pressure') _tab _tab _tab (`ck
> d`cat'_m8_blood_pressure') _tab _tab _tab (`ckd`cat'_m9_blood_pressure') _tab _tab _tab (`ckd`cat'_m10_blood_pressure') _tab _tab _tab (`ckd`cat'_m11_blood_pressure') _tab _tab _tab (`ckd`cat'_m12_blood_pressure') _tab _tab _tab (`ckd`cat'_m1_blood_p
> ressure') _tab _tab _tab (`ckd`cat'_m2_blood_pressure') _tab _tab _tab (`ckd`cat'_m3_blood_pressure') _n
 28. file write tablecontent _tab ("uACR tests") _tab _tab (`ckd`cat'_m4_albuminuria') _tab _tab _tab (`ckd`cat'_m5_albuminuria') _tab _tab _tab (`ckd`cat'_m6_albuminuria') _tab _tab _tab (`ckd`cat'_m7_albuminuria') _tab _tab _tab (`ckd`cat'_m8_albumin
> uria') _tab _tab _tab (`ckd`cat'_m9_albuminuria') _tab _tab _tab (`ckd`cat'_m10_albuminuria') _tab _tab _tab (`ckd`cat'_m11_albuminuria') _tab _tab _tab (`ckd`cat'_m12_albuminuria') _tab _tab _tab (`ckd`cat'_m1_albuminuria') _tab _tab _tab (`ckd`cat'
> _m2_albuminuria') _tab _tab _tab (`ckd`cat'_m3_albuminuria') _n
 29. file write tablecontent _tab ("Creatinine tests") _tab _tab (`ckd`cat'_m4_creatinine') _tab _tab _tab (`ckd`cat'_m5_creatinine') _tab _tab _tab (`ckd`cat'_m6_creatinine') _tab _tab _tab (`ckd`cat'_m7_creatinine') _tab _tab _tab (`ckd`cat'_m8_creat
> inine') _tab _tab _tab (`ckd`cat'_m9_creatinine') _tab _tab _tab (`ckd`cat'_m10_creatinine') _tab _tab _tab (`ckd`cat'_m11_creatinine') _tab _tab _tab (`ckd`cat'_m12_creatinine') _tab _tab _tab (`ckd`cat'_m1_creatinine') _tab _tab _tab (`ckd`cat'_m2_
> creatinine') _tab _tab _tab (`ckd`cat'_m3_creatinine') _n(2)
 30. }

. file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. file write tablecontent _tab _tab ("2017'") _tab ("April") _tab ("May") _tab ("June") _tab ("July") _tab ("August") _tab ("September") _tab ("October") _tab ("November") _tab ("December") _tab ("January") _tab ("February") _tab ("March") _tab _n(2)

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Disclosure minimisation
. *safecount provides a count with any counts <=5 returned at "<=5"
. *round(r(N),5) rounds counts to the nearest 5 with any counts <=5 returned as "."
. 
. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_admitted_patients m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. 
. qui safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. }
  9. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. **Populate table for each CKD group with redacted counts
. file write tablecontent ("`lab`cat''") _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab (`ckd`cat'_m5_hospital_days') _tab (`ckd`cat'_m6_hospital_days') _tab (`ckd`cat'_m7_hospital_days') _tab (`ckd`cat'_m8_hospital_days') _tab (`ckd`cat'_m9_h
> ospital_days') _tab (`ckd`cat'_m10_hospital_days') _tab (`ckd`cat'_m11_hospital_days') _tab (`ckd`cat'_m12_hospital_days') _tab (`ckd`cat'_m1_hospital_days') _tab (`ckd`cat'_m2_hospital_days') _tab (`ckd`cat'_m3_hospital_days') _n
 17. file write tablecontent _tab ("Hospitalised") _tab _tab (`ckd`cat'_m4_admitted_patients') _tab (`ckd`cat'_m5_admitted_patients') _tab (`ckd`cat'_m6_admitted_patients') _tab (`ckd`cat'_m7_admitted_patients') _tab (`ckd`cat'_m8_admitted_patients') _
> tab (`ckd`cat'_m9_admitted_patients') _tab (`ckd`cat'_m10_admitted_patients') _tab (`ckd`cat'_m11_admitted_patients') _tab (`ckd`cat'_m12_admitted_patients') _tab (`ckd`cat'_m1_admitted_patients') _tab (`ckd`cat'_m2_admitted_patients') _tab (`ckd`cat
> '_m3_admitted_patients') _n
 18. file write tablecontent _tab ("AVF formation") _tab _tab (`ckd`cat'_m4_fistula_formation') _tab (`ckd`cat'_m5_fistula_formation') _tab (`ckd`cat'_m6_fistula_formation') _tab (`ckd`cat'_m7_fistula_formation') _tab (`ckd`cat'_m8_fistula_formation') 
> _tab (`ckd`cat'_m9_fistula_formation') _tab (`ckd`cat'_m10_fistula_formation') _tab (`ckd`cat'_m11_fistula_formation') _tab (`ckd`cat'_m12_fistula_formation') _tab (`ckd`cat'_m1_fistula_formation') _tab (`ckd`cat'_m2_fistula_formation') _tab (`ckd`ca
> t'_m3_fistula_formation') _n
 19. file write tablecontent _tab ("PD insertion") _tab _tab (`ckd`cat'_m4_pd_insertion') _tab (`ckd`cat'_m5_pd_insertion') _tab (`ckd`cat'_m6_pd_insertion') _tab (`ckd`cat'_m7_pd_insertion') _tab (`ckd`cat'_m8_pd_insertion') _tab (`ckd`cat'_m9_pd_inse
> rtion') _tab (`ckd`cat'_m10_pd_insertion') _tab (`ckd`cat'_m11_pd_insertion') _tab (`ckd`cat'_m12_pd_insertion') _tab (`ckd`cat'_m1_pd_insertion') _tab (`ckd`cat'_m2_pd_insertion') _tab (`ckd`cat'_m3_pd_insertion') _n
 20. file write tablecontent _tab ("ICU days") _tab _tab (`ckd`cat'_m4_critical_care_days') _tab (`ckd`cat'_m5_critical_care_days') _tab (`ckd`cat'_m6_critical_care_days') _tab (`ckd`cat'_m7_critical_care_days') _tab (`ckd`cat'_m8_critical_care_days') 
> _tab (`ckd`cat'_m9_critical_care_days') _tab (`ckd`cat'_m10_critical_care_days') _tab (`ckd`cat'_m11_critical_care_days') _tab (`ckd`cat'_m12_critical_care_days') _tab (`ckd`cat'_m1_critical_care_days') _tab (`ckd`cat'_m2_critical_care_days') _tab (`
> ckd`cat'_m3_critical_care_days') _n
 21. file write tablecontent _tab ("ICU patients") _tab _tab (`ckd`cat'_m4_critical_care_patients') _tab (`ckd`cat'_m5_critical_care_patients') _tab (`ckd`cat'_m6_critical_care_patients') _tab (`ckd`cat'_m7_critical_care_patients') _tab (`ckd`cat'_m8_c
> ritical_care_patients') _tab (`ckd`cat'_m9_critical_care_patients') _tab (`ckd`cat'_m10_critical_care_patients') _tab (`ckd`cat'_m11_critical_care_patients') _tab (`ckd`cat'_m12_critical_care_patients') _tab (`ckd`cat'_m1_critical_care_patients') _ta
> b (`ckd`cat'_m2_critical_care_patients') _tab (`ckd`cat'_m3_critical_care_patients') _n
 22. file write tablecontent _tab ("ED days") _tab _tab (`ckd`cat'_m4_emergency_days') _tab (`ckd`cat'_m5_emergency_days') _tab (`ckd`cat'_m6_emergency_days') _tab (`ckd`cat'_m7_emergency_days') _tab (`ckd`cat'_m8_emergency_days') _tab (`ckd`cat'_m9_em
> ergency_days') _tab (`ckd`cat'_m10_emergency_days') _tab (`ckd`cat'_m11_emergency_days') _tab (`ckd`cat'_m12_emergency_days') _tab (`ckd`cat'_m1_emergency_days') _tab (`ckd`cat'_m2_emergency_days') _tab (`ckd`cat'_m3_emergency_days') _n
 23. file write tablecontent _tab ("OPD appts") _tab _tab (`ckd`cat'_m4_op_appts') _tab (`ckd`cat'_m5_op_appts') _tab (`ckd`cat'_m6_op_appts') _tab (`ckd`cat'_m7_op_appts') _tab (`ckd`cat'_m8_op_appts') _tab (`ckd`cat'_m9_op_appts') _tab (`ckd`cat'_m10
> _op_appts') _tab (`ckd`cat'_m11_op_appts') _tab (`ckd`cat'_m12_op_appts') _tab (`ckd`cat'_m1_op_appts') _tab (`ckd`cat'_m2_op_appts') _tab (`ckd`cat'_m3_op_appts') _n
 24. file write tablecontent _tab ("Neph appts") _tab _tab (`ckd`cat'_m4_neph_appts') _tab (`ckd`cat'_m5_neph_appts') _tab (`ckd`cat'_m6_neph_appts') _tab (`ckd`cat'_m7_neph_appts') _tab (`ckd`cat'_m8_neph_appts') _tab (`ckd`cat'_m9_neph_appts') _tab (
> `ckd`cat'_m10_neph_appts') _tab (`ckd`cat'_m11_neph_appts') _tab (`ckd`cat'_m12_neph_appts') _tab (`ckd`cat'_m1_neph_appts') _tab (`ckd`cat'_m2_neph_appts') _tab (`ckd`cat'_m3_neph_appts') _n
 25. file write tablecontent _tab ("Tx appts") _tab _tab (`ckd`cat'_m4_tx_appts') _tab (`ckd`cat'_m5_tx_appts') _tab (`ckd`cat'_m6_tx_appts') _tab (`ckd`cat'_m7_tx_appts') _tab (`ckd`cat'_m8_tx_appts') _tab (`ckd`cat'_m9_tx_appts') _tab (`ckd`cat'_m10_
> tx_appts') _tab (`ckd`cat'_m11_tx_appts') _tab (`ckd`cat'_m12_tx_appts') _tab (`ckd`cat'_m1_tx_appts') _tab (`ckd`cat'_m2_tx_appts') _tab (`ckd`cat'_m3_tx_appts') _n
 26. file write tablecontent _tab ("GP interactions") _tab _tab (`ckd`cat'_m4_gp_interactions') _tab (`ckd`cat'_m5_gp_interactions') _tab (`ckd`cat'_m6_gp_interactions') _tab (`ckd`cat'_m7_gp_interactions') _tab (`ckd`cat'_m8_gp_interactions') _tab (`c
> kd`cat'_m9_gp_interactions') _tab (`ckd`cat'_m10_gp_interactions') _tab (`ckd`cat'_m11_gp_interactions') _tab (`ckd`cat'_m12_gp_interactions') _tab (`ckd`cat'_m1_gp_interactions') _tab (`ckd`cat'_m2_gp_interactions') _tab (`ckd`cat'_m3_gp_interaction
> s') _n
 27. file write tablecontent _tab ("BP measurements") _tab _tab (`ckd`cat'_m4_blood_pressure') _tab (`ckd`cat'_m5_blood_pressure') _tab (`ckd`cat'_m6_blood_pressure') _tab (`ckd`cat'_m7_blood_pressure') _tab (`ckd`cat'_m8_blood_pressure') _tab (`ckd`ca
> t'_m9_blood_pressure') _tab (`ckd`cat'_m10_blood_pressure') _tab (`ckd`cat'_m11_blood_pressure') _tab (`ckd`cat'_m12_blood_pressure') _tab (`ckd`cat'_m1_blood_pressure') _tab (`ckd`cat'_m2_blood_pressure') _tab (`ckd`cat'_m3_blood_pressure') _n
 28. file write tablecontent _tab ("uACR tests") _tab _tab (`ckd`cat'_m4_albuminuria') _tab (`ckd`cat'_m5_albuminuria') _tab (`ckd`cat'_m6_albuminuria') _tab (`ckd`cat'_m7_albuminuria') _tab (`ckd`cat'_m8_albuminuria') _tab (`ckd`cat'_m9_albuminuria') 
> _tab (`ckd`cat'_m10_albuminuria') _tab (`ckd`cat'_m11_albuminuria') _tab (`ckd`cat'_m12_albuminuria') _tab (`ckd`cat'_m1_albuminuria') _tab (`ckd`cat'_m2_albuminuria') _tab (`ckd`cat'_m3_albuminuria') _n
 29. file write tablecontent _tab ("Creatinine tests") _tab _tab (`ckd`cat'_m4_creatinine') _tab (`ckd`cat'_m5_creatinine') _tab (`ckd`cat'_m6_creatinine') _tab (`ckd`cat'_m7_creatinine') _tab (`ckd`cat'_m8_creatinine') _tab (`ckd`cat'_m9_creatinine') 
> _tab (`ckd`cat'_m10_creatinine') _tab (`ckd`cat'_m11_creatinine') _tab (`ckd`cat'_m12_creatinine') _tab (`ckd`cat'_m1_creatinine') _tab (`ckd`cat'_m2_creatinine') _tab (`ckd`cat'_m3_creatinine') _n(2)
 30. }

. file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. clear

. import delimited ./output/2017_healthcare_use.csv
(encoding automatically selected: ISO-8859-1)
(16 vars, 90 obs)

. local columns " "2017" "April" "May" "June" "July" "August" "September" "October" "November" "December" "January" "February" "March" "April" "

. foreach col in `columns' {
  2. replace `col'_n=. if `col'_n<=5
  3. }
2017_n invalid name
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. file write tablecontent _tab _tab ("2017_N'") _tab ("April") _tab ("May") _tab ("June") _tab ("July") _tab ("August") _tab ("September") _tab ("October") _tab ("November") _tab ("December") _tab ("January") _tab ("February") _tab ("March") _tab _n(2)

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_admitted_patients m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. 
. qui safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. }
  9. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. **Populate table for each CKD group with redacted counts
. file write tablecontent ("`lab`cat''") _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("Hospital days") _tab (`ckd`cat'_m4_hospital_days') _tab (`ckd`cat'_m5_hospital_days') _tab (`ckd`cat'_m6_hospital_days') _tab (`ckd`cat'_m7_hospital_days') _tab (`ckd`cat'_m8_hospital_days') _tab (`ckd`cat'_m9_hospit
> al_days') _tab (`ckd`cat'_m10_hospital_days') _tab (`ckd`cat'_m11_hospital_days') _tab (`ckd`cat'_m12_hospital_days') _tab (`ckd`cat'_m1_hospital_days') _tab (`ckd`cat'_m2_hospital_days') _tab (`ckd`cat'_m3_hospital_days') _n
 17. file write tablecontent _tab ("Hospitalised patients") _tab (`ckd`cat'_m4_admitted_patients') _tab (`ckd`cat'_m5_admitted_patients') _tab (`ckd`cat'_m6_admitted_patients') _tab (`ckd`cat'_m7_admitted_patients') _tab (`ckd`cat'_m8_admitted_patients
> ') _tab (`ckd`cat'_m9_admitted_patients') _tab (`ckd`cat'_m10_admitted_patients') _tab (`ckd`cat'_m11_admitted_patients') _tab (`ckd`cat'_m12_admitted_patients') _tab (`ckd`cat'_m1_admitted_patients') _tab (`ckd`cat'_m2_admitted_patients') _tab (`ckd
> `cat'_m3_admitted_patients') _n
 18. file write tablecontent _tab ("AVF formation") _tab (`ckd`cat'_m4_fistula_formation') _tab (`ckd`cat'_m5_fistula_formation') _tab (`ckd`cat'_m6_fistula_formation') _tab (`ckd`cat'_m7_fistula_formation') _tab (`ckd`cat'_m8_fistula_formation') _tab 
> (`ckd`cat'_m9_fistula_formation') _tab (`ckd`cat'_m10_fistula_formation') _tab (`ckd`cat'_m11_fistula_formation') _tab (`ckd`cat'_m12_fistula_formation') _tab (`ckd`cat'_m1_fistula_formation') _tab (`ckd`cat'_m2_fistula_formation') _tab (`ckd`cat'_m3
> _fistula_formation') _n
 19. file write tablecontent _tab ("PD insertion") _tab (`ckd`cat'_m4_pd_insertion') _tab (`ckd`cat'_m5_pd_insertion') _tab (`ckd`cat'_m6_pd_insertion') _tab (`ckd`cat'_m7_pd_insertion') _tab (`ckd`cat'_m8_pd_insertion') _tab (`ckd`cat'_m9_pd_insertion
> ') _tab (`ckd`cat'_m10_pd_insertion') _tab (`ckd`cat'_m11_pd_insertion') _tab (`ckd`cat'_m12_pd_insertion') _tab (`ckd`cat'_m1_pd_insertion') _tab (`ckd`cat'_m2_pd_insertion') _tab (`ckd`cat'_m3_pd_insertion') _n
 20. file write tablecontent _tab ("ICU days") _tab (`ckd`cat'_m4_critical_care_days') _tab (`ckd`cat'_m5_critical_care_days') _tab (`ckd`cat'_m6_critical_care_days') _tab (`ckd`cat'_m7_critical_care_days') _tab (`ckd`cat'_m8_critical_care_days') _tab 
> (`ckd`cat'_m9_critical_care_days') _tab (`ckd`cat'_m10_critical_care_days') _tab (`ckd`cat'_m11_critical_care_days') _tab (`ckd`cat'_m12_critical_care_days') _tab (`ckd`cat'_m1_critical_care_days') _tab (`ckd`cat'_m2_critical_care_days') _tab (`ckd`c
> at'_m3_critical_care_days') _n
 21. file write tablecontent _tab ("ICU patients") _tab (`ckd`cat'_m4_critical_care_patients') _tab (`ckd`cat'_m5_critical_care_patients') _tab (`ckd`cat'_m6_critical_care_patients') _tab (`ckd`cat'_m7_critical_care_patients') _tab (`ckd`cat'_m8_critic
> al_care_patients') _tab (`ckd`cat'_m9_critical_care_patients') _tab (`ckd`cat'_m10_critical_care_patients') _tab (`ckd`cat'_m11_critical_care_patients') _tab (`ckd`cat'_m12_critical_care_patients') _tab (`ckd`cat'_m1_critical_care_patients') _tab (`c
> kd`cat'_m2_critical_care_patients') _tab (`ckd`cat'_m3_critical_care_patients') _n
 22. file write tablecontent _tab ("ED days") _tab (`ckd`cat'_m4_emergency_days') _tab (`ckd`cat'_m5_emergency_days') _tab (`ckd`cat'_m6_emergency_days') _tab (`ckd`cat'_m7_emergency_days') _tab (`ckd`cat'_m8_emergency_days') _tab (`ckd`cat'_m9_emergen
> cy_days') _tab (`ckd`cat'_m10_emergency_days') _tab (`ckd`cat'_m11_emergency_days') _tab (`ckd`cat'_m12_emergency_days') _tab (`ckd`cat'_m1_emergency_days') _tab (`ckd`cat'_m2_emergency_days') _tab (`ckd`cat'_m3_emergency_days') _n
 23. file write tablecontent _tab ("OPD appts") _tab (`ckd`cat'_m4_op_appts') _tab (`ckd`cat'_m5_op_appts') _tab (`ckd`cat'_m6_op_appts') _tab (`ckd`cat'_m7_op_appts') _tab (`ckd`cat'_m8_op_appts') _tab (`ckd`cat'_m9_op_appts') _tab (`ckd`cat'_m10_op_a
> ppts') _tab (`ckd`cat'_m11_op_appts') _tab (`ckd`cat'_m12_op_appts') _tab (`ckd`cat'_m1_op_appts') _tab (`ckd`cat'_m2_op_appts') _tab (`ckd`cat'_m3_op_appts') _n
 24. file write tablecontent _tab ("Neph appts") _tab (`ckd`cat'_m4_neph_appts') _tab (`ckd`cat'_m5_neph_appts') _tab (`ckd`cat'_m6_neph_appts') _tab (`ckd`cat'_m7_neph_appts') _tab (`ckd`cat'_m8_neph_appts') _tab (`ckd`cat'_m9_neph_appts') _tab (`ckd`
> cat'_m10_neph_appts') _tab (`ckd`cat'_m11_neph_appts') _tab (`ckd`cat'_m12_neph_appts') _tab (`ckd`cat'_m1_neph_appts') _tab (`ckd`cat'_m2_neph_appts') _tab (`ckd`cat'_m3_neph_appts') _n
 25. file write tablecontent _tab ("Tx appts") _tab (`ckd`cat'_m4_tx_appts') _tab (`ckd`cat'_m5_tx_appts') _tab (`ckd`cat'_m6_tx_appts') _tab (`ckd`cat'_m7_tx_appts') _tab (`ckd`cat'_m8_tx_appts') _tab (`ckd`cat'_m9_tx_appts') _tab (`ckd`cat'_m10_tx_ap
> pts') _tab (`ckd`cat'_m11_tx_appts') _tab (`ckd`cat'_m12_tx_appts') _tab (`ckd`cat'_m1_tx_appts') _tab (`ckd`cat'_m2_tx_appts') _tab (`ckd`cat'_m3_tx_appts') _n
 26. file write tablecontent _tab ("GP interactions") _tab (`ckd`cat'_m4_gp_interactions') _tab (`ckd`cat'_m5_gp_interactions') _tab (`ckd`cat'_m6_gp_interactions') _tab (`ckd`cat'_m7_gp_interactions') _tab (`ckd`cat'_m8_gp_interactions') _tab (`ckd`ca
> t'_m9_gp_interactions') _tab (`ckd`cat'_m10_gp_interactions') _tab (`ckd`cat'_m11_gp_interactions') _tab (`ckd`cat'_m12_gp_interactions') _tab (`ckd`cat'_m1_gp_interactions') _tab (`ckd`cat'_m2_gp_interactions') _tab (`ckd`cat'_m3_gp_interactions') _
> n
 27. file write tablecontent _tab ("BP measurements") _tab (`ckd`cat'_m4_blood_pressure') _tab (`ckd`cat'_m5_blood_pressure') _tab (`ckd`cat'_m6_blood_pressure') _tab (`ckd`cat'_m7_blood_pressure') _tab (`ckd`cat'_m8_blood_pressure') _tab (`ckd`cat'_m9
> _blood_pressure') _tab (`ckd`cat'_m10_blood_pressure') _tab (`ckd`cat'_m11_blood_pressure') _tab (`ckd`cat'_m12_blood_pressure') _tab (`ckd`cat'_m1_blood_pressure') _tab (`ckd`cat'_m2_blood_pressure') _tab (`ckd`cat'_m3_blood_pressure') _n
 28. file write tablecontent _tab ("uACR tests") _tab (`ckd`cat'_m4_albuminuria') _tab (`ckd`cat'_m5_albuminuria') _tab (`ckd`cat'_m6_albuminuria') _tab (`ckd`cat'_m7_albuminuria') _tab (`ckd`cat'_m8_albuminuria') _tab (`ckd`cat'_m9_albuminuria') _tab 
> (`ckd`cat'_m10_albuminuria') _tab (`ckd`cat'_m11_albuminuria') _tab (`ckd`cat'_m12_albuminuria') _tab (`ckd`cat'_m1_albuminuria') _tab (`ckd`cat'_m2_albuminuria') _tab (`ckd`cat'_m3_albuminuria') _n
 29. file write tablecontent _tab ("SCr tests") _tab (`ckd`cat'_m4_creatinine') _tab (`ckd`cat'_m5_creatinine') _tab (`ckd`cat'_m6_creatinine') _tab (`ckd`cat'_m7_creatinine') _tab (`ckd`cat'_m8_creatinine') _tab (`ckd`cat'_m9_creatinine') _tab (`ckd`c
> at'_m10_creatinine') _tab (`ckd`cat'_m11_creatinine') _tab (`ckd`cat'_m12_creatinine') _tab (`ckd`cat'_m1_creatinine') _tab (`ckd`cat'_m2_creatinine') _tab (`ckd`cat'_m3_creatinine') _n(2)
 30. }

. file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. clear

. import delimited ./output/2017_healthcare_use.csv
(encoding automatically selected: ISO-8859-1)
(16 vars, 90 obs)

. local columns " "2017_N" "April" "May" "June" "July" "August" "September" "October" "November" "December" "January" "February" "March" "April" "

. foreach col in `columns' {
  2. replace `col'_n=. if `col'_n<=5
  3. }
2017_N_n invalid name
r(198);

end of do-file

r(198);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. file write tablecontent _tab _tab ("N_2017'") _tab ("April") _tab ("May") _tab ("June") _tab ("July") _tab ("August") _tab ("September") _tab ("October") _tab ("November") _tab ("December") _tab ("January") _tab ("February") _tab ("March") _tab _n(2)

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. 
. **Disclosure minimisation
. *safecount provides a count with any counts <=5 returned at "<=5"
. *round(r(N),5) rounds counts to the nearest 5 with any counts <=5 returned as "."
. 
. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_admitted_patients m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. 
. qui safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. }
  9. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. **Populate table for each CKD group with redacted counts
. file write tablecontent ("`lab`cat''") _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("Hospital days") _tab (`ckd`cat'_m4_hospital_days') _tab (`ckd`cat'_m5_hospital_days') _tab (`ckd`cat'_m6_hospital_days') _tab (`ckd`cat'_m7_hospital_days') _tab (`ckd`cat'_m8_hospital_days') _tab (`ckd`cat'_m9_hospit
> al_days') _tab (`ckd`cat'_m10_hospital_days') _tab (`ckd`cat'_m11_hospital_days') _tab (`ckd`cat'_m12_hospital_days') _tab (`ckd`cat'_m1_hospital_days') _tab (`ckd`cat'_m2_hospital_days') _tab (`ckd`cat'_m3_hospital_days') _n
 17. file write tablecontent _tab ("Hospitalised patients") _tab (`ckd`cat'_m4_admitted_patients') _tab (`ckd`cat'_m5_admitted_patients') _tab (`ckd`cat'_m6_admitted_patients') _tab (`ckd`cat'_m7_admitted_patients') _tab (`ckd`cat'_m8_admitted_patients
> ') _tab (`ckd`cat'_m9_admitted_patients') _tab (`ckd`cat'_m10_admitted_patients') _tab (`ckd`cat'_m11_admitted_patients') _tab (`ckd`cat'_m12_admitted_patients') _tab (`ckd`cat'_m1_admitted_patients') _tab (`ckd`cat'_m2_admitted_patients') _tab (`ckd
> `cat'_m3_admitted_patients') _n
 18. file write tablecontent _tab ("AVF formation") _tab (`ckd`cat'_m4_fistula_formation') _tab (`ckd`cat'_m5_fistula_formation') _tab (`ckd`cat'_m6_fistula_formation') _tab (`ckd`cat'_m7_fistula_formation') _tab (`ckd`cat'_m8_fistula_formation') _tab 
> (`ckd`cat'_m9_fistula_formation') _tab (`ckd`cat'_m10_fistula_formation') _tab (`ckd`cat'_m11_fistula_formation') _tab (`ckd`cat'_m12_fistula_formation') _tab (`ckd`cat'_m1_fistula_formation') _tab (`ckd`cat'_m2_fistula_formation') _tab (`ckd`cat'_m3
> _fistula_formation') _n
 19. file write tablecontent _tab ("PD insertion") _tab (`ckd`cat'_m4_pd_insertion') _tab (`ckd`cat'_m5_pd_insertion') _tab (`ckd`cat'_m6_pd_insertion') _tab (`ckd`cat'_m7_pd_insertion') _tab (`ckd`cat'_m8_pd_insertion') _tab (`ckd`cat'_m9_pd_insertion
> ') _tab (`ckd`cat'_m10_pd_insertion') _tab (`ckd`cat'_m11_pd_insertion') _tab (`ckd`cat'_m12_pd_insertion') _tab (`ckd`cat'_m1_pd_insertion') _tab (`ckd`cat'_m2_pd_insertion') _tab (`ckd`cat'_m3_pd_insertion') _n
 20. file write tablecontent _tab ("ICU days") _tab (`ckd`cat'_m4_critical_care_days') _tab (`ckd`cat'_m5_critical_care_days') _tab (`ckd`cat'_m6_critical_care_days') _tab (`ckd`cat'_m7_critical_care_days') _tab (`ckd`cat'_m8_critical_care_days') _tab 
> (`ckd`cat'_m9_critical_care_days') _tab (`ckd`cat'_m10_critical_care_days') _tab (`ckd`cat'_m11_critical_care_days') _tab (`ckd`cat'_m12_critical_care_days') _tab (`ckd`cat'_m1_critical_care_days') _tab (`ckd`cat'_m2_critical_care_days') _tab (`ckd`c
> at'_m3_critical_care_days') _n
 21. file write tablecontent _tab ("ICU patients") _tab (`ckd`cat'_m4_critical_care_patients') _tab (`ckd`cat'_m5_critical_care_patients') _tab (`ckd`cat'_m6_critical_care_patients') _tab (`ckd`cat'_m7_critical_care_patients') _tab (`ckd`cat'_m8_critic
> al_care_patients') _tab (`ckd`cat'_m9_critical_care_patients') _tab (`ckd`cat'_m10_critical_care_patients') _tab (`ckd`cat'_m11_critical_care_patients') _tab (`ckd`cat'_m12_critical_care_patients') _tab (`ckd`cat'_m1_critical_care_patients') _tab (`c
> kd`cat'_m2_critical_care_patients') _tab (`ckd`cat'_m3_critical_care_patients') _n
 22. file write tablecontent _tab ("ED days") _tab (`ckd`cat'_m4_emergency_days') _tab (`ckd`cat'_m5_emergency_days') _tab (`ckd`cat'_m6_emergency_days') _tab (`ckd`cat'_m7_emergency_days') _tab (`ckd`cat'_m8_emergency_days') _tab (`ckd`cat'_m9_emergen
> cy_days') _tab (`ckd`cat'_m10_emergency_days') _tab (`ckd`cat'_m11_emergency_days') _tab (`ckd`cat'_m12_emergency_days') _tab (`ckd`cat'_m1_emergency_days') _tab (`ckd`cat'_m2_emergency_days') _tab (`ckd`cat'_m3_emergency_days') _n
 23. file write tablecontent _tab ("OPD appts") _tab (`ckd`cat'_m4_op_appts') _tab (`ckd`cat'_m5_op_appts') _tab (`ckd`cat'_m6_op_appts') _tab (`ckd`cat'_m7_op_appts') _tab (`ckd`cat'_m8_op_appts') _tab (`ckd`cat'_m9_op_appts') _tab (`ckd`cat'_m10_op_a
> ppts') _tab (`ckd`cat'_m11_op_appts') _tab (`ckd`cat'_m12_op_appts') _tab (`ckd`cat'_m1_op_appts') _tab (`ckd`cat'_m2_op_appts') _tab (`ckd`cat'_m3_op_appts') _n
 24. file write tablecontent _tab ("Neph appts") _tab (`ckd`cat'_m4_neph_appts') _tab (`ckd`cat'_m5_neph_appts') _tab (`ckd`cat'_m6_neph_appts') _tab (`ckd`cat'_m7_neph_appts') _tab (`ckd`cat'_m8_neph_appts') _tab (`ckd`cat'_m9_neph_appts') _tab (`ckd`
> cat'_m10_neph_appts') _tab (`ckd`cat'_m11_neph_appts') _tab (`ckd`cat'_m12_neph_appts') _tab (`ckd`cat'_m1_neph_appts') _tab (`ckd`cat'_m2_neph_appts') _tab (`ckd`cat'_m3_neph_appts') _n
 25. file write tablecontent _tab ("Tx appts") _tab (`ckd`cat'_m4_tx_appts') _tab (`ckd`cat'_m5_tx_appts') _tab (`ckd`cat'_m6_tx_appts') _tab (`ckd`cat'_m7_tx_appts') _tab (`ckd`cat'_m8_tx_appts') _tab (`ckd`cat'_m9_tx_appts') _tab (`ckd`cat'_m10_tx_ap
> pts') _tab (`ckd`cat'_m11_tx_appts') _tab (`ckd`cat'_m12_tx_appts') _tab (`ckd`cat'_m1_tx_appts') _tab (`ckd`cat'_m2_tx_appts') _tab (`ckd`cat'_m3_tx_appts') _n
 26. file write tablecontent _tab ("GP interactions") _tab (`ckd`cat'_m4_gp_interactions') _tab (`ckd`cat'_m5_gp_interactions') _tab (`ckd`cat'_m6_gp_interactions') _tab (`ckd`cat'_m7_gp_interactions') _tab (`ckd`cat'_m8_gp_interactions') _tab (`ckd`ca
> t'_m9_gp_interactions') _tab (`ckd`cat'_m10_gp_interactions') _tab (`ckd`cat'_m11_gp_interactions') _tab (`ckd`cat'_m12_gp_interactions') _tab (`ckd`cat'_m1_gp_interactions') _tab (`ckd`cat'_m2_gp_interactions') _tab (`ckd`cat'_m3_gp_interactions') _
> n
 27. file write tablecontent _tab ("BP measurements") _tab (`ckd`cat'_m4_blood_pressure') _tab (`ckd`cat'_m5_blood_pressure') _tab (`ckd`cat'_m6_blood_pressure') _tab (`ckd`cat'_m7_blood_pressure') _tab (`ckd`cat'_m8_blood_pressure') _tab (`ckd`cat'_m9
> _blood_pressure') _tab (`ckd`cat'_m10_blood_pressure') _tab (`ckd`cat'_m11_blood_pressure') _tab (`ckd`cat'_m12_blood_pressure') _tab (`ckd`cat'_m1_blood_pressure') _tab (`ckd`cat'_m2_blood_pressure') _tab (`ckd`cat'_m3_blood_pressure') _n
 28. file write tablecontent _tab ("uACR tests") _tab (`ckd`cat'_m4_albuminuria') _tab (`ckd`cat'_m5_albuminuria') _tab (`ckd`cat'_m6_albuminuria') _tab (`ckd`cat'_m7_albuminuria') _tab (`ckd`cat'_m8_albuminuria') _tab (`ckd`cat'_m9_albuminuria') _tab 
> (`ckd`cat'_m10_albuminuria') _tab (`ckd`cat'_m11_albuminuria') _tab (`ckd`cat'_m12_albuminuria') _tab (`ckd`cat'_m1_albuminuria') _tab (`ckd`cat'_m2_albuminuria') _tab (`ckd`cat'_m3_albuminuria') _n
 29. file write tablecontent _tab ("SCr tests") _tab (`ckd`cat'_m4_creatinine') _tab (`ckd`cat'_m5_creatinine') _tab (`ckd`cat'_m6_creatinine') _tab (`ckd`cat'_m7_creatinine') _tab (`ckd`cat'_m8_creatinine') _tab (`ckd`cat'_m9_creatinine') _tab (`ckd`c
> at'_m10_creatinine') _tab (`ckd`cat'_m11_creatinine') _tab (`ckd`cat'_m12_creatinine') _tab (`ckd`cat'_m1_creatinine') _tab (`ckd`cat'_m2_creatinine') _tab (`ckd`cat'_m3_creatinine') _n(2)
 30. }

. file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. clear

. import delimited ./output/2017_healthcare_use.csv
(encoding automatically selected: ISO-8859-1)
(16 vars, 90 obs)

. local columns " "N_2017" "April" "May" "June" "July" "August" "September" "October" "November" "December" "January" "February" "March" "April" "

. foreach col in `columns' {
  2. replace `col'_n=. if `col'_n<=5
  3. }
variable N_2017_n not found
r(111);

end of do-file

r(111);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. clear

. import delimited ./output/2017_healthcare_use.csv
(encoding automatically selected: ISO-8859-1)
(16 vars, 90 obs)

. local columns " "N_2017" "April" "May" "June" "July" "August" "September" "October" "November" "December" "January" "February" "March" "April" "

. foreach col in `columns' {
  2. replace `col'=. if `col'<=5
  3. }
variable N_2017 not found
r(111);

end of do-file

r(111);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. clear

. import delimited ./output/2017_healthcare_use.csv
(encoding automatically selected: ISO-8859-1)
(16 vars, 90 obs)

. 
end of do-file

. browse

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. local columns " "n_2017" "april" "may" "june" "july" "august" "september" "october" "november" "december" "january" "february" "march" "april" "

. foreach col in `columns' {
  2. replace `col'=. if `col'<=5
  3. }
(23 real changes made, 23 to missing)
(25 real changes made, 25 to missing)
(22 real changes made, 22 to missing)
(18 real changes made, 18 to missing)
(23 real changes made, 23 to missing)
(18 real changes made, 18 to missing)
(18 real changes made, 18 to missing)
(21 real changes made, 21 to missing)
(19 real changes made, 19 to missing)
(16 real changes made, 16 to missing)
(28 real changes made, 28 to missing)
(22 real changes made, 22 to missing)
(0 real changes made)
(0 real changes made)

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. file write tablecontent _tab _tab ("N_2017'") _tab ("April") _tab ("May") _tab ("June") _tab ("July") _tab ("August") _tab ("September") _tab ("October") _tab ("November") _tab ("December") _tab ("January") _tab ("February") _tab ("March") _tab _n(2)

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Disclosure minimisation
. *safecount provides a count with any counts <=5 returned at "<=5"
. *round(r(N),5) rounds counts to the nearest 5 with any counts <=5 returned as "."
. 
. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_admitted_patients m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. 
. qui safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. }
  9. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. **Populate table for each CKD group with redacted counts
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab (`ckd`cat'_m5_hospital_days') _tab (`ckd`cat'_m6_hospital_days') _tab (`ckd`cat'_m7_hospital_days') _tab (`ckd`cat'_m8_hospital_days') _tab (`ckd`cat'_m9_h
> ospital_days') _tab (`ckd`cat'_m10_hospital_days') _tab (`ckd`cat'_m11_hospital_days') _tab (`ckd`cat'_m12_hospital_days') _tab (`ckd`cat'_m1_hospital_days') _tab (`ckd`cat'_m2_hospital_days') _tab (`ckd`cat'_m3_hospital_days') _n
 17. file write tablecontent _tab ("Hospitalised patients") _tab _tab (`ckd`cat'_m4_admitted_patients') _tab (`ckd`cat'_m5_admitted_patients') _tab (`ckd`cat'_m6_admitted_patients') _tab (`ckd`cat'_m7_admitted_patients') _tab (`ckd`cat'_m8_admitted_pat
> ients') _tab (`ckd`cat'_m9_admitted_patients') _tab (`ckd`cat'_m10_admitted_patients') _tab (`ckd`cat'_m11_admitted_patients') _tab (`ckd`cat'_m12_admitted_patients') _tab (`ckd`cat'_m1_admitted_patients') _tab (`ckd`cat'_m2_admitted_patients') _tab 
> (`ckd`cat'_m3_admitted_patients') _n
 18. file write tablecontent _tab ("AVF formation") _tab _tab (`ckd`cat'_m4_fistula_formation') _tab (`ckd`cat'_m5_fistula_formation') _tab (`ckd`cat'_m6_fistula_formation') _tab (`ckd`cat'_m7_fistula_formation') _tab (`ckd`cat'_m8_fistula_formation') 
> _tab (`ckd`cat'_m9_fistula_formation') _tab (`ckd`cat'_m10_fistula_formation') _tab (`ckd`cat'_m11_fistula_formation') _tab (`ckd`cat'_m12_fistula_formation') _tab (`ckd`cat'_m1_fistula_formation') _tab (`ckd`cat'_m2_fistula_formation') _tab (`ckd`ca
> t'_m3_fistula_formation') _n
 19. file write tablecontent _tab ("PD insertion") _tab _tab (`ckd`cat'_m4_pd_insertion') _tab (`ckd`cat'_m5_pd_insertion') _tab (`ckd`cat'_m6_pd_insertion') _tab (`ckd`cat'_m7_pd_insertion') _tab (`ckd`cat'_m8_pd_insertion') _tab (`ckd`cat'_m9_pd_inse
> rtion') _tab (`ckd`cat'_m10_pd_insertion') _tab (`ckd`cat'_m11_pd_insertion') _tab (`ckd`cat'_m12_pd_insertion') _tab (`ckd`cat'_m1_pd_insertion') _tab (`ckd`cat'_m2_pd_insertion') _tab (`ckd`cat'_m3_pd_insertion') _n
 20. file write tablecontent _tab ("ICU days") _tab _tab (`ckd`cat'_m4_critical_care_days') _tab (`ckd`cat'_m5_critical_care_days') _tab (`ckd`cat'_m6_critical_care_days') _tab (`ckd`cat'_m7_critical_care_days') _tab (`ckd`cat'_m8_critical_care_days') 
> _tab (`ckd`cat'_m9_critical_care_days') _tab (`ckd`cat'_m10_critical_care_days') _tab (`ckd`cat'_m11_critical_care_days') _tab (`ckd`cat'_m12_critical_care_days') _tab (`ckd`cat'_m1_critical_care_days') _tab (`ckd`cat'_m2_critical_care_days') _tab (`
> ckd`cat'_m3_critical_care_days') _n
 21. file write tablecontent _tab ("ICU patients") _tab _tab (`ckd`cat'_m4_critical_care_patients') _tab (`ckd`cat'_m5_critical_care_patients') _tab (`ckd`cat'_m6_critical_care_patients') _tab (`ckd`cat'_m7_critical_care_patients') _tab (`ckd`cat'_m8_c
> ritical_care_patients') _tab (`ckd`cat'_m9_critical_care_patients') _tab (`ckd`cat'_m10_critical_care_patients') _tab (`ckd`cat'_m11_critical_care_patients') _tab (`ckd`cat'_m12_critical_care_patients') _tab (`ckd`cat'_m1_critical_care_patients') _ta
> b (`ckd`cat'_m2_critical_care_patients') _tab (`ckd`cat'_m3_critical_care_patients') _n
 22. file write tablecontent _tab ("ED days") _tab _tab (`ckd`cat'_m4_emergency_days') _tab (`ckd`cat'_m5_emergency_days') _tab (`ckd`cat'_m6_emergency_days') _tab (`ckd`cat'_m7_emergency_days') _tab (`ckd`cat'_m8_emergency_days') _tab (`ckd`cat'_m9_em
> ergency_days') _tab (`ckd`cat'_m10_emergency_days') _tab (`ckd`cat'_m11_emergency_days') _tab (`ckd`cat'_m12_emergency_days') _tab (`ckd`cat'_m1_emergency_days') _tab (`ckd`cat'_m2_emergency_days') _tab (`ckd`cat'_m3_emergency_days') _n
 23. file write tablecontent _tab ("OPD appts") _tab _tab (`ckd`cat'_m4_op_appts') _tab (`ckd`cat'_m5_op_appts') _tab (`ckd`cat'_m6_op_appts') _tab (`ckd`cat'_m7_op_appts') _tab (`ckd`cat'_m8_op_appts') _tab (`ckd`cat'_m9_op_appts') _tab (`ckd`cat'_m10
> _op_appts') _tab (`ckd`cat'_m11_op_appts') _tab (`ckd`cat'_m12_op_appts') _tab (`ckd`cat'_m1_op_appts') _tab (`ckd`cat'_m2_op_appts') _tab (`ckd`cat'_m3_op_appts') _n
 24. file write tablecontent _tab ("Neph appts") _tab _tab (`ckd`cat'_m4_neph_appts') _tab (`ckd`cat'_m5_neph_appts') _tab (`ckd`cat'_m6_neph_appts') _tab (`ckd`cat'_m7_neph_appts') _tab (`ckd`cat'_m8_neph_appts') _tab (`ckd`cat'_m9_neph_appts') _tab (
> `ckd`cat'_m10_neph_appts') _tab (`ckd`cat'_m11_neph_appts') _tab (`ckd`cat'_m12_neph_appts') _tab (`ckd`cat'_m1_neph_appts') _tab (`ckd`cat'_m2_neph_appts') _tab (`ckd`cat'_m3_neph_appts') _n
 25. file write tablecontent _tab ("Tx appts") _tab _tab (`ckd`cat'_m4_tx_appts') _tab (`ckd`cat'_m5_tx_appts') _tab (`ckd`cat'_m6_tx_appts') _tab (`ckd`cat'_m7_tx_appts') _tab (`ckd`cat'_m8_tx_appts') _tab (`ckd`cat'_m9_tx_appts') _tab (`ckd`cat'_m10_
> tx_appts') _tab (`ckd`cat'_m11_tx_appts') _tab (`ckd`cat'_m12_tx_appts') _tab (`ckd`cat'_m1_tx_appts') _tab (`ckd`cat'_m2_tx_appts') _tab (`ckd`cat'_m3_tx_appts') _n
 26. file write tablecontent _tab ("GP interactions") _tab _tab (`ckd`cat'_m4_gp_interactions') _tab (`ckd`cat'_m5_gp_interactions') _tab (`ckd`cat'_m6_gp_interactions') _tab (`ckd`cat'_m7_gp_interactions') _tab (`ckd`cat'_m8_gp_interactions') _tab (`c
> kd`cat'_m9_gp_interactions') _tab (`ckd`cat'_m10_gp_interactions') _tab (`ckd`cat'_m11_gp_interactions') _tab (`ckd`cat'_m12_gp_interactions') _tab (`ckd`cat'_m1_gp_interactions') _tab (`ckd`cat'_m2_gp_interactions') _tab (`ckd`cat'_m3_gp_interaction
> s') _n
 27. file write tablecontent _tab ("BP measurements") _tab _tab (`ckd`cat'_m4_blood_pressure') _tab (`ckd`cat'_m5_blood_pressure') _tab (`ckd`cat'_m6_blood_pressure') _tab (`ckd`cat'_m7_blood_pressure') _tab (`ckd`cat'_m8_blood_pressure') _tab (`ckd`ca
> t'_m9_blood_pressure') _tab (`ckd`cat'_m10_blood_pressure') _tab (`ckd`cat'_m11_blood_pressure') _tab (`ckd`cat'_m12_blood_pressure') _tab (`ckd`cat'_m1_blood_pressure') _tab (`ckd`cat'_m2_blood_pressure') _tab (`ckd`cat'_m3_blood_pressure') _n
 28. file write tablecontent _tab ("uACR tests") _tab _tab (`ckd`cat'_m4_albuminuria') _tab (`ckd`cat'_m5_albuminuria') _tab (`ckd`cat'_m6_albuminuria') _tab (`ckd`cat'_m7_albuminuria') _tab (`ckd`cat'_m8_albuminuria') _tab (`ckd`cat'_m9_albuminuria') 
> _tab (`ckd`cat'_m10_albuminuria') _tab (`ckd`cat'_m11_albuminuria') _tab (`ckd`cat'_m12_albuminuria') _tab (`ckd`cat'_m1_albuminuria') _tab (`ckd`cat'_m2_albuminuria') _tab (`ckd`cat'_m3_albuminuria') _n
 29. file write tablecontent _tab ("SCr tests") _tab _tab (`ckd`cat'_m4_creatinine') _tab (`ckd`cat'_m5_creatinine') _tab (`ckd`cat'_m6_creatinine') _tab (`ckd`cat'_m7_creatinine') _tab (`ckd`cat'_m8_creatinine') _tab (`ckd`cat'_m9_creatinine') _tab (`
> ckd`cat'_m10_creatinine') _tab (`ckd`cat'_m11_creatinine') _tab (`ckd`cat'_m12_creatinine') _tab (`ckd`cat'_m1_creatinine') _tab (`ckd`cat'_m2_creatinine') _tab (`ckd`cat'_m3_creatinine') _n(2)
 30. }

. file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. clear

. import delimited ./output/2017_healthcare_use.csv
(encoding automatically selected: ISO-8859-1)
(16 vars, 90 obs)

. local columns " "n_2017" "april" "may" "june" "july" "august" "september" "october" "november" "december" "january" "february" "march" "april" "

. foreach col in `columns' {
  2. replace `col'=. if `col'<=5
  3. }
(0 real changes made)
(23 real changes made, 23 to missing)
(25 real changes made, 25 to missing)
(22 real changes made, 22 to missing)
(18 real changes made, 18 to missing)
(23 real changes made, 23 to missing)
(18 real changes made, 18 to missing)
(18 real changes made, 18 to missing)
(21 real changes made, 21 to missing)
(19 real changes made, 19 to missing)
(16 real changes made, 16 to missing)
(28 real changes made, 28 to missing)
(22 real changes made, 22 to missing)
(0 real changes made)

. export delimited "./output/2017_healthcare_use.csv", replace
file ./output/2017_healthcare_use.csv saved

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. file write tablecontent _tab _tab ("2017'") _tab ("April") _tab ("May") _tab ("June") _tab ("July") _tab ("August") _tab ("September") _tab ("October") _tab ("November") _tab ("December") _tab ("January") _tab ("February") _tab ("March") _tab _n(2)

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Disclosure minimisation
. *safecount provides a count with any counts <=5 returned at "<=5"
. *round(r(N),5) rounds counts to the nearest 5 with any counts <=5 returned as "."
. 
. forvalues cat = 1/6 {
  2. foreach resource of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_admitted_
> patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted_patients m3_admitted_patients m4_fist
> ula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fistula_formation m3_fistula_formation m4
> _pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_days m5_critical_care_days m6_critical_c
> are_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_days m4_critical_care_patients m5_critical_ca
> re_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_critical_care_patients m
> 3_critical_care_patients m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_
> appts m5_op_appts m6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_a
> ppts m12_neph_appts m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_
> gp_interactions m7_gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blo
> od_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m
> 10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatinine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m
> 3_creatinine {
  3. 
. qui safecount if ckd_group==`cat'
  4. local baseline_ckd`cat' = round(r(N),5)
  5. *Number/percentage of people in group with code for each outcome each month
. qui safecount if ckd_group==`cat' & `resource'==1
  6. local ckd`cat'_`resource' = round(r(N),5)
  7. local pc`cat'_`resource' = (`ckd`cat'_`resource''/`baseline_ckd`cat'')*100
  8. }
  9. local lab1: label ckd_group 1
 10. local lab2: label ckd_group 2
 11. local lab3: label ckd_group 3
 12. local lab4: label ckd_group 4
 13. local lab5: label ckd_group 5
 14. local lab6: label ckd_group 6
 15. 
. **Populate table for each CKD group with redacted counts
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 16. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab (`ckd`cat'_m5_hospital_days') _tab (`ckd`cat'_m6_hospital_days') _tab (`ckd`cat'_m7_hospital_days') _tab (`ckd`cat'_m8_hospital_days') _tab (`ckd`cat'_m9_h
> ospital_days') _tab (`ckd`cat'_m10_hospital_days') _tab (`ckd`cat'_m11_hospital_days') _tab (`ckd`cat'_m12_hospital_days') _tab (`ckd`cat'_m1_hospital_days') _tab (`ckd`cat'_m2_hospital_days') _tab (`ckd`cat'_m3_hospital_days') _n
 17. file write tablecontent _tab ("Hospitalised patients") _tab _tab (`ckd`cat'_m4_admitted_patients') _tab (`ckd`cat'_m5_admitted_patients') _tab (`ckd`cat'_m6_admitted_patients') _tab (`ckd`cat'_m7_admitted_patients') _tab (`ckd`cat'_m8_admitted_pat
> ients') _tab (`ckd`cat'_m9_admitted_patients') _tab (`ckd`cat'_m10_admitted_patients') _tab (`ckd`cat'_m11_admitted_patients') _tab (`ckd`cat'_m12_admitted_patients') _tab (`ckd`cat'_m1_admitted_patients') _tab (`ckd`cat'_m2_admitted_patients') _tab 
> (`ckd`cat'_m3_admitted_patients') _n
 18. file write tablecontent _tab ("AVF formation") _tab _tab (`ckd`cat'_m4_fistula_formation') _tab (`ckd`cat'_m5_fistula_formation') _tab (`ckd`cat'_m6_fistula_formation') _tab (`ckd`cat'_m7_fistula_formation') _tab (`ckd`cat'_m8_fistula_formation') 
> _tab (`ckd`cat'_m9_fistula_formation') _tab (`ckd`cat'_m10_fistula_formation') _tab (`ckd`cat'_m11_fistula_formation') _tab (`ckd`cat'_m12_fistula_formation') _tab (`ckd`cat'_m1_fistula_formation') _tab (`ckd`cat'_m2_fistula_formation') _tab (`ckd`ca
> t'_m3_fistula_formation') _n
 19. file write tablecontent _tab ("PD insertion") _tab _tab (`ckd`cat'_m4_pd_insertion') _tab (`ckd`cat'_m5_pd_insertion') _tab (`ckd`cat'_m6_pd_insertion') _tab (`ckd`cat'_m7_pd_insertion') _tab (`ckd`cat'_m8_pd_insertion') _tab (`ckd`cat'_m9_pd_inse
> rtion') _tab (`ckd`cat'_m10_pd_insertion') _tab (`ckd`cat'_m11_pd_insertion') _tab (`ckd`cat'_m12_pd_insertion') _tab (`ckd`cat'_m1_pd_insertion') _tab (`ckd`cat'_m2_pd_insertion') _tab (`ckd`cat'_m3_pd_insertion') _n
 20. file write tablecontent _tab ("ICU days") _tab _tab (`ckd`cat'_m4_critical_care_days') _tab (`ckd`cat'_m5_critical_care_days') _tab (`ckd`cat'_m6_critical_care_days') _tab (`ckd`cat'_m7_critical_care_days') _tab (`ckd`cat'_m8_critical_care_days') 
> _tab (`ckd`cat'_m9_critical_care_days') _tab (`ckd`cat'_m10_critical_care_days') _tab (`ckd`cat'_m11_critical_care_days') _tab (`ckd`cat'_m12_critical_care_days') _tab (`ckd`cat'_m1_critical_care_days') _tab (`ckd`cat'_m2_critical_care_days') _tab (`
> ckd`cat'_m3_critical_care_days') _n
 21. file write tablecontent _tab ("ICU patients") _tab _tab (`ckd`cat'_m4_critical_care_patients') _tab (`ckd`cat'_m5_critical_care_patients') _tab (`ckd`cat'_m6_critical_care_patients') _tab (`ckd`cat'_m7_critical_care_patients') _tab (`ckd`cat'_m8_c
> ritical_care_patients') _tab (`ckd`cat'_m9_critical_care_patients') _tab (`ckd`cat'_m10_critical_care_patients') _tab (`ckd`cat'_m11_critical_care_patients') _tab (`ckd`cat'_m12_critical_care_patients') _tab (`ckd`cat'_m1_critical_care_patients') _ta
> b (`ckd`cat'_m2_critical_care_patients') _tab (`ckd`cat'_m3_critical_care_patients') _n
 22. file write tablecontent _tab ("ED days") _tab _tab (`ckd`cat'_m4_emergency_days') _tab (`ckd`cat'_m5_emergency_days') _tab (`ckd`cat'_m6_emergency_days') _tab (`ckd`cat'_m7_emergency_days') _tab (`ckd`cat'_m8_emergency_days') _tab (`ckd`cat'_m9_em
> ergency_days') _tab (`ckd`cat'_m10_emergency_days') _tab (`ckd`cat'_m11_emergency_days') _tab (`ckd`cat'_m12_emergency_days') _tab (`ckd`cat'_m1_emergency_days') _tab (`ckd`cat'_m2_emergency_days') _tab (`ckd`cat'_m3_emergency_days') _n
 23. file write tablecontent _tab ("OPD appts") _tab _tab (`ckd`cat'_m4_op_appts') _tab (`ckd`cat'_m5_op_appts') _tab (`ckd`cat'_m6_op_appts') _tab (`ckd`cat'_m7_op_appts') _tab (`ckd`cat'_m8_op_appts') _tab (`ckd`cat'_m9_op_appts') _tab (`ckd`cat'_m10
> _op_appts') _tab (`ckd`cat'_m11_op_appts') _tab (`ckd`cat'_m12_op_appts') _tab (`ckd`cat'_m1_op_appts') _tab (`ckd`cat'_m2_op_appts') _tab (`ckd`cat'_m3_op_appts') _n
 24. file write tablecontent _tab ("Neph appts") _tab _tab (`ckd`cat'_m4_neph_appts') _tab (`ckd`cat'_m5_neph_appts') _tab (`ckd`cat'_m6_neph_appts') _tab (`ckd`cat'_m7_neph_appts') _tab (`ckd`cat'_m8_neph_appts') _tab (`ckd`cat'_m9_neph_appts') _tab (
> `ckd`cat'_m10_neph_appts') _tab (`ckd`cat'_m11_neph_appts') _tab (`ckd`cat'_m12_neph_appts') _tab (`ckd`cat'_m1_neph_appts') _tab (`ckd`cat'_m2_neph_appts') _tab (`ckd`cat'_m3_neph_appts') _n
 25. file write tablecontent _tab ("Tx appts") _tab _tab (`ckd`cat'_m4_tx_appts') _tab (`ckd`cat'_m5_tx_appts') _tab (`ckd`cat'_m6_tx_appts') _tab (`ckd`cat'_m7_tx_appts') _tab (`ckd`cat'_m8_tx_appts') _tab (`ckd`cat'_m9_tx_appts') _tab (`ckd`cat'_m10_
> tx_appts') _tab (`ckd`cat'_m11_tx_appts') _tab (`ckd`cat'_m12_tx_appts') _tab (`ckd`cat'_m1_tx_appts') _tab (`ckd`cat'_m2_tx_appts') _tab (`ckd`cat'_m3_tx_appts') _n
 26. file write tablecontent _tab ("GP interactions") _tab _tab (`ckd`cat'_m4_gp_interactions') _tab (`ckd`cat'_m5_gp_interactions') _tab (`ckd`cat'_m6_gp_interactions') _tab (`ckd`cat'_m7_gp_interactions') _tab (`ckd`cat'_m8_gp_interactions') _tab (`c
> kd`cat'_m9_gp_interactions') _tab (`ckd`cat'_m10_gp_interactions') _tab (`ckd`cat'_m11_gp_interactions') _tab (`ckd`cat'_m12_gp_interactions') _tab (`ckd`cat'_m1_gp_interactions') _tab (`ckd`cat'_m2_gp_interactions') _tab (`ckd`cat'_m3_gp_interaction
> s') _n
 27. file write tablecontent _tab ("BP measurements") _tab _tab (`ckd`cat'_m4_blood_pressure') _tab (`ckd`cat'_m5_blood_pressure') _tab (`ckd`cat'_m6_blood_pressure') _tab (`ckd`cat'_m7_blood_pressure') _tab (`ckd`cat'_m8_blood_pressure') _tab (`ckd`ca
> t'_m9_blood_pressure') _tab (`ckd`cat'_m10_blood_pressure') _tab (`ckd`cat'_m11_blood_pressure') _tab (`ckd`cat'_m12_blood_pressure') _tab (`ckd`cat'_m1_blood_pressure') _tab (`ckd`cat'_m2_blood_pressure') _tab (`ckd`cat'_m3_blood_pressure') _n
 28. file write tablecontent _tab ("uACR tests") _tab _tab (`ckd`cat'_m4_albuminuria') _tab (`ckd`cat'_m5_albuminuria') _tab (`ckd`cat'_m6_albuminuria') _tab (`ckd`cat'_m7_albuminuria') _tab (`ckd`cat'_m8_albuminuria') _tab (`ckd`cat'_m9_albuminuria') 
> _tab (`ckd`cat'_m10_albuminuria') _tab (`ckd`cat'_m11_albuminuria') _tab (`ckd`cat'_m12_albuminuria') _tab (`ckd`cat'_m1_albuminuria') _tab (`ckd`cat'_m2_albuminuria') _tab (`ckd`cat'_m3_albuminuria') _n
 29. file write tablecontent _tab ("SCr tests") _tab _tab (`ckd`cat'_m4_creatinine') _tab (`ckd`cat'_m5_creatinine') _tab (`ckd`cat'_m6_creatinine') _tab (`ckd`cat'_m7_creatinine') _tab (`ckd`cat'_m8_creatinine') _tab (`ckd`cat'_m9_creatinine') _tab (`
> ckd`cat'_m10_creatinine') _tab (`ckd`cat'_m11_creatinine') _tab (`ckd`cat'_m12_creatinine') _tab (`ckd`cat'_m1_creatinine') _tab (`ckd`cat'_m2_creatinine') _tab (`ckd`cat'_m3_creatinine') _n(2)
 30. }

. file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. clear

. import delimited ./output/2017_healthcare_use.csv
(encoding automatically selected: ISO-8859-1)
(16 vars, 90 obs)

. local columns " "n_2017" "april" "may" "june" "july" "august" "september" "october" "november" "december" "january" "february" "march" "april" "

. foreach col in `columns' {
  2. replace `col'=. if `col'<=5
  3. }
variable n_2017 not found
r(111);

end of do-file

r(111);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. file write tablecontent _tab _tab ("n_2017'") _tab ("April") _tab ("May") _tab ("June") _tab ("July") _tab ("August") _tab ("September") _tab ("October") _tab ("November") _tab ("December") _tab ("January") _tab ("February") _tab ("March") _tab _n(2)

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Extract healthcare use measures by CKD group
. *CKD group categories:
. *1 = eGFR >60 with albuminuria
. *2 = CKD 3A
. *3 = CKD 4/5 without kidney replacement therapy
. *4 = Dialysis
. *5 = Kidney transplant
. *6 = Kidney replacement therapy unknown modality
. forvalues cat = 1/6 {
  2. *Disclosure minimisation:
. *safecount provides a count with any counts <=5 returned at "<=5"
. *round(r(N),5) rounds counts to the nearest 5 with any counts <=5 returned as "."
. qui safecount if ckd_group==`cat'
  3. local baseline_ckd`cat' = round(r(N),5)
  4. *Monthly resources measures through financial year:
. *m4 = April, m5 = May... m1 = January of subsequent year
. foreach binary of varlist m4_admitted_patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted
> _patients m3_admitted_patients m4_fistula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fis
> tula_formation m3_fistula_formation m4_pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_pa
> tients m5_critical_care_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_cri
> tical_care_patients m3_critical_care_patients m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blood_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_
> blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatin
> ine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m3_creatinine {
  5. *Number of people in each CKD group coded for each binary measure each month
. qui safecount if ckd_group==`cat' & `binary'==1
  6. local ckd`cat'_`binary' = round(r(N),5)
  7. }
  8. foreach aggregate of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_critical
> _care_days m5_critical_care_days m6_critical_care_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care
> _days m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_appts m5_op_appts m
> 6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_appts m12_neph_appts
>  m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_gp_interactions m7_
> gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions {
  9. bysort ckd_group: egen total_`aggregate' = total(`aggregate')
 10. qui su total_`aggregate' if ckd_group==`cat'
 11. local ckd`cat'_`aggregate' = r(mean)
 12. 
. local lab1: label ckd_group 1
 13. local lab2: label ckd_group 2
 14. local lab3: label ckd_group 3
 15. local lab4: label ckd_group 4
 16. local lab5: label ckd_group 5
 17. local lab6: label ckd_group 6
 18. 
. **Populate table for each CKD group with redacted counts
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 19. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab (`ckd`cat'_m5_hospital_days') _tab (`ckd`cat'_m6_hospital_days') _tab (`ckd`cat'_m7_hospital_days') _tab (`ckd`cat'_m8_hospital_days') _tab (`ckd`cat'_m9_h
> ospital_days') _tab (`ckd`cat'_m10_hospital_days') _tab (`ckd`cat'_m11_hospital_days') _tab (`ckd`cat'_m12_hospital_days') _tab (`ckd`cat'_m1_hospital_days') _tab (`ckd`cat'_m2_hospital_days') _tab (`ckd`cat'_m3_hospital_days') _n
 20. file write tablecontent _tab ("Hospitalised patients") _tab _tab (`ckd`cat'_m4_admitted_patients') _tab (`ckd`cat'_m5_admitted_patients') _tab (`ckd`cat'_m6_admitted_patients') _tab (`ckd`cat'_m7_admitted_patients') _tab (`ckd`cat'_m8_admitted_pat
> ients') _tab (`ckd`cat'_m9_admitted_patients') _tab (`ckd`cat'_m10_admitted_patients') _tab (`ckd`cat'_m11_admitted_patients') _tab (`ckd`cat'_m12_admitted_patients') _tab (`ckd`cat'_m1_admitted_patients') _tab (`ckd`cat'_m2_admitted_patients') _tab 
> (`ckd`cat'_m3_admitted_patients') _n
 21. file write tablecontent _tab ("AVF formation") _tab _tab (`ckd`cat'_m4_fistula_formation') _tab (`ckd`cat'_m5_fistula_formation') _tab (`ckd`cat'_m6_fistula_formation') _tab (`ckd`cat'_m7_fistula_formation') _tab (`ckd`cat'_m8_fistula_formation') 
> _tab (`ckd`cat'_m9_fistula_formation') _tab (`ckd`cat'_m10_fistula_formation') _tab (`ckd`cat'_m11_fistula_formation') _tab (`ckd`cat'_m12_fistula_formation') _tab (`ckd`cat'_m1_fistula_formation') _tab (`ckd`cat'_m2_fistula_formation') _tab (`ckd`ca
> t'_m3_fistula_formation') _n
 22. file write tablecontent _tab ("PD insertion") _tab _tab (`ckd`cat'_m4_pd_insertion') _tab (`ckd`cat'_m5_pd_insertion') _tab (`ckd`cat'_m6_pd_insertion') _tab (`ckd`cat'_m7_pd_insertion') _tab (`ckd`cat'_m8_pd_insertion') _tab (`ckd`cat'_m9_pd_inse
> rtion') _tab (`ckd`cat'_m10_pd_insertion') _tab (`ckd`cat'_m11_pd_insertion') _tab (`ckd`cat'_m12_pd_insertion') _tab (`ckd`cat'_m1_pd_insertion') _tab (`ckd`cat'_m2_pd_insertion') _tab (`ckd`cat'_m3_pd_insertion') _n
 23. file write tablecontent _tab ("ICU days") _tab _tab (`ckd`cat'_m4_critical_care_days') _tab (`ckd`cat'_m5_critical_care_days') _tab (`ckd`cat'_m6_critical_care_days') _tab (`ckd`cat'_m7_critical_care_days') _tab (`ckd`cat'_m8_critical_care_days') 
> _tab (`ckd`cat'_m9_critical_care_days') _tab (`ckd`cat'_m10_critical_care_days') _tab (`ckd`cat'_m11_critical_care_days') _tab (`ckd`cat'_m12_critical_care_days') _tab (`ckd`cat'_m1_critical_care_days') _tab (`ckd`cat'_m2_critical_care_days') _tab (`
> ckd`cat'_m3_critical_care_days') _n
 24. file write tablecontent _tab ("ICU patients") _tab _tab (`ckd`cat'_m4_critical_care_patients') _tab (`ckd`cat'_m5_critical_care_patients') _tab (`ckd`cat'_m6_critical_care_patients') _tab (`ckd`cat'_m7_critical_care_patients') _tab (`ckd`cat'_m8_c
> ritical_care_patients') _tab (`ckd`cat'_m9_critical_care_patients') _tab (`ckd`cat'_m10_critical_care_patients') _tab (`ckd`cat'_m11_critical_care_patients') _tab (`ckd`cat'_m12_critical_care_patients') _tab (`ckd`cat'_m1_critical_care_patients') _ta
> b (`ckd`cat'_m2_critical_care_patients') _tab (`ckd`cat'_m3_critical_care_patients') _n
 25. file write tablecontent _tab ("ED days") _tab _tab (`ckd`cat'_m4_emergency_days') _tab (`ckd`cat'_m5_emergency_days') _tab (`ckd`cat'_m6_emergency_days') _tab (`ckd`cat'_m7_emergency_days') _tab (`ckd`cat'_m8_emergency_days') _tab (`ckd`cat'_m9_em
> ergency_days') _tab (`ckd`cat'_m10_emergency_days') _tab (`ckd`cat'_m11_emergency_days') _tab (`ckd`cat'_m12_emergency_days') _tab (`ckd`cat'_m1_emergency_days') _tab (`ckd`cat'_m2_emergency_days') _tab (`ckd`cat'_m3_emergency_days') _n
 26. file write tablecontent _tab ("OPD appts") _tab _tab (`ckd`cat'_m4_op_appts') _tab (`ckd`cat'_m5_op_appts') _tab (`ckd`cat'_m6_op_appts') _tab (`ckd`cat'_m7_op_appts') _tab (`ckd`cat'_m8_op_appts') _tab (`ckd`cat'_m9_op_appts') _tab (`ckd`cat'_m10
> _op_appts') _tab (`ckd`cat'_m11_op_appts') _tab (`ckd`cat'_m12_op_appts') _tab (`ckd`cat'_m1_op_appts') _tab (`ckd`cat'_m2_op_appts') _tab (`ckd`cat'_m3_op_appts') _n
 27. file write tablecontent _tab ("Neph appts") _tab _tab (`ckd`cat'_m4_neph_appts') _tab (`ckd`cat'_m5_neph_appts') _tab (`ckd`cat'_m6_neph_appts') _tab (`ckd`cat'_m7_neph_appts') _tab (`ckd`cat'_m8_neph_appts') _tab (`ckd`cat'_m9_neph_appts') _tab (
> `ckd`cat'_m10_neph_appts') _tab (`ckd`cat'_m11_neph_appts') _tab (`ckd`cat'_m12_neph_appts') _tab (`ckd`cat'_m1_neph_appts') _tab (`ckd`cat'_m2_neph_appts') _tab (`ckd`cat'_m3_neph_appts') _n
 28. file write tablecontent _tab ("Tx appts") _tab _tab (`ckd`cat'_m4_tx_appts') _tab (`ckd`cat'_m5_tx_appts') _tab (`ckd`cat'_m6_tx_appts') _tab (`ckd`cat'_m7_tx_appts') _tab (`ckd`cat'_m8_tx_appts') _tab (`ckd`cat'_m9_tx_appts') _tab (`ckd`cat'_m10_
> tx_appts') _tab (`ckd`cat'_m11_tx_appts') _tab (`ckd`cat'_m12_tx_appts') _tab (`ckd`cat'_m1_tx_appts') _tab (`ckd`cat'_m2_tx_appts') _tab (`ckd`cat'_m3_tx_appts') _n
 29. file write tablecontent _tab ("GP interactions") _tab _tab (`ckd`cat'_m4_gp_interactions') _tab (`ckd`cat'_m5_gp_interactions') _tab (`ckd`cat'_m6_gp_interactions') _tab (`ckd`cat'_m7_gp_interactions') _tab (`ckd`cat'_m8_gp_interactions') _tab (`c
> kd`cat'_m9_gp_interactions') _tab (`ckd`cat'_m10_gp_interactions') _tab (`ckd`cat'_m11_gp_interactions') _tab (`ckd`cat'_m12_gp_interactions') _tab (`ckd`cat'_m1_gp_interactions') _tab (`ckd`cat'_m2_gp_interactions') _tab (`ckd`cat'_m3_gp_interaction
> s') _n
 30. file write tablecontent _tab ("BP measurements") _tab _tab (`ckd`cat'_m4_blood_pressure') _tab (`ckd`cat'_m5_blood_pressure') _tab (`ckd`cat'_m6_blood_pressure') _tab (`ckd`cat'_m7_blood_pressure') _tab (`ckd`cat'_m8_blood_pressure') _tab (`ckd`ca
> t'_m9_blood_pressure') _tab (`ckd`cat'_m10_blood_pressure') _tab (`ckd`cat'_m11_blood_pressure') _tab (`ckd`cat'_m12_blood_pressure') _tab (`ckd`cat'_m1_blood_pressure') _tab (`ckd`cat'_m2_blood_pressure') _tab (`ckd`cat'_m3_blood_pressure') _n
 31. file write tablecontent _tab ("uACR tests") _tab _tab (`ckd`cat'_m4_albuminuria') _tab (`ckd`cat'_m5_albuminuria') _tab (`ckd`cat'_m6_albuminuria') _tab (`ckd`cat'_m7_albuminuria') _tab (`ckd`cat'_m8_albuminuria') _tab (`ckd`cat'_m9_albuminuria') 
> _tab (`ckd`cat'_m10_albuminuria') _tab (`ckd`cat'_m11_albuminuria') _tab (`ckd`cat'_m12_albuminuria') _tab (`ckd`cat'_m1_albuminuria') _tab (`ckd`cat'_m2_albuminuria') _tab (`ckd`cat'_m3_albuminuria') _n
 32. file write tablecontent _tab ("SCr tests") _tab _tab (`ckd`cat'_m4_creatinine') _tab (`ckd`cat'_m5_creatinine') _tab (`ckd`cat'_m6_creatinine') _tab (`ckd`cat'_m7_creatinine') _tab (`ckd`cat'_m8_creatinine') _tab (`ckd`cat'_m9_creatinine') _tab (`
> ckd`cat'_m10_creatinine') _tab (`ckd`cat'_m11_creatinine') _tab (`ckd`cat'_m12_creatinine') _tab (`ckd`cat'_m1_creatinine') _tab (`ckd`cat'_m2_creatinine') _tab (`ckd`cat'_m3_creatinine') _n(2)
 33. }
 34. file close tablecontent
 35. 
unexpected end of file
r(612);

end of do-file

r(612);
. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. file write tablecontent _tab _tab ("n_2017'") _tab ("April") _tab ("May") _tab ("June") _tab ("July") _tab ("August") _tab ("September") _tab ("October") _tab ("November") _tab ("December") _tab ("January") _tab ("February") _tab ("March") _tab _n(2)

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Extract healthcare use measures by CKD group
. *CKD group categories:
. *1 = eGFR >60 with albuminuria
. *2 = CKD 3A
. *3 = CKD 4/5 without kidney replacement therapy
. *4 = Dialysis
. *5 = Kidney transplant
. *6 = Kidney replacement therapy unknown modality
. forvalues cat = 1/6 {
  2. *Disclosure minimisation:
. *safecount provides a count with any counts <=5 returned at "<=5"
. *round(r(N),5) rounds counts to the nearest 5 with any counts <=5 returned as "."
. qui safecount if ckd_group==`cat'
  3. local baseline_ckd`cat' = round(r(N),5)
  4. *Monthly resources measures through financial year:
. *m4 = April, m5 = May... m1 = January of subsequent year
. foreach binary of varlist m4_admitted_patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted
> _patients m3_admitted_patients m4_fistula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fis
> tula_formation m3_fistula_formation m4_pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_pa
> tients m5_critical_care_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_cri
> tical_care_patients m3_critical_care_patients m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blood_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_
> blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatin
> ine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m3_creatinine {
  5. *Number of people in each CKD group coded for each binary measure each month
. qui safecount if ckd_group==`cat' & `binary'==1
  6. local ckd`cat'_`binary' = round(r(N),5)
  7. }
  8. foreach aggregate of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_critical
> _care_days m5_critical_care_days m6_critical_care_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care
> _days m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_appts m5_op_appts m
> 6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_appts m12_neph_appts
>  m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_gp_interactions m7_
> gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions {
  9. bysort ckd_group: egen total_`aggregate' = total(`aggregate')
 10. qui su total_`aggregate' if ckd_group==`cat'
 11. local ckd`cat'_`aggregate' = r(mean)
 12. }
 13. 
. local lab1: label ckd_group 1
 14. local lab2: label ckd_group 2
 15. local lab3: label ckd_group 3
 16. local lab4: label ckd_group 4
 17. local lab5: label ckd_group 5
 18. local lab6: label ckd_group 6
 19. 
. **Populate table for each CKD group with redacted counts
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 20. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab (`ckd`cat'_m5_hospital_days') _tab (`ckd`cat'_m6_hospital_days') _tab (`ckd`cat'_m7_hospital_days') _tab (`ckd`cat'_m8_hospital_days') _tab (`ckd`cat'_m9_h
> ospital_days') _tab (`ckd`cat'_m10_hospital_days') _tab (`ckd`cat'_m11_hospital_days') _tab (`ckd`cat'_m12_hospital_days') _tab (`ckd`cat'_m1_hospital_days') _tab (`ckd`cat'_m2_hospital_days') _tab (`ckd`cat'_m3_hospital_days') _n
 21. file write tablecontent _tab ("Hospitalised patients") _tab _tab (`ckd`cat'_m4_admitted_patients') _tab (`ckd`cat'_m5_admitted_patients') _tab (`ckd`cat'_m6_admitted_patients') _tab (`ckd`cat'_m7_admitted_patients') _tab (`ckd`cat'_m8_admitted_pat
> ients') _tab (`ckd`cat'_m9_admitted_patients') _tab (`ckd`cat'_m10_admitted_patients') _tab (`ckd`cat'_m11_admitted_patients') _tab (`ckd`cat'_m12_admitted_patients') _tab (`ckd`cat'_m1_admitted_patients') _tab (`ckd`cat'_m2_admitted_patients') _tab 
> (`ckd`cat'_m3_admitted_patients') _n
 22. file write tablecontent _tab ("AVF formation") _tab _tab (`ckd`cat'_m4_fistula_formation') _tab (`ckd`cat'_m5_fistula_formation') _tab (`ckd`cat'_m6_fistula_formation') _tab (`ckd`cat'_m7_fistula_formation') _tab (`ckd`cat'_m8_fistula_formation') 
> _tab (`ckd`cat'_m9_fistula_formation') _tab (`ckd`cat'_m10_fistula_formation') _tab (`ckd`cat'_m11_fistula_formation') _tab (`ckd`cat'_m12_fistula_formation') _tab (`ckd`cat'_m1_fistula_formation') _tab (`ckd`cat'_m2_fistula_formation') _tab (`ckd`ca
> t'_m3_fistula_formation') _n
 23. file write tablecontent _tab ("PD insertion") _tab _tab (`ckd`cat'_m4_pd_insertion') _tab (`ckd`cat'_m5_pd_insertion') _tab (`ckd`cat'_m6_pd_insertion') _tab (`ckd`cat'_m7_pd_insertion') _tab (`ckd`cat'_m8_pd_insertion') _tab (`ckd`cat'_m9_pd_inse
> rtion') _tab (`ckd`cat'_m10_pd_insertion') _tab (`ckd`cat'_m11_pd_insertion') _tab (`ckd`cat'_m12_pd_insertion') _tab (`ckd`cat'_m1_pd_insertion') _tab (`ckd`cat'_m2_pd_insertion') _tab (`ckd`cat'_m3_pd_insertion') _n
 24. file write tablecontent _tab ("ICU days") _tab _tab (`ckd`cat'_m4_critical_care_days') _tab (`ckd`cat'_m5_critical_care_days') _tab (`ckd`cat'_m6_critical_care_days') _tab (`ckd`cat'_m7_critical_care_days') _tab (`ckd`cat'_m8_critical_care_days') 
> _tab (`ckd`cat'_m9_critical_care_days') _tab (`ckd`cat'_m10_critical_care_days') _tab (`ckd`cat'_m11_critical_care_days') _tab (`ckd`cat'_m12_critical_care_days') _tab (`ckd`cat'_m1_critical_care_days') _tab (`ckd`cat'_m2_critical_care_days') _tab (`
> ckd`cat'_m3_critical_care_days') _n
 25. file write tablecontent _tab ("ICU patients") _tab _tab (`ckd`cat'_m4_critical_care_patients') _tab (`ckd`cat'_m5_critical_care_patients') _tab (`ckd`cat'_m6_critical_care_patients') _tab (`ckd`cat'_m7_critical_care_patients') _tab (`ckd`cat'_m8_c
> ritical_care_patients') _tab (`ckd`cat'_m9_critical_care_patients') _tab (`ckd`cat'_m10_critical_care_patients') _tab (`ckd`cat'_m11_critical_care_patients') _tab (`ckd`cat'_m12_critical_care_patients') _tab (`ckd`cat'_m1_critical_care_patients') _ta
> b (`ckd`cat'_m2_critical_care_patients') _tab (`ckd`cat'_m3_critical_care_patients') _n
 26. file write tablecontent _tab ("ED days") _tab _tab (`ckd`cat'_m4_emergency_days') _tab (`ckd`cat'_m5_emergency_days') _tab (`ckd`cat'_m6_emergency_days') _tab (`ckd`cat'_m7_emergency_days') _tab (`ckd`cat'_m8_emergency_days') _tab (`ckd`cat'_m9_em
> ergency_days') _tab (`ckd`cat'_m10_emergency_days') _tab (`ckd`cat'_m11_emergency_days') _tab (`ckd`cat'_m12_emergency_days') _tab (`ckd`cat'_m1_emergency_days') _tab (`ckd`cat'_m2_emergency_days') _tab (`ckd`cat'_m3_emergency_days') _n
 27. file write tablecontent _tab ("OPD appts") _tab _tab (`ckd`cat'_m4_op_appts') _tab (`ckd`cat'_m5_op_appts') _tab (`ckd`cat'_m6_op_appts') _tab (`ckd`cat'_m7_op_appts') _tab (`ckd`cat'_m8_op_appts') _tab (`ckd`cat'_m9_op_appts') _tab (`ckd`cat'_m10
> _op_appts') _tab (`ckd`cat'_m11_op_appts') _tab (`ckd`cat'_m12_op_appts') _tab (`ckd`cat'_m1_op_appts') _tab (`ckd`cat'_m2_op_appts') _tab (`ckd`cat'_m3_op_appts') _n
 28. file write tablecontent _tab ("Neph appts") _tab _tab (`ckd`cat'_m4_neph_appts') _tab (`ckd`cat'_m5_neph_appts') _tab (`ckd`cat'_m6_neph_appts') _tab (`ckd`cat'_m7_neph_appts') _tab (`ckd`cat'_m8_neph_appts') _tab (`ckd`cat'_m9_neph_appts') _tab (
> `ckd`cat'_m10_neph_appts') _tab (`ckd`cat'_m11_neph_appts') _tab (`ckd`cat'_m12_neph_appts') _tab (`ckd`cat'_m1_neph_appts') _tab (`ckd`cat'_m2_neph_appts') _tab (`ckd`cat'_m3_neph_appts') _n
 29. file write tablecontent _tab ("Tx appts") _tab _tab (`ckd`cat'_m4_tx_appts') _tab (`ckd`cat'_m5_tx_appts') _tab (`ckd`cat'_m6_tx_appts') _tab (`ckd`cat'_m7_tx_appts') _tab (`ckd`cat'_m8_tx_appts') _tab (`ckd`cat'_m9_tx_appts') _tab (`ckd`cat'_m10_
> tx_appts') _tab (`ckd`cat'_m11_tx_appts') _tab (`ckd`cat'_m12_tx_appts') _tab (`ckd`cat'_m1_tx_appts') _tab (`ckd`cat'_m2_tx_appts') _tab (`ckd`cat'_m3_tx_appts') _n
 30. file write tablecontent _tab ("GP interactions") _tab _tab (`ckd`cat'_m4_gp_interactions') _tab (`ckd`cat'_m5_gp_interactions') _tab (`ckd`cat'_m6_gp_interactions') _tab (`ckd`cat'_m7_gp_interactions') _tab (`ckd`cat'_m8_gp_interactions') _tab (`c
> kd`cat'_m9_gp_interactions') _tab (`ckd`cat'_m10_gp_interactions') _tab (`ckd`cat'_m11_gp_interactions') _tab (`ckd`cat'_m12_gp_interactions') _tab (`ckd`cat'_m1_gp_interactions') _tab (`ckd`cat'_m2_gp_interactions') _tab (`ckd`cat'_m3_gp_interaction
> s') _n
 31. file write tablecontent _tab ("BP measurements") _tab _tab (`ckd`cat'_m4_blood_pressure') _tab (`ckd`cat'_m5_blood_pressure') _tab (`ckd`cat'_m6_blood_pressure') _tab (`ckd`cat'_m7_blood_pressure') _tab (`ckd`cat'_m8_blood_pressure') _tab (`ckd`ca
> t'_m9_blood_pressure') _tab (`ckd`cat'_m10_blood_pressure') _tab (`ckd`cat'_m11_blood_pressure') _tab (`ckd`cat'_m12_blood_pressure') _tab (`ckd`cat'_m1_blood_pressure') _tab (`ckd`cat'_m2_blood_pressure') _tab (`ckd`cat'_m3_blood_pressure') _n
 32. file write tablecontent _tab ("uACR tests") _tab _tab (`ckd`cat'_m4_albuminuria') _tab (`ckd`cat'_m5_albuminuria') _tab (`ckd`cat'_m6_albuminuria') _tab (`ckd`cat'_m7_albuminuria') _tab (`ckd`cat'_m8_albuminuria') _tab (`ckd`cat'_m9_albuminuria') 
> _tab (`ckd`cat'_m10_albuminuria') _tab (`ckd`cat'_m11_albuminuria') _tab (`ckd`cat'_m12_albuminuria') _tab (`ckd`cat'_m1_albuminuria') _tab (`ckd`cat'_m2_albuminuria') _tab (`ckd`cat'_m3_albuminuria') _n
 33. file write tablecontent _tab ("SCr tests") _tab _tab (`ckd`cat'_m4_creatinine') _tab (`ckd`cat'_m5_creatinine') _tab (`ckd`cat'_m6_creatinine') _tab (`ckd`cat'_m7_creatinine') _tab (`ckd`cat'_m8_creatinine') _tab (`ckd`cat'_m9_creatinine') _tab (`
> ckd`cat'_m10_creatinine') _tab (`ckd`cat'_m11_creatinine') _tab (`ckd`cat'_m12_creatinine') _tab (`ckd`cat'_m1_creatinine') _tab (`ckd`cat'_m2_creatinine') _tab (`ckd`cat'_m3_creatinine') _n(2)
 34. }
variable total_m4_hospital_days already defined
r(110);

end of do-file

r(110);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cd ckd-healthcare-use
unable to change to ckd-healthcare-use
r(170);

end of do-file

r(170);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. capture noisily import delimited ./output/2017_ckd.csv, clear
(encoding automatically selected: ISO-8859-1)
(7 vars, 20,947 obs)

. tempfile 2017_ckd

. save 2017_ckd, replace
(file 2017_ckd.dta not found)
file 2017_ckd.dta saved

. capture noisily import delimited ./output/input_2017_ckd_complete.csv, clear
(encoding automatically selected: ISO-8859-1)
(220 vars, 50,000 obs)

. merge 1:1 patient_id using 2017_ckd

    Result                      Number of obs
    -----------------------------------------
    Not matched                        66,853
        from master                    47,953  (_merge==1)
        from using                     18,900  (_merge==2)

    Matched                             2,047  (_merge==3)
    -----------------------------------------

. keep if _merge==3
(66,853 observations deleted)

. drop _merge

. tempfile 2017_ckd_complete

. save 2017_ckd_complete, replace
(file 2017_ckd_complete.dta not found)
file 2017_ckd_complete.dta saved

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. * CKD stage classification
. foreach var of varlist  dialysis_baseline_primary_care  ///
>                                                 dialysis_baseline_icd_10                ///
>                                                 dialysis_baseline_opcs_4                ///
>                                                 dialysis_baseline_date                  ///
>                                                 kt_baseline_primary_care                ///
>                                                 kt_baseline_icd_10                              ///
>                                                 kt_baseline_opcs_4                              ///
>                                                 kidney_transplant_baseline_date {
  2.         drop `var'
  3.         }

. tab modality_baseline, m

modality_baseline |      Freq.     Percent        Cum.
------------------+-----------------------------------
         Dialysis |        210       10.26       10.26
Kidney transplant |        176        8.60       18.86
 Modality unclear |         34        1.66       20.52
          Pre KRT |      1,627       79.48      100.00
------------------+-----------------------------------
            Total |      2,047      100.00

. egen ckd_group = cut(baseline_egfr), at(0, 30, 60, 5000)
(823 missing values generated)

. drop baseline_egfr

. recode ckd_group 0=3 30=2 60=1
(1224 changes made to ckd_group)

. replace ckd_group = 4 if modality_baseline=="Dialysis"
(210 real changes made)

. replace ckd_group = 5 if modality_baseline=="Kidney transplant"
(176 real changes made)

. replace ckd_group = 6 if modality_baseline=="Modality unclear"
(34 real changes made)

. label define ckd_group 1 "Albuminuria" 2 "CKD stage 3" 3 "CKD stage 4/5" 4 "Dialysis" 5 "Transplant" 6 "KRT unclear"

. label values ckd_group ckd_group

. label var ckd_group "CKD group"

. tab ckd_group modality_baseline

              |              modality_baseline
    CKD group |  Dialysis  Kidney ..  Modalit..    Pre KRT |     Total
--------------+--------------------------------------------+----------
  Albuminuria |         0          0          0        608 |       608 
  CKD stage 3 |         0          0          0        350 |       350 
CKD stage 4/5 |         0          0          0         15 |        15 
     Dialysis |       210          0          0          0 |       210 
   Transplant |         0        176          0          0 |       176 
  KRT unclear |         0          0         34          0 |        34 
--------------+--------------------------------------------+----------
        Total |       210        176         34        973 |     1,393 

. 
. * Dialysis & kidney transplant outcome classification
. foreach var of varlist  dialysis_outcome_primary_care   ///
>                                                 dialysis_outcome_icd_10                 ///
>                                                 dialysis_outcome_opcs_4                 ///
>                                                 dialysis_outcome_date                   ///
>                                                 kt_outcome_primary_care                 ///
>                                                 kt_outcome_icd_10                               ///
>                                                 kt_outcome_opcs_4                               ///
>                                                 kidney_transplant_outcome_date  ///
>                                                 died                                                    {
  2.         drop `var'
  3.         }

. tab ckd_group modality_outcome, m

              |                    modality_outcome
    CKD group |  Deceased   Dialysis  Kidney ..  Modalit..  Unchanged |     Total
--------------+-------------------------------------------------------+----------
  Albuminuria |        52         37         18          3        498 |       608 
  CKD stage 3 |        29         14         12          4        291 |       350 
CKD stage 4/5 |         0          1          0          0         14 |        15 
     Dialysis |        21         11          7          2        169 |       210 
   Transplant |        17          8          4          1        146 |       176 
  KRT unclear |         4          0          2          2         26 |        34 
            . |        71         35         30          5        513 |       654 
--------------+-------------------------------------------------------+----------
        Total |       194        106         73         17      1,657 |     2,047 

. 
. * eGFR outcome classification based on updated mean eGFR over previous 18 months by the end of year
. gen sex = 1 if male == "Male"
(1,056 missing values generated)

. replace sex = 0 if male == "Female"
(1,056 real changes made)

. label define sex 0"Female" 1"Male"

. label values sex sex

. replace creatinine_outcome = . if !inrange(creatinine_outcome, 20, 3000)
(894 real changes made, 894 to missing)

. gen mgdl_creatinine_outcome = creatinine_outcome/88.4
(894 missing values generated)

. gen min_creatinine_outcome=.
(2,047 missing values generated)

. replace min_creatinine_outcome = mgdl_creatinine_outcome/0.7 if sex==0
(601 real changes made)

. replace min_creatinine_outcome = mgdl_creatinine_outcome/0.9 if sex==1
(552 real changes made)

. replace min_creatinine_outcome = min_creatinine_outcome^-0.329  if sex==0
(601 real changes made)

. replace min_creatinine_outcome = min_creatinine_outcome^-0.411  if sex==1
(552 real changes made)

. replace min_creatinine_outcome = 1 if min_creatinine_outcome<1
(747 real changes made)

. gen max_creatinine_outcome=.
(2,047 missing values generated)

. replace max_creatinine_outcome = mgdl_creatinine_outcome/0.7 if sex==0
(601 real changes made)

. replace max_creatinine_outcome = mgdl_creatinine_outcome/0.9 if sex==1
(552 real changes made)

. replace max_creatinine_outcome = max_creatinine_outcome^-1.209
(1,153 real changes made)

. replace max_creatinine_outcome = 1 if max_creatinine_outcome>1
(1,300 real changes made)

. gen egfr_outcome = min_creatinine_outcome*max_creatinine_outcome*141
(894 missing values generated)

. replace egfr_outcome = egfr_outcome*(0.993^age)
(1,153 real changes made)

. replace egfr_outcome = egfr_outcome*1.018 if sex==0
(601 real changes made)

. drop creatinine_outcome

. drop mgdl_creatinine_outcome

. drop min_creatinine_outcome

. drop max_creatinine_outcome

. egen egfr_end = cut(egfr_outcome), at(0, 30, 60, 5000)
(894 missing values generated)

. drop egfr_outcome

. recode egfr_end 0=3 30=2 60=1
(1153 changes made to egfr_end)

. label define egfr_end 1 "60" 2 "30-59" 3 "<30"

. label values egfr_end egfr_end

. label var egfr_end "Final eGFR"

. gen ckd_progression = 0

. replace ckd_progression = 1 if egfr_end==2 & ckd_group==1
(73 real changes made)

. replace ckd_progression = 2 if egfr_end==3 & ckd_group==1
(5 real changes made)

. replace ckd_progression = 2 if egfr_end==3 & ckd_group==2
(4 real changes made)

. replace ckd_progression = 3 if modality_outcome=="Dialysis"
(106 real changes made)

. replace ckd_progression = 4 if modality_outcome=="Kidney transplant"
(73 real changes made)

. replace ckd_progression = 5 if modality_outcome=="Modality unclear"
(17 real changes made)

. replace ckd_progression = 6 if modality_outcome=="Deceased"
(194 real changes made)

. label define ckd_progression 0 "No progression" 1 "CKD 3" 2 "CKD 4/5 pre-KRT" 3 "Dialysis" 4 "Kidney transplant" 5 "KRT unclear modality" 6 "Deceased"

. label values ckd_progression ckd_progression

. label var ckd_progression "CKD progression"

. tab ckd_progression, m

     CKD progression |      Freq.     Percent        Cum.
---------------------+-----------------------------------
      No progression |      1,592       77.77       77.77
               CKD 3 |         59        2.88       80.65
     CKD 4/5 pre-KRT |          6        0.29       80.95
            Dialysis |        106        5.18       86.13
   Kidney transplant |         73        3.57       89.69
KRT unclear modality |         17        0.83       90.52
            Deceased |        194        9.48      100.00
---------------------+-----------------------------------
               Total |      2,047      100.00

. 
. foreach aggregate of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_critical_ca
> re_days m5_critical_care_days m6_critical_care_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care_da
> ys m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_appts m5_op_appts m6_o
> p_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_appts m12_neph_appts m1
> _neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_gp_interactions m7_gp_
> interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions {
  2. bysort ckd_group: egen total_`aggregate' = total(`aggregate')
  3. }

. 
. **Potential effect modifiers
. * Ethnicity
. * 1 = White ethnicities (white British, white Irish, with other)
. * 2 = Mixed ethnicities (white & black Caribbean, white & black African, white & Asian, other mixed ethnicities)
. * 3 = South Asian ethnicities (Indian, Pakistani, Bangladeshi, other South Asian)
. * 4 = Black ethnicities (black Caribbean, black African, other black)
. * 5 = Other ethnicities (Chinese, all other ethnicities)
. * . = Unknown ethnicity
. replace ethnicity = . if ethnicity==.
(0 real changes made)

. replace ethnicity=6 if ethnicity==2
(74 real changes made)

. replace ethnicity=2 if ethnicity==3
(72 real changes made)

. replace ethnicity=3 if ethnicity==4
(77 real changes made)

. replace ethnicity=4 if ethnicity==6
(74 real changes made)

. replace ethnicity=6 if ethnicity==.
(528 real changes made)

. label define ethnicity  1 "White"                                       ///
>                                                 2 "South Asian"                         ///                                             
>                                                 3 "Black"                                       ///
>                                                 4 "Mixed"                                       ///
>                                                 5 "Other"                                       ///
>                                                 6 "Unknown"     

. label values ethnicity ethnicity

. 
. * Index of multiple deprivation
. * Ordered 1-5 from most deprived to least deprived
. label define imd 1 "1 Most deprived" 2 "2" 3 "3" 4 "4" 5 "5 Least deprived"

. label values imd imd

. 
. * Region
. rename region region_string

. gen region = 1 if region_string=="East Midlands"
(1,865 missing values generated)

. replace region = 2 if region_string=="East"
(198 real changes made)

. replace region = 3 if region_string=="London"
(435 real changes made)

. replace region = 4 if region_string=="North East"
(223 real changes made)

. replace region = 5 if region_string=="North West"
(203 real changes made)

. replace region = 6 if region_string=="South East"
(198 real changes made)

. replace region = 7 if region_string=="South West"
(195 real changes made)

. replace region = 8 if region_string=="West Midlands"
(194 real changes made)

. replace region = 9 if region_string=="Yorkshire and The Humber"
(219 real changes made)

. label define region     1 "East Midlands"                                       ///
>                                                 2 "East"                                                        ///
>                                                 3 "London"                                                      ///
>                                                 4 "North East"                                          ///
>                                                 5 "North West"                                          ///
>                                                 6 "South East"                                          ///
>                                                 7 "South West"                                          ///
>                                                 8 "West Midlands"                                       ///
>                                                 9 "Yorkshire and The Humber"            

. label values region region

. label var region "Region"

. 
. * Urban/rural
. replace rural_urban=. if rural_urban<1|rural_urban>8
(0 real changes made)

. label define rural_urban 1 "Urban major conurbation"                                            ///
>                                                  2 "Urban minor conurbation"                                            ///
>                                                  3 "Urban city and town"                                                        ///
>                                                  4 "Urban city and town in a sparse setting"            ///
>                                                  5 "Rural town and fringe"                                                      ///
>                                                  6 "Rural town and fringe in a sparse setting"          ///
>                                                  7 "Rural village and dispersed"                                        ///
>                                                  8 "Rural village and dispersed in a sparse setting"

. label values rural_urban rural_urban

. * Urban (binary)
. * Urban = 1-4 + missing, Rural = 5-8
. generate urban=.
(2,047 missing values generated)

. replace urban=1 if rural_urban<=4|rural_urban==.
(781 real changes made)

. replace urban=0 if rural_urban>4 & rural_urban!=.
(1,266 real changes made)

. label var urban "Urban/rural"

. label define urban 0 "Rural" 1 "Urban"

. label values urban urban

. drop rural_urban

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. save "./output/2017_ckd_complete.dta", replace
file ./output/2017_ckd_complete.dta saved

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. cap file close tablecontent

. file open tablecontent using ./output/2017_healthcare_use.csv, write text replace

. file write tablecontent _tab _tab ("n_2017'") _tab ("April") _tab ("May") _tab ("June") _tab ("July") _tab ("August") _tab ("September") _tab ("October") _tab ("November") _tab ("December") _tab ("January") _tab ("February") _tab ("March") _tab _n(2)

. use ./output/2017_ckd_complete.dta, clear

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. **Extract healthcare use measures by CKD group
. *CKD group categories:
. *1 = eGFR >60 with albuminuria
. *2 = CKD 3A
. *3 = CKD 4/5 without kidney replacement therapy
. *4 = Dialysis
. *5 = Kidney transplant
. *6 = Kidney replacement therapy unknown modality
. forvalues cat = 1/6 {
  2. *Disclosure minimisation:
. *safecount provides a count with any counts <=5 returned at "<=5"
. *round(r(N),5) rounds counts to the nearest 5 with any counts <=5 returned as "."
. qui safecount if ckd_group==`cat'
  3. local baseline_ckd`cat' = round(r(N),5)
  4. *Monthly resources measures through financial year:
. *m4 = April, m5 = May... m1 = January of subsequent year
. foreach binary of varlist m4_admitted_patients m5_admitted_patients m6_admitted_patients m7_admitted_patients m8_admitted_patients m9_admitted_patients m10_admitted_patients m11_admitted_patients m12_admitted_patients m1_admitted_patients m2_admitted
> _patients m3_admitted_patients m4_fistula_formation m5_fistula_formation m6_fistula_formation m7_fistula_formation m8_fistula_formation m9_fistula_formation m10_fistula_formation m11_fistula_formation m12_fistula_formation m1_fistula_formation m2_fis
> tula_formation m3_fistula_formation m4_pd_insertion m5_pd_insertion m6_pd_insertion m7_pd_insertion m8_pd_insertion m9_pd_insertion m10_pd_insertion m11_pd_insertion m12_pd_insertion m1_pd_insertion m2_pd_insertion m3_pd_insertion m4_critical_care_pa
> tients m5_critical_care_patients m6_critical_care_patients m7_critical_care_patients m8_critical_care_patients m9_critical_care_patients m10_critical_care_patients m11_critical_care_patients m12_critical_care_patients m1_critical_care_patients m2_cri
> tical_care_patients m3_critical_care_patients m4_blood_pressure m5_blood_pressure m6_blood_pressure m7_blood_pressure m8_blood_pressure m9_blood_pressure m10_blood_pressure m11_blood_pressure m12_blood_pressure m1_blood_pressure m2_blood_pressure m3_
> blood_pressure m4_albuminuria m5_albuminuria m6_albuminuria m7_albuminuria m8_albuminuria m9_albuminuria m10_albuminuria m11_albuminuria m12_albuminuria m1_albuminuria m2_albuminuria m3_albuminuria m4_creatinine m5_creatinine m6_creatinine m7_creatin
> ine m8_creatinine m9_creatinine m10_creatinine m11_creatinine m12_creatinine m1_creatinine m2_creatinine m3_creatinine {
  5. *Number of people in each CKD group coded for each binary measure each month
. qui safecount if ckd_group==`cat' & `binary'==1
  6. local ckd`cat'_`binary' = round(r(N),5)
  7. }
  8. foreach aggregate of varlist m4_hospital_days m5_hospital_days m6_hospital_days m7_hospital_days m8_hospital_days m9_hospital_days m10_hospital_days m11_hospital_days m12_hospital_days m1_hospital_days m2_hospital_days m3_hospital_days m4_critical
> _care_days m5_critical_care_days m6_critical_care_days m7_critical_care_days m8_critical_care_days m9_critical_care_days m10_critical_care_days m11_critical_care_days m12_critical_care_days m1_critical_care_days m2_critical_care_days m3_critical_care
> _days m4_emergency_days m5_emergency_days m6_emergency_days m7_emergency_days m8_emergency_days m9_emergency_days m10_emergency_days m11_emergency_days m12_emergency_days m1_emergency_days m2_emergency_days m3_emergency_days m4_op_appts m5_op_appts m
> 6_op_appts m7_op_appts m8_op_appts m9_op_appts m10_op_appts m11_op_appts m12_op_appts m1_op_appts m2_op_appts m3_op_appts m4_neph_appts m5_neph_appts m6_neph_appts m7_neph_appts m8_neph_appts m9_neph_appts m10_neph_appts m11_neph_appts m12_neph_appts
>  m1_neph_appts m2_neph_appts m3_neph_appts m4_tx_appts m5_tx_appts m6_tx_appts m7_tx_appts m8_tx_appts m9_tx_appts m10_tx_appts m11_tx_appts m12_tx_appts m1_tx_appts m2_tx_appts m3_tx_appts m4_gp_interactions m5_gp_interactions m6_gp_interactions m7_
> gp_interactions m8_gp_interactions m9_gp_interactions m10_gp_interactions m11_gp_interactions m12_gp_interactions m1_gp_interactions m2_gp_interactions m3_gp_interactions {
  9. qui su total_`aggregate' if ckd_group==`cat'
 10. local ckd`cat'_`aggregate' = r(mean)
 11. }
 12. 
. local lab1: label ckd_group 1
 13. local lab2: label ckd_group 2
 14. local lab3: label ckd_group 3
 15. local lab4: label ckd_group 4
 16. local lab5: label ckd_group 5
 17. local lab6: label ckd_group 6
 18. 
. **Populate table for each CKD group with redacted counts
. file write tablecontent ("`lab`cat''") _tab _tab (`baseline_ckd`cat'') _n
 19. file write tablecontent _tab ("Hospital days") _tab _tab (`ckd`cat'_m4_hospital_days') _tab (`ckd`cat'_m5_hospital_days') _tab (`ckd`cat'_m6_hospital_days') _tab (`ckd`cat'_m7_hospital_days') _tab (`ckd`cat'_m8_hospital_days') _tab (`ckd`cat'_m9_h
> ospital_days') _tab (`ckd`cat'_m10_hospital_days') _tab (`ckd`cat'_m11_hospital_days') _tab (`ckd`cat'_m12_hospital_days') _tab (`ckd`cat'_m1_hospital_days') _tab (`ckd`cat'_m2_hospital_days') _tab (`ckd`cat'_m3_hospital_days') _n
 20. file write tablecontent _tab ("Hospitalised patients") _tab _tab (`ckd`cat'_m4_admitted_patients') _tab (`ckd`cat'_m5_admitted_patients') _tab (`ckd`cat'_m6_admitted_patients') _tab (`ckd`cat'_m7_admitted_patients') _tab (`ckd`cat'_m8_admitted_pat
> ients') _tab (`ckd`cat'_m9_admitted_patients') _tab (`ckd`cat'_m10_admitted_patients') _tab (`ckd`cat'_m11_admitted_patients') _tab (`ckd`cat'_m12_admitted_patients') _tab (`ckd`cat'_m1_admitted_patients') _tab (`ckd`cat'_m2_admitted_patients') _tab 
> (`ckd`cat'_m3_admitted_patients') _n
 21. file write tablecontent _tab ("AVF formation") _tab _tab (`ckd`cat'_m4_fistula_formation') _tab (`ckd`cat'_m5_fistula_formation') _tab (`ckd`cat'_m6_fistula_formation') _tab (`ckd`cat'_m7_fistula_formation') _tab (`ckd`cat'_m8_fistula_formation') 
> _tab (`ckd`cat'_m9_fistula_formation') _tab (`ckd`cat'_m10_fistula_formation') _tab (`ckd`cat'_m11_fistula_formation') _tab (`ckd`cat'_m12_fistula_formation') _tab (`ckd`cat'_m1_fistula_formation') _tab (`ckd`cat'_m2_fistula_formation') _tab (`ckd`ca
> t'_m3_fistula_formation') _n
 22. file write tablecontent _tab ("PD insertion") _tab _tab (`ckd`cat'_m4_pd_insertion') _tab (`ckd`cat'_m5_pd_insertion') _tab (`ckd`cat'_m6_pd_insertion') _tab (`ckd`cat'_m7_pd_insertion') _tab (`ckd`cat'_m8_pd_insertion') _tab (`ckd`cat'_m9_pd_inse
> rtion') _tab (`ckd`cat'_m10_pd_insertion') _tab (`ckd`cat'_m11_pd_insertion') _tab (`ckd`cat'_m12_pd_insertion') _tab (`ckd`cat'_m1_pd_insertion') _tab (`ckd`cat'_m2_pd_insertion') _tab (`ckd`cat'_m3_pd_insertion') _n
 23. file write tablecontent _tab ("ICU days") _tab _tab (`ckd`cat'_m4_critical_care_days') _tab (`ckd`cat'_m5_critical_care_days') _tab (`ckd`cat'_m6_critical_care_days') _tab (`ckd`cat'_m7_critical_care_days') _tab (`ckd`cat'_m8_critical_care_days') 
> _tab (`ckd`cat'_m9_critical_care_days') _tab (`ckd`cat'_m10_critical_care_days') _tab (`ckd`cat'_m11_critical_care_days') _tab (`ckd`cat'_m12_critical_care_days') _tab (`ckd`cat'_m1_critical_care_days') _tab (`ckd`cat'_m2_critical_care_days') _tab (`
> ckd`cat'_m3_critical_care_days') _n
 24. file write tablecontent _tab ("ICU patients") _tab _tab (`ckd`cat'_m4_critical_care_patients') _tab (`ckd`cat'_m5_critical_care_patients') _tab (`ckd`cat'_m6_critical_care_patients') _tab (`ckd`cat'_m7_critical_care_patients') _tab (`ckd`cat'_m8_c
> ritical_care_patients') _tab (`ckd`cat'_m9_critical_care_patients') _tab (`ckd`cat'_m10_critical_care_patients') _tab (`ckd`cat'_m11_critical_care_patients') _tab (`ckd`cat'_m12_critical_care_patients') _tab (`ckd`cat'_m1_critical_care_patients') _ta
> b (`ckd`cat'_m2_critical_care_patients') _tab (`ckd`cat'_m3_critical_care_patients') _n
 25. file write tablecontent _tab ("ED days") _tab _tab (`ckd`cat'_m4_emergency_days') _tab (`ckd`cat'_m5_emergency_days') _tab (`ckd`cat'_m6_emergency_days') _tab (`ckd`cat'_m7_emergency_days') _tab (`ckd`cat'_m8_emergency_days') _tab (`ckd`cat'_m9_em
> ergency_days') _tab (`ckd`cat'_m10_emergency_days') _tab (`ckd`cat'_m11_emergency_days') _tab (`ckd`cat'_m12_emergency_days') _tab (`ckd`cat'_m1_emergency_days') _tab (`ckd`cat'_m2_emergency_days') _tab (`ckd`cat'_m3_emergency_days') _n
 26. file write tablecontent _tab ("OPD appts") _tab _tab (`ckd`cat'_m4_op_appts') _tab (`ckd`cat'_m5_op_appts') _tab (`ckd`cat'_m6_op_appts') _tab (`ckd`cat'_m7_op_appts') _tab (`ckd`cat'_m8_op_appts') _tab (`ckd`cat'_m9_op_appts') _tab (`ckd`cat'_m10
> _op_appts') _tab (`ckd`cat'_m11_op_appts') _tab (`ckd`cat'_m12_op_appts') _tab (`ckd`cat'_m1_op_appts') _tab (`ckd`cat'_m2_op_appts') _tab (`ckd`cat'_m3_op_appts') _n
 27. file write tablecontent _tab ("Neph appts") _tab _tab (`ckd`cat'_m4_neph_appts') _tab (`ckd`cat'_m5_neph_appts') _tab (`ckd`cat'_m6_neph_appts') _tab (`ckd`cat'_m7_neph_appts') _tab (`ckd`cat'_m8_neph_appts') _tab (`ckd`cat'_m9_neph_appts') _tab (
> `ckd`cat'_m10_neph_appts') _tab (`ckd`cat'_m11_neph_appts') _tab (`ckd`cat'_m12_neph_appts') _tab (`ckd`cat'_m1_neph_appts') _tab (`ckd`cat'_m2_neph_appts') _tab (`ckd`cat'_m3_neph_appts') _n
 28. file write tablecontent _tab ("Tx appts") _tab _tab (`ckd`cat'_m4_tx_appts') _tab (`ckd`cat'_m5_tx_appts') _tab (`ckd`cat'_m6_tx_appts') _tab (`ckd`cat'_m7_tx_appts') _tab (`ckd`cat'_m8_tx_appts') _tab (`ckd`cat'_m9_tx_appts') _tab (`ckd`cat'_m10_
> tx_appts') _tab (`ckd`cat'_m11_tx_appts') _tab (`ckd`cat'_m12_tx_appts') _tab (`ckd`cat'_m1_tx_appts') _tab (`ckd`cat'_m2_tx_appts') _tab (`ckd`cat'_m3_tx_appts') _n
 29. file write tablecontent _tab ("GP interactions") _tab _tab (`ckd`cat'_m4_gp_interactions') _tab (`ckd`cat'_m5_gp_interactions') _tab (`ckd`cat'_m6_gp_interactions') _tab (`ckd`cat'_m7_gp_interactions') _tab (`ckd`cat'_m8_gp_interactions') _tab (`c
> kd`cat'_m9_gp_interactions') _tab (`ckd`cat'_m10_gp_interactions') _tab (`ckd`cat'_m11_gp_interactions') _tab (`ckd`cat'_m12_gp_interactions') _tab (`ckd`cat'_m1_gp_interactions') _tab (`ckd`cat'_m2_gp_interactions') _tab (`ckd`cat'_m3_gp_interaction
> s') _n
 30. file write tablecontent _tab ("BP measurements") _tab _tab (`ckd`cat'_m4_blood_pressure') _tab (`ckd`cat'_m5_blood_pressure') _tab (`ckd`cat'_m6_blood_pressure') _tab (`ckd`cat'_m7_blood_pressure') _tab (`ckd`cat'_m8_blood_pressure') _tab (`ckd`ca
> t'_m9_blood_pressure') _tab (`ckd`cat'_m10_blood_pressure') _tab (`ckd`cat'_m11_blood_pressure') _tab (`ckd`cat'_m12_blood_pressure') _tab (`ckd`cat'_m1_blood_pressure') _tab (`ckd`cat'_m2_blood_pressure') _tab (`ckd`cat'_m3_blood_pressure') _n
 31. file write tablecontent _tab ("uACR tests") _tab _tab (`ckd`cat'_m4_albuminuria') _tab (`ckd`cat'_m5_albuminuria') _tab (`ckd`cat'_m6_albuminuria') _tab (`ckd`cat'_m7_albuminuria') _tab (`ckd`cat'_m8_albuminuria') _tab (`ckd`cat'_m9_albuminuria') 
> _tab (`ckd`cat'_m10_albuminuria') _tab (`ckd`cat'_m11_albuminuria') _tab (`ckd`cat'_m12_albuminuria') _tab (`ckd`cat'_m1_albuminuria') _tab (`ckd`cat'_m2_albuminuria') _tab (`ckd`cat'_m3_albuminuria') _n
 32. file write tablecontent _tab ("SCr tests") _tab _tab (`ckd`cat'_m4_creatinine') _tab (`ckd`cat'_m5_creatinine') _tab (`ckd`cat'_m6_creatinine') _tab (`ckd`cat'_m7_creatinine') _tab (`ckd`cat'_m8_creatinine') _tab (`ckd`cat'_m9_creatinine') _tab (`
> ckd`cat'_m10_creatinine') _tab (`ckd`cat'_m11_creatinine') _tab (`ckd`cat'_m12_creatinine') _tab (`ckd`cat'_m1_creatinine') _tab (`ckd`cat'_m2_creatinine') _tab (`ckd`cat'_m3_creatinine') _n(2)
 33. }

. file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. clear

. import delimited ./output/2017_healthcare_use.csv
(encoding automatically selected: ISO-8859-1)
(16 vars, 90 obs)

. local columns " "n_2017" "april" "may" "june" "july" "august" "september" "october" "november" "december" "january" "february" "march" "april" "

. foreach col in `columns' {
  2. replace `col'=. if `col'==0
  3. }
(0 real changes made)
(9 real changes made, 9 to missing)
(7 real changes made, 7 to missing)
(5 real changes made, 5 to missing)
(4 real changes made, 4 to missing)
(10 real changes made, 10 to missing)
(4 real changes made, 4 to missing)
(6 real changes made, 6 to missing)
(6 real changes made, 6 to missing)
(3 real changes made, 3 to missing)
(3 real changes made, 3 to missing)
(6 real changes made, 6 to missing)
(6 real changes made, 6 to missing)
(0 real changes made)

. export delimited "./output/2017_healthcare_use.csv", replace
file ./output/2017_healthcare_use.csv saved

. 
end of do-file

. browse

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. import delimited ./output/2017_healthcare_use.csv
no; data in memory would be lost
r(4);

end of do-file

r(4);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. clear

. import delimited ./output/2017_healthcare_use.csv
(encoding automatically selected: ISO-8859-1)
(16 vars, 90 obs)

. 
end of do-file

. import delimited ./output/2017_healthcare_use.csv, clear
(encoding automatically selected: ISO-8859-1)
(16 vars, 90 obs)

. browse

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. import delimited ./output/2017_healthcare_use.csv, clear
(encoding automatically selected: ISO-8859-1)
(16 vars, 90 obs)

. 
end of do-file

. browse

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD5158_000000.tmp"

. sysdir set PLUS ./analysis/adofiles

. sysdir set PERSONAL ./analysis/adofiles

. pwd
C:\Users\lsh1703468\Documents\repo\ckd-healthcare-use

. cap log close
