-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\lsh1703468\Documents\repo\ckd-healthcare-use\logs/relative_healthcare_use_overall.log
  log type:  text
 opened on:  17 Sep 2023, 23:40:32

. cap file close tablecontent

. **Creates output file for each year (`dataset')
. file open tablecontent using ./output/relative_healthcare_use_overall.csv, write text replace

. **Column headings
. *Ratios are per 100 patients
. file write tablecontent ("Date") _tab ("stratum") _tab ("ip") _tab ("ip_ll") _tab ("ip_ul") _tab ("icu") _tab ("icu_ll") _tab ("icu_ul") _tab ("ed") _tab ("ed_ll") _tab ("ed_ul") _tab ("avf") _tab ("avf_ll")
>  _tab ("avf_ul") _tab ("pd") _tab ("pd_ll") _tab ("pd_ul") _tab ("opd") _tab ("opd_ll") _tab ("opd_ul") _tab ("neph") _tab ("neph_ll") _tab ("neph_ul") _tab ("tx") _tab ("tx_ll") _tab ("tx_ul") _tab ("gp") _
> tab ("gp_ll") _tab ("gp_ul") _tab ("bp") _tab ("bp_ll") _tab ("bp_ul") _tab ("uacr") _tab ("uacr_ll") _tab ("uacr_ul") _tab ("scr") _tab ("scr_ll") _tab ("scr_ul") _n

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD7008_000000.tmp"

. local year "2017 2018 2019 2020 2021 2022"

. foreach x of local year {
  2. file write tablecontent ("01/04/`x'") _tab ("all") _tab
  3. use ./output/`x'_ckd_complete.dta, clear
  4. qui safecount
  5. local denom = round(r(N),5)
  6. foreach aggregate of varlist hospital_days critical_care_days emergency_days op_appts neph_appts tx_appts gp_interactions {
  7. qui su overall_`aggregate'
  8. local `x'_`aggregate' = (r(mean)/`denom')*100
  9. egen `aggregate'_`x' = ``x'_`aggregate''
 10. }
 11. }
unknown egen function 22.07729468599034()
r(133);

end of do-file

r(133);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD7008_000000.tmp"

. local year "2017 2018 2019 2020 2021 2022"

. foreach x of local year {
  2. file write tablecontent ("01/04/`x'") _tab ("all") _tab
  3. use ./output/`x'_ckd_complete.dta, clear
  4. qui safecount
  5. local denom = round(r(N),5)
  6. foreach aggregate of varlist hospital_days critical_care_days emergency_days op_appts neph_appts tx_appts gp_interactions {
  7. qui su overall_`aggregate'
  8. egen `aggregate'_`x' = (r(mean)/`denom')*100
  9. }
 10. }
unknown egen function (()
r(133);

end of do-file

r(133);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD7008_000000.tmp"

. local year "2017 2018 2019 2020 2021 2022"

. foreach x of local year {
  2. file write tablecontent ("01/04/`x'") _tab ("all") _tab
  3. use ./output/`x'_ckd_complete.dta, clear
  4. qui safecount
  5. local denom = round(r(N),5)
  6. foreach aggregate of varlist hospital_days critical_care_days emergency_days op_appts neph_appts tx_appts gp_interactions {
  7. qui su overall_`aggregate'
  8. gen `aggregate'_`x' = (r(mean)/`denom')*100
  9. }
 10. }

. 
end of do-file

. browse

. browse

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD7008_000000.tmp"

. cap file close tablecontent

. **Creates output file for each year (`dataset')
. file open tablecontent using ./output/relative_healthcare_use_overall.csv, write text replace

. **Column headings
. *Ratios are per 100 patients
. file write tablecontent ("Date") _tab ("stratum") _tab ("ip") _tab ("ip_ll") _tab ("ip_ul") _tab ("icu") _tab ("icu_ll") _tab ("icu_ul") _tab ("ed") _tab ("ed_ll") _tab ("ed_ul") _tab ("avf") _tab ("avf_ll")
>  _tab ("avf_ul") _tab ("pd") _tab ("pd_ll") _tab ("pd_ul") _tab ("opd") _tab ("opd_ll") _tab ("opd_ul") _tab ("neph") _tab ("neph_ll") _tab ("neph_ul") _tab ("tx") _tab ("tx_ll") _tab ("tx_ul") _tab ("gp") _
> tab ("gp_ll") _tab ("gp_ul") _tab ("bp") _tab ("bp_ll") _tab ("bp_ul") _tab ("uacr") _tab ("uacr_ll") _tab ("uacr_ul") _tab ("scr") _tab ("scr_ll") _tab ("scr_ul") _n

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD7008_000000.tmp"

. local year "2017 2018 2019 2020 2021 2022"

. foreach x of local year {
  2. foreach aggregate of varlist hospital_days critical_care_days emergency_days op_appts neph_appts tx_appts gp_interactions {
  3. bysort ethnicity: egen std_`aggregate' = stdize(`aggregate' age sex)
  4. }
  5. 
unexpected end of file
r(612);

end of do-file

r(612);
. do "C:\Users\LSH170~1\AppData\Local\Temp\STD7008_000000.tmp"

. local year "2017 2018 2019 2020 2021 2022"

. foreach x of local year {
  2. foreach aggregate of varlist hospital_days critical_care_days emergency_days op_appts neph_appts tx_appts gp_interactions {
  3. bysort ethnicity: egen std_`aggregate' = stdize(`aggregate' age sex)
  4. }
  5. }
unknown egen function stdize()
r(133);

end of do-file

r(133);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD7008_000000.tmp"

. local year "2017 2018 2019 2020 2021 2022"

. foreach x of local year {
  2. foreach aggregate of varlist hospital_days critical_care_days emergency_days op_appts neph_appts tx_appts gp_interactions {
  3. bysort ethnicity: gen std_`aggregate' = stdize(`aggregate' age sex)
  4. }
  5. }
unknown function stdize()
r(133);

end of do-file

r(133);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD7008_000000.tmp"

. local year "2017 2018 2019 2020 2021 2022"

. foreach x of local year {
  2. foreach aggregate of varlist hospital_days critical_care_days emergency_days op_appts neph_appts tx_appts gp_interactions {
  3. bysort ethnicity: egen std_hospital_rate = mean(`aggregate') / (mean(age) * mean(sex)) * `aggregate'
  4. }
  5. }
varlist not allowed
r(101);

end of do-file

r(101);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD7008_000000.tmp"

. local year "2017 2018 2019 2020 2021 2022"

. foreach x of local year {
  2. foreach aggregate of varlist hospital_days critical_care_days emergency_days op_appts neph_appts tx_appts gp_interactions {
  3. bysort ethnicity: egen std_`aggregate' = mean(`aggregate') / (mean(age) * mean(sex)) * `aggregate'
  4. }
  5. }
varlist not allowed
r(101);

end of do-file

r(101);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD7008_000000.tmp"

. local year "2017 2018 2019 2020 2021 2022"

. foreach x of local year {
  2. foreach aggregate in hospital_days critical_care_days emergency_days op_appts neph_appts tx_appts gp_interactions {
  3. bysort ethnicity: egen std_`aggregate' = mean(`aggregate') / (mean(age) * mean(sex)) * `aggregate'
  4. }
  5. }
varlist not allowed
r(101);

end of do-file

r(101);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD7008_000000.tmp"

. 
. local year "2017 2018 2019 2020 2021 2022"

. foreach x of local year {
  2. bysort ethnicity: egen std_hospital_days = mean(hospital_days) / (mean(age) * mean(sex)) * hospital_day
  3. }
varlist not allowed
r(101);

end of do-file

r(101);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD7008_000000.tmp"

. local year "2017 2018 2019 2020 2021 2022"

. foreach x of local year {
  2. use ./output/`x'_ckd_complete.dta, clear
  3. bysort ethnicity: egen std_hospital_days = mean(hospital_days) / (mean(age) * mean(sex)) * hospital_day
  4. }
varlist not allowed
r(101);

end of do-file

r(101);

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD7008_000000.tmp"

. foreach x of local year {
  2. use ./output/`x'_ckd_complete.dta, clear
  3. bysort ethnicity: egen std_hospital_days = mean(hospital_days) / (mean(age) * mean(sex)) * hospital_days
  4. }

. 
end of do-file

. browse

