-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\lsh1703468\Documents\repo\ckd-healthcare-use\logs/age_death.log
  log type:  text
 opened on:  22 Sep 2023, 00:32:50

. 
. cap file close tablecontent

. file open tablecontent using ./output/age_death.csv, write text replace

. 
. file write tablecontent ("stratum") _tab ("start_status") _tab ("median_2017") _tab ("median_2018") _tab ("median_2019") _tab ("median_2020") _tab ("median_2021") _tab ("median_2022") _tab ("mode_2017") _tab
>  ("mode_2018") _tab ("mode_2019") _tab ("mode_2020") _tab ("mode_2021") _tab ("mode_2022") _n

. 
. local year "2017 2018 2019 2020 2021 2022"

. foreach x of local year {
  2. use ./output/`x'_ckd_complete.dta, clear
  3. drop _merge
  4. merge 1:1 patient_id using ./output/`x'_nockd_complete
  5. drop if ckd_progression!=6
  6. 
. qui su age, d
  7. local `x'_q2 = r(p50)
  8. local `x'_q1 = r(p25)
  9. local `x'_q3 = r(p75)
 10. egen mode_age = mode(age), minmode
 11. qui su mode_age
 12. local `x'_mode = r(mean)
 13. drop mode_age
 14. 
. bysort ckd_group: egen mode_age = mode(age), minmode
 15. 
. forvalues i=0/5{
 16. qui su age if ckd_group==`i', d
 17. local `x'_q2_`i' = r(p50)
 18. local `x'_q1_`i' = r(p25)
 19. local `x'_q3_`i' = r(p75)
 20. qui su mode_age if ckd_group==`i'
 21. local `x'_mode_`i' = r(mean)
 22. } 
 23. }
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,913 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,811 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,961 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,899 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,934 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,854 observations deleted)

. 
. 
. file write tablecontent ("All") _tab ("All") _tab (`2017_q2') (" (") (`2017_q1') ("-") (`2017_q3') (")") _tab (`2018_q2') (" (") (`2018_q1') ("-") (`2018_q3') (")") _tab (`2019_q2') (" (") (`2019_q1') ("-") 
> (`2019_q3') (")") _tab (`2020_q2') (" (") (`2020_q1') ("-") (`2020_q3') (")") _tab (`2021_q2') (" (") (`2021_q1') ("-") (`2021_q3') (")") _tab (`2022_q2') (" (") (`2022_q1') ("-") (`2022_q3') (")") _tab (`20
> 17_mode') _tab (`2018_mode') _tab (`2019_mode') _tab (`2020_mode') _tab (`2021_mode') _tab (`2022_mode') _n

. file write tablecontent ("All") _tab ("No CKD") _tab (`2017_q2_0') (" (") (`2017_q1_0') ("-") (`2017_q3_0') (")") _tab (`2018_q2_0') (" (") (`2018_q1_0') ("-") (`2018_q3_0') (")") _tab (`2019_q2_0') (" (") (
> `2019_q1_0') ("-") (`2019_q3_0') (")") _tab (`2020_q2_0') (" (") (`2020_q1_0') ("-") (`2020_q3_0') (")") _tab (`2021_q2_0') (" (") (`2021_q1_0') ("-") (`2021_q3_0') (")") _tab (`2022_q2_0') (" (") (`2022_q1_
> 0') ("-") (`2022_q3_0') (")") _tab (`2017_mode_0') _tab (`2018_mode_0') _tab (`2019_mode_0') _tab (`2020_mode_0') _tab (`2021_mode_0') _tab (`2022_mode_0') _n

. file write tablecontent ("All") _tab ("Albuminuria") _tab (`2017_q2_1') (" (") (`2017_q1_1') ("-") (`2017_q3_1') (")") _tab (`2018_q2_1') (" (") (`2018_q1_1') ("-") (`2018_q3_1') (")") _tab (`2019_q2_1') (" 
> (") (`2019_q1_1') ("-") (`2019_q3_1') (")") _tab (`2020_q2_1') (" (") (`2020_q1_1') ("-") (`2020_q3_1') (")") _tab (`2021_q2_1') (" (") (`2021_q1_1') ("-") (`2021_q3_1') (")") _tab (`2022_q2_1') (" (") (`202
> 2_q1_1') ("-") (`2022_q3_1') (")") _tab (`2017_mode_1') _tab (`2018_mode_1') _tab (`2019_mode_1') _tab (`2020_mode_1') _tab (`2021_mode_1') _tab (`2022_mode_1') _n

. file write tablecontent ("All") _tab ("CKD stage 3") _tab (`2017_q2_2') (" (") (`2017_q1_2') ("-") (`2017_q3_2') (")") _tab (`2018_q2_2') (" (") (`2018_q1_2') ("-") (`2018_q3_2') (")") _tab (`2019_q2_2') (" 
> (") (`2019_q1_2') ("-") (`2019_q3_2') (")") _tab (`2020_q2_2') (" (") (`2020_q1_2') ("-") (`2020_q3_2') (")") _tab (`2021_q2_2') (" (") (`2021_q1_2') ("-") (`2021_q3_2') (")") _tab (`2022_q2_2') (" (") (`202
> 2_q1_2') ("-") (`2022_q3_2') (")") _tab (`2017_mode_2') _tab (`2018_mode_2') _tab (`2019_mode_2') _tab (`2020_mode_2') _tab (`2021_mode_2') _tab (`2022_mode_2') _n

. file write tablecontent ("All") _tab ("CKD stage 4/5") _tab (`2017_q2_3') (" (") (`2017_q1_3') ("-") (`2017_q3_3') (")") _tab (`2018_q2_3') (" (") (`2018_q1_3') ("-") (`2018_q3_3') (")") _tab (`2019_q2_3') (
> " (") (`2019_q1_3') ("-") (`2019_q3_3') (")") _tab (`2020_q2_3') (" (") (`2020_q1_3') ("-") (`2020_q3_3') (")") _tab (`2021_q2_3') (" (") (`2021_q1_3') ("-") (`2021_q3_3') (")") _tab (`2022_q2_3') (" (") (`2
> 022_q1_3') ("-") (`2022_q3_3') (")") _tab (`2017_mode_3') _tab (`2018_mode_3') _tab (`2019_mode_3') _tab (`2020_mode_3') _tab (`2021_mode_3') _tab (`2022_mode_3') _n

. file write tablecontent ("All") _tab ("Dialysis") _tab (`2017_q2_4') (" (") (`2017_q1_4') ("-") (`2017_q3_4') (")") _tab (`2018_q2_4') (" (") (`2018_q1_4') ("-") (`2018_q3_4') (")") _tab (`2019_q2_4') (" (")
>  (`2019_q1_4') ("-") (`2019_q3_4') (")") _tab (`2020_q2_4') (" (") (`2020_q1_4') ("-") (`2020_q3_4') (")") _tab (`2021_q2_4') (" (") (`2021_q1_4') ("-") (`2021_q3_4') (")") _tab (`2022_q2_4') (" (") (`2022_q
> 1_4') ("-") (`2022_q3_4') (")") _tab (`2017_mode_4') _tab (`2018_mode_4') _tab (`2019_mode_4') _tab (`2020_mode_4') _tab (`2021_mode_4') _tab (`2022_mode_4') _n

. file write tablecontent ("All") _tab ("Transplant") _tab (`2017_q2_5') (" (") (`2017_q1_5') ("-") (`2017_q3_5') (")") _tab (`2018_q2_5') (" (") (`2018_q1_5') ("-") (`2018_q3_5') (")") _tab (`2019_q2_5') (" (
> ") (`2019_q1_5') ("-") (`2019_q3_5') (")") _tab (`2020_q2_5') (" (") (`2020_q1_5') ("-") (`2020_q3_5') (")") _tab (`2021_q2_5') (" (") (`2021_q1_5') ("-") (`2021_q3_5') (")") _tab (`2022_q2_5') (" (") (`2022
> _q1_5') ("-") (`2022_q3_5') (")") _tab (`2017_mode_5') _tab (`2018_mode_5') _tab (`2019_mode_5') _tab (`2020_mode_5') _tab (`2021_mode_5') _tab (`2022_mode_5') _n

. 
. *Ethnicity
. forvalues j=1/6 {
  2. local label`j': label ethnicity `j'
  3. foreach x of local year {
  4. use ./output/`x'_ckd_complete.dta, clear
  5. drop _merge
  6. merge 1:1 patient_id using ./output/`x'_nockd_complete
  7. drop if ckd_progression!=6 & ethnicity!=`j'
  8. 
. qui su age, d
  9. local `x'_q2_`j' = r(p50)
 10. local `x'_q1_`j' = r(p25)
 11. local `x'_q3_`j' = r(p75)
 12. egen mode_age = mode(age), minmode
 13. qui su mode_age
 14. local `x'_mode_`j' = r(mean)
 15. drop mode_age
 16. 
. bysort ckd_group: egen mode_age = mode(age), minmode
 17. forvalues i=0/5{
 18. qui su age if ckd_group==`i', d
 19. local `x'_q2_`i'_`j' = r(p50)
 20. local `x'_q1_`i'_`j' = r(p25)
 21. local `x'_q3_`i'_`j' = r(p75)
 22. qui su mode_age if ckd_group==`i'
 23. local `x'_mode_`i'_`j' = r(mean)
 24. }
 25. }
 26. file write tablecontent ("`label`j''") _tab ("All") _tab (`2017_q2_`j'') (" (") (`2017_q1_`j'') ("-") (`2017_q3_`j'') (")") _tab (`2018_q2_`j'') (" (") (`2018_q1_`j'') ("-") (`2018_q3_`j'') (")") _tab (`2
> 019_q2_`j'') (" (") (`2019_q1_`j'') ("-") (`2019_q3_`j'') (")") _tab (`2020_q2_`j'') (" (") (`2020_q1_`j'') ("-") (`2020_q3_`j'') (")") _tab (`2021_q2_`j'') (" (") (`2021_q1_`j'') ("-") (`2021_q3_`j'') (")")
>  _tab (`2022_q2_`j'') (" (") (`2022_q1_`j'') ("-") (`2022_q3_`j'') (")") _tab (`2017_mode_`j'') _tab (`2018_mode_`j'') _tab (`2019_mode_`j'') _tab (`2020_mode_`j'') _tab (`2021_mode_`j'') _tab (`2022_mode_`j
> '') _n
 27. file write tablecontent ("`label`j''") _tab ("No CKD") _tab (`2017_q2_0_`j'') (" (") (`2017_q1_0_`j'') ("-") (`2017_q3_0_`j'') (")") _tab (`2018_q2_0_`j'') (" (") (`2018_q1_0_`j'') ("-") (`2018_q3_0_`j'')
>  (")") _tab (`2019_q2_0_`j'') (" (") (`2019_q1_0_`j'') ("-") (`2019_q3_0_`j'') (")") _tab (`2020_q2_0_`j'') (" (") (`2020_q1_0_`j'') ("-") (`2020_q3_0_`j'') (")") _tab (`2021_q2_0_`j'') (" (") (`2021_q1_0_`j
> '') ("-") (`2021_q3_0_`j'') (")") _tab (`2022_q2_0_`j'') (" (") (`2022_q1_0_`j'') ("-") (`2022_q3_0_`j'') (")") _tab (`2017_mode_0_`j'') _tab (`2018_mode_0_`j'') _tab (`2019_mode_0_`j'') _tab (`2020_mode_0_`
> j'') _tab (`2021_mode_0_`j'') _tab (`2022_mode_0_`j'') _n
 28. file write tablecontent ("`label`j''") _tab ("Albuminuria") _tab (`2017_q2_1_`j'') (" (") (`2017_q1_1_`j'') ("-") (`2017_q3_1_`j'') (")") _tab (`2018_q2_1_`j'') (" (") (`2018_q1_1_`j'') ("-") (`2018_q3_1_
> `j'') (")") _tab (`2019_q2_1_`j'') (" (") (`2019_q1_1_`j'') ("-") (`2019_q3_1_`j'') (")") _tab (`2020_q2_1_`j'') (" (") (`2020_q1_1_`j'') ("-") (`2020_q3_1_`j'') (")") _tab (`2021_q2_1_`j'') (" (") (`2021_q1
> _1_`j'') ("-") (`2021_q3_1_`j'') (")") _tab (`2022_q2_1_`j'') (" (") (`2022_q1_1_`j'') ("-") (`2022_q3_1_`j'') (")") _tab (`2017_mode_1_`j'') _tab (`2018_mode_1_`j'') _tab (`2019_mode_1_`j'') _tab (`2020_mod
> e_1_`j'') _tab (`2021_mode_1_`j'') _tab (`2022_mode_1_`j'') _n
 29. file write tablecontent ("`label`j''") _tab ("CKD stage 3") _tab (`2017_q2_2_`j'') (" (") (`2017_q1_2_`j'') ("-") (`2017_q3_2_`j'') (")") _tab (`2018_q2_2_`j'') (" (") (`2018_q1_2_`j'') ("-") (`2018_q3_2_
> `j'') (")") _tab (`2019_q2_2_`j'') (" (") (`2019_q1_2_`j'') ("-") (`2019_q3_2_`j'') (")") _tab (`2020_q2_2_`j'') (" (") (`2020_q1_2_`j'') ("-") (`2020_q3_2_`j'') (")") _tab (`2021_q2_2_`j'') (" (") (`2021_q1
> _2_`j'') ("-") (`2021_q3_2_`j'') (")") _tab (`2022_q2_2_`j'') (" (") (`2022_q1_2_`j'') ("-") (`2022_q3_2_`j'') (")") _tab (`2017_mode_2_`j'') _tab (`2018_mode_2_`j'') _tab (`2019_mode_2_`j'') _tab (`2020_mod
> e_2_`j'') _tab (`2021_mode_2_`j'') _tab (`2022_mode_2_`j'') _n
 30. file write tablecontent ("`label`j''") _tab ("CKD stage 4/5") _tab (`2017_q2_3_`j'') (" (") (`2017_q1_3_`j'') ("-") (`2017_q3_3_`j'') (")") _tab (`2018_q2_3_`j'') (" (") (`2018_q1_3_`j'') ("-") (`2018_q3_
> 3_`j'') (")") _tab (`2019_q2_3_`j'') (" (") (`2019_q1_3_`j'') ("-") (`2019_q3_3_`j'') (")") _tab (`2020_q2_3_`j'') (" (") (`2020_q1_3_`j'') ("-") (`2020_q3_3_`j'') (")") _tab (`2021_q2_3_`j'') (" (") (`2021_
> q1_3_`j'') ("-") (`2021_q3_3_`j'') (")") _tab (`2022_q2_3_`j'') (" (") (`2022_q1_3_`j'') ("-") (`2022_q3_3_`j'') (")") _tab (`2017_mode_3_`j'') _tab (`2018_mode_3_`j'') _tab (`2019_mode_3_`j'') _tab (`2020_m
> ode_3_`j'') _tab (`2021_mode_3_`j'') _tab (`2022_mode_3_`j'') _n
 31. file write tablecontent ("`label`j''") _tab ("Dialysis") _tab (`2017_q2_4_`j'') (" (") (`2017_q1_4_`j'') ("-") (`2017_q3_4_`j'') (")") _tab (`2018_q2_4_`j'') (" (") (`2018_q1_4_`j'') ("-") (`2018_q3_4_`j'
> ') (")") _tab (`2019_q2_4_`j'') (" (") (`2019_q1_4_`j'') ("-") (`2019_q3_4_`j'') (")") _tab (`2020_q2_4_`j'') (" (") (`2020_q1_4_`j'') ("-") (`2020_q3_4_`j'') (")") _tab (`2021_q2_4_`j'') (" (") (`2021_q1_4_
> `j'') ("-") (`2021_q3_4_`j'') (")") _tab (`2022_q2_4_`j'') (" (") (`2022_q1_4_`j'') ("-") (`2022_q3_4_`j'') (")") _tab (`2017_mode_4_`j'') _tab (`2018_mode_4_`j'') _tab (`2019_mode_4_`j'') _tab (`2020_mode_4
> _`j'') _tab (`2021_mode_4_`j'') _tab (`2022_mode_4_`j'') _n
 32. file write tablecontent ("`label`j''") _tab ("Transplant") _tab (`2017_q2_5_`j'') (" (") (`2017_q1_5_`j'') ("-") (`2017_q3_5_`j'') (")") _tab (`2018_q2_5_`j'') (" (") (`2018_q1_5_`j'') ("-") (`2018_q3_5_`
> j'') (")") _tab (`2019_q2_5_`j'') (" (") (`2019_q1_5_`j'') ("-") (`2019_q3_5_`j'') (")") _tab (`2020_q2_5_`j'') (" (") (`2020_q1_5_`j'') ("-") (`2020_q3_5_`j'') (")") _tab (`2021_q2_5_`j'') (" (") (`2021_q1_
> 5_`j'') ("-") (`2021_q3_5_`j'') (")") _tab (`2022_q2_5_`j'') (" (") (`2022_q1_5_`j'') ("-") (`2022_q3_5_`j'') (")") _tab (`2017_mode_5_`j'') _tab (`2018_mode_5_`j'') _tab (`2019_mode_5_`j'') _tab (`2020_mode
> _5_`j'') _tab (`2021_mode_5_`j'') _tab (`2022_mode_5_`j'') _n
 33. }
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,164 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,134 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,167 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,174 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,201 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,157 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,789 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,714 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,848 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,772 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,824 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,747 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,797 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,723 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,859 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,787 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,840 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,733 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,793 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,697 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,864 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,782 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,812 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,745 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,810 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,703 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,866 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,794 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,819 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,761 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,212 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,084 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,201 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,186 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,174 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,127 observations deleted)

. 
. *IMD
. forvalues j=1/5 {
  2. local label`j': label imd `j'
  3. foreach x of local year {
  4. use ./output/`x'_ckd_complete.dta, clear
  5. drop _merge
  6. merge 1:1 patient_id using ./output/`x'_nockd_complete
  7. drop if ckd_progression!=6 & imd!=`j'
  8. 
. qui su age, d
  9. local `x'_q2_`j' = r(p50)
 10. local `x'_q1_`j' = r(p25)
 11. local `x'_q3_`j' = r(p75)
 12. egen mode_age = mode(age), minmode
 13. qui su mode_age
 14. local `x'_mode_`j' = r(mean)
 15. drop mode_age
 16. 
. bysort ckd_group: egen mode_age = mode(age), minmode
 17. forvalues i=0/5{
 18. qui su age if ckd_group==`i', d
 19. local `x'_q2_`i'_`j' = r(p50)
 20. local `x'_q1_`i'_`j' = r(p25)
 21. local `x'_q3_`i'_`j' = r(p75)
 22. qui su mode_age if ckd_group==`i'
 23. local `x'_mode_`i'_`j' = r(mean)
 24. }
 25. }
 26. file write tablecontent ("`label`j''") _tab ("All") _tab (`2017_q2_`j'') (" (") (`2017_q1_`j'') ("-") (`2017_q3_`j'') (")") _tab (`2018_q2_`j'') (" (") (`2018_q1_`j'') ("-") (`2018_q3_`j'') (")") _tab (`2
> 019_q2_`j'') (" (") (`2019_q1_`j'') ("-") (`2019_q3_`j'') (")") _tab (`2020_q2_`j'') (" (") (`2020_q1_`j'') ("-") (`2020_q3_`j'') (")") _tab (`2021_q2_`j'') (" (") (`2021_q1_`j'') ("-") (`2021_q3_`j'') (")")
>  _tab (`2022_q2_`j'') (" (") (`2022_q1_`j'') ("-") (`2022_q3_`j'') (")") _tab (`2017_mode_`j'') _tab (`2018_mode_`j'') _tab (`2019_mode_`j'') _tab (`2020_mode_`j'') _tab (`2021_mode_`j'') _tab (`2022_mode_`j
> '') _n
 27. file write tablecontent ("`label`j''") _tab ("No CKD") _tab (`2017_q2_0_`j'') (" (") (`2017_q1_0_`j'') ("-") (`2017_q3_0_`j'') (")") _tab (`2018_q2_0_`j'') (" (") (`2018_q1_0_`j'') ("-") (`2018_q3_0_`j'')
>  (")") _tab (`2019_q2_0_`j'') (" (") (`2019_q1_0_`j'') ("-") (`2019_q3_0_`j'') (")") _tab (`2020_q2_0_`j'') (" (") (`2020_q1_0_`j'') ("-") (`2020_q3_0_`j'') (")") _tab (`2021_q2_0_`j'') (" (") (`2021_q1_0_`j
> '') ("-") (`2021_q3_0_`j'') (")") _tab (`2022_q2_0_`j'') (" (") (`2022_q1_0_`j'') ("-") (`2022_q3_0_`j'') (")") _tab (`2017_mode_0_`j'') _tab (`2018_mode_0_`j'') _tab (`2019_mode_0_`j'') _tab (`2020_mode_0_`
> j'') _tab (`2021_mode_0_`j'') _tab (`2022_mode_0_`j'') _n
 28. file write tablecontent ("`label`j''") _tab ("Albuminuria") _tab (`2017_q2_1_`j'') (" (") (`2017_q1_1_`j'') ("-") (`2017_q3_1_`j'') (")") _tab (`2018_q2_1_`j'') (" (") (`2018_q1_1_`j'') ("-") (`2018_q3_1_
> `j'') (")") _tab (`2019_q2_1_`j'') (" (") (`2019_q1_1_`j'') ("-") (`2019_q3_1_`j'') (")") _tab (`2020_q2_1_`j'') (" (") (`2020_q1_1_`j'') ("-") (`2020_q3_1_`j'') (")") _tab (`2021_q2_1_`j'') (" (") (`2021_q1
> _1_`j'') ("-") (`2021_q3_1_`j'') (")") _tab (`2022_q2_1_`j'') (" (") (`2022_q1_1_`j'') ("-") (`2022_q3_1_`j'') (")") _tab (`2017_mode_1_`j'') _tab (`2018_mode_1_`j'') _tab (`2019_mode_1_`j'') _tab (`2020_mod
> e_1_`j'') _tab (`2021_mode_1_`j'') _tab (`2022_mode_1_`j'') _n
 29. file write tablecontent ("`label`j''") _tab ("CKD stage 3") _tab (`2017_q2_2_`j'') (" (") (`2017_q1_2_`j'') ("-") (`2017_q3_2_`j'') (")") _tab (`2018_q2_2_`j'') (" (") (`2018_q1_2_`j'') ("-") (`2018_q3_2_
> `j'') (")") _tab (`2019_q2_2_`j'') (" (") (`2019_q1_2_`j'') ("-") (`2019_q3_2_`j'') (")") _tab (`2020_q2_2_`j'') (" (") (`2020_q1_2_`j'') ("-") (`2020_q3_2_`j'') (")") _tab (`2021_q2_2_`j'') (" (") (`2021_q1
> _2_`j'') ("-") (`2021_q3_2_`j'') (")") _tab (`2022_q2_2_`j'') (" (") (`2022_q1_2_`j'') ("-") (`2022_q3_2_`j'') (")") _tab (`2017_mode_2_`j'') _tab (`2018_mode_2_`j'') _tab (`2019_mode_2_`j'') _tab (`2020_mod
> e_2_`j'') _tab (`2021_mode_2_`j'') _tab (`2022_mode_2_`j'') _n
 30. file write tablecontent ("`label`j''") _tab ("CKD stage 4/5") _tab (`2017_q2_3_`j'') (" (") (`2017_q1_3_`j'') ("-") (`2017_q3_3_`j'') (")") _tab (`2018_q2_3_`j'') (" (") (`2018_q1_3_`j'') ("-") (`2018_q3_
> 3_`j'') (")") _tab (`2019_q2_3_`j'') (" (") (`2019_q1_3_`j'') ("-") (`2019_q3_3_`j'') (")") _tab (`2020_q2_3_`j'') (" (") (`2020_q1_3_`j'') ("-") (`2020_q3_3_`j'') (")") _tab (`2021_q2_3_`j'') (" (") (`2021_
> q1_3_`j'') ("-") (`2021_q3_3_`j'') (")") _tab (`2022_q2_3_`j'') (" (") (`2022_q1_3_`j'') ("-") (`2022_q3_3_`j'') (")") _tab (`2017_mode_3_`j'') _tab (`2018_mode_3_`j'') _tab (`2019_mode_3_`j'') _tab (`2020_m
> ode_3_`j'') _tab (`2021_mode_3_`j'') _tab (`2022_mode_3_`j'') _n
 31. file write tablecontent ("`label`j''") _tab ("Dialysis") _tab (`2017_q2_4_`j'') (" (") (`2017_q1_4_`j'') ("-") (`2017_q3_4_`j'') (")") _tab (`2018_q2_4_`j'') (" (") (`2018_q1_4_`j'') ("-") (`2018_q3_4_`j'
> ') (")") _tab (`2019_q2_4_`j'') (" (") (`2019_q1_4_`j'') ("-") (`2019_q3_4_`j'') (")") _tab (`2020_q2_4_`j'') (" (") (`2020_q1_4_`j'') ("-") (`2020_q3_4_`j'') (")") _tab (`2021_q2_4_`j'') (" (") (`2021_q1_4_
> `j'') ("-") (`2021_q3_4_`j'') (")") _tab (`2022_q2_4_`j'') (" (") (`2022_q1_4_`j'') ("-") (`2022_q3_4_`j'') (")") _tab (`2017_mode_4_`j'') _tab (`2018_mode_4_`j'') _tab (`2019_mode_4_`j'') _tab (`2020_mode_4
> _`j'') _tab (`2021_mode_4_`j'') _tab (`2022_mode_4_`j'') _n
 32. file write tablecontent ("`label`j''") _tab ("Transplant") _tab (`2017_q2_5_`j'') (" (") (`2017_q1_5_`j'') ("-") (`2017_q3_5_`j'') (")") _tab (`2018_q2_5_`j'') (" (") (`2018_q1_5_`j'') ("-") (`2018_q3_5_`
> j'') (")") _tab (`2019_q2_5_`j'') (" (") (`2019_q1_5_`j'') ("-") (`2019_q3_5_`j'') (")") _tab (`2020_q2_5_`j'') (" (") (`2020_q1_5_`j'') ("-") (`2020_q3_5_`j'') (")") _tab (`2021_q2_5_`j'') (" (") (`2021_q1_
> 5_`j'') ("-") (`2021_q3_5_`j'') (")") _tab (`2022_q2_5_`j'') (" (") (`2022_q1_5_`j'') ("-") (`2022_q3_5_`j'') (")") _tab (`2017_mode_5_`j'') _tab (`2018_mode_5_`j'') _tab (`2019_mode_5_`j'') _tab (`2020_mode
> _5_`j'') _tab (`2021_mode_5_`j'') _tab (`2022_mode_5_`j'') _n
 33. }
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,337 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,242 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,352 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,332 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,357 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,260 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,342 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,274 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,399 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,258 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,346 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,281 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,321 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,272 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,360 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,318 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,329 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,295 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,331 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,209 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,392 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,358 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,332 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,322 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,321 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,247 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,341 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,330 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,372 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,258 observations deleted)

. 
. *Region
. forvalues j=1/9 {
  2. local label`j': label region `j'
  3. foreach x of local year {
  4. use ./output/`x'_ckd_complete.dta, clear
  5. drop _merge
  6. merge 1:1 patient_id using ./output/`x'_nockd_complete
  7. drop if ckd_progression!=6 & region!=`j'
  8. 
. qui su age, d
  9. local `x'_q2_`j' = r(p50)
 10. local `x'_q1_`j' = r(p25)
 11. local `x'_q3_`j' = r(p75)
 12. egen mode_age = mode(age), minmode
 13. qui su mode_age
 14. local `x'_mode_`j' = r(mean)
 15. drop mode_age
 16. 
. bysort ckd_group: egen mode_age = mode(age), minmode
 17. forvalues i=0/5{
 18. qui su age if ckd_group==`i', d
 19. local `x'_q2_`i'_`j' = r(p50)
 20. local `x'_q1_`i'_`j' = r(p25)
 21. local `x'_q3_`i'_`j' = r(p75)
 22. qui su mode_age if ckd_group==`i'
 23. local `x'_mode_`i'_`j' = r(mean)
 24. }
 25. }
 26. file write tablecontent ("`label`j''") _tab ("All") _tab (`2017_q2_`j'') (" (") (`2017_q1_`j'') ("-") (`2017_q3_`j'') (")") _tab (`2018_q2_`j'') (" (") (`2018_q1_`j'') ("-") (`2018_q3_`j'') (")") _tab (`2
> 019_q2_`j'') (" (") (`2019_q1_`j'') ("-") (`2019_q3_`j'') (")") _tab (`2020_q2_`j'') (" (") (`2020_q1_`j'') ("-") (`2020_q3_`j'') (")") _tab (`2021_q2_`j'') (" (") (`2021_q1_`j'') ("-") (`2021_q3_`j'') (")")
>  _tab (`2022_q2_`j'') (" (") (`2022_q1_`j'') ("-") (`2022_q3_`j'') (")") _tab (`2017_mode_`j'') _tab (`2018_mode_`j'') _tab (`2019_mode_`j'') _tab (`2020_mode_`j'') _tab (`2021_mode_`j'') _tab (`2022_mode_`j
> '') _n
 27. file write tablecontent ("`label`j''") _tab ("No CKD") _tab (`2017_q2_0_`j'') (" (") (`2017_q1_0_`j'') ("-") (`2017_q3_0_`j'') (")") _tab (`2018_q2_0_`j'') (" (") (`2018_q1_0_`j'') ("-") (`2018_q3_0_`j'')
>  (")") _tab (`2019_q2_0_`j'') (" (") (`2019_q1_0_`j'') ("-") (`2019_q3_0_`j'') (")") _tab (`2020_q2_0_`j'') (" (") (`2020_q1_0_`j'') ("-") (`2020_q3_0_`j'') (")") _tab (`2021_q2_0_`j'') (" (") (`2021_q1_0_`j
> '') ("-") (`2021_q3_0_`j'') (")") _tab (`2022_q2_0_`j'') (" (") (`2022_q1_0_`j'') ("-") (`2022_q3_0_`j'') (")") _tab (`2017_mode_0_`j'') _tab (`2018_mode_0_`j'') _tab (`2019_mode_0_`j'') _tab (`2020_mode_0_`
> j'') _tab (`2021_mode_0_`j'') _tab (`2022_mode_0_`j'') _n
 28. file write tablecontent ("`label`j''") _tab ("Albuminuria") _tab (`2017_q2_1_`j'') (" (") (`2017_q1_1_`j'') ("-") (`2017_q3_1_`j'') (")") _tab (`2018_q2_1_`j'') (" (") (`2018_q1_1_`j'') ("-") (`2018_q3_1_
> `j'') (")") _tab (`2019_q2_1_`j'') (" (") (`2019_q1_1_`j'') ("-") (`2019_q3_1_`j'') (")") _tab (`2020_q2_1_`j'') (" (") (`2020_q1_1_`j'') ("-") (`2020_q3_1_`j'') (")") _tab (`2021_q2_1_`j'') (" (") (`2021_q1
> _1_`j'') ("-") (`2021_q3_1_`j'') (")") _tab (`2022_q2_1_`j'') (" (") (`2022_q1_1_`j'') ("-") (`2022_q3_1_`j'') (")") _tab (`2017_mode_1_`j'') _tab (`2018_mode_1_`j'') _tab (`2019_mode_1_`j'') _tab (`2020_mod
> e_1_`j'') _tab (`2021_mode_1_`j'') _tab (`2022_mode_1_`j'') _n
 29. file write tablecontent ("`label`j''") _tab ("CKD stage 3") _tab (`2017_q2_2_`j'') (" (") (`2017_q1_2_`j'') ("-") (`2017_q3_2_`j'') (")") _tab (`2018_q2_2_`j'') (" (") (`2018_q1_2_`j'') ("-") (`2018_q3_2_
> `j'') (")") _tab (`2019_q2_2_`j'') (" (") (`2019_q1_2_`j'') ("-") (`2019_q3_2_`j'') (")") _tab (`2020_q2_2_`j'') (" (") (`2020_q1_2_`j'') ("-") (`2020_q3_2_`j'') (")") _tab (`2021_q2_2_`j'') (" (") (`2021_q1
> _2_`j'') ("-") (`2021_q3_2_`j'') (")") _tab (`2022_q2_2_`j'') (" (") (`2022_q1_2_`j'') ("-") (`2022_q3_2_`j'') (")") _tab (`2017_mode_2_`j'') _tab (`2018_mode_2_`j'') _tab (`2019_mode_2_`j'') _tab (`2020_mod
> e_2_`j'') _tab (`2021_mode_2_`j'') _tab (`2022_mode_2_`j'') _n
 30. file write tablecontent ("`label`j''") _tab ("CKD stage 4/5") _tab (`2017_q2_3_`j'') (" (") (`2017_q1_3_`j'') ("-") (`2017_q3_3_`j'') (")") _tab (`2018_q2_3_`j'') (" (") (`2018_q1_3_`j'') ("-") (`2018_q3_
> 3_`j'') (")") _tab (`2019_q2_3_`j'') (" (") (`2019_q1_3_`j'') ("-") (`2019_q3_3_`j'') (")") _tab (`2020_q2_3_`j'') (" (") (`2020_q1_3_`j'') ("-") (`2020_q3_3_`j'') (")") _tab (`2021_q2_3_`j'') (" (") (`2021_
> q1_3_`j'') ("-") (`2021_q3_3_`j'') (")") _tab (`2022_q2_3_`j'') (" (") (`2022_q1_3_`j'') ("-") (`2022_q3_3_`j'') (")") _tab (`2017_mode_3_`j'') _tab (`2018_mode_3_`j'') _tab (`2019_mode_3_`j'') _tab (`2020_m
> ode_3_`j'') _tab (`2021_mode_3_`j'') _tab (`2022_mode_3_`j'') _n
 31. file write tablecontent ("`label`j''") _tab ("Dialysis") _tab (`2017_q2_4_`j'') (" (") (`2017_q1_4_`j'') ("-") (`2017_q3_4_`j'') (")") _tab (`2018_q2_4_`j'') (" (") (`2018_q1_4_`j'') ("-") (`2018_q3_4_`j'
> ') (")") _tab (`2019_q2_4_`j'') (" (") (`2019_q1_4_`j'') ("-") (`2019_q3_4_`j'') (")") _tab (`2020_q2_4_`j'') (" (") (`2020_q1_4_`j'') ("-") (`2020_q3_4_`j'') (")") _tab (`2021_q2_4_`j'') (" (") (`2021_q1_4_
> `j'') ("-") (`2021_q3_4_`j'') (")") _tab (`2022_q2_4_`j'') (" (") (`2022_q1_4_`j'') ("-") (`2022_q3_4_`j'') (")") _tab (`2017_mode_4_`j'') _tab (`2018_mode_4_`j'') _tab (`2019_mode_4_`j'') _tab (`2020_mode_4
> _`j'') _tab (`2021_mode_4_`j'') _tab (`2022_mode_4_`j'') _n
 32. file write tablecontent ("`label`j''") _tab ("Transplant") _tab (`2017_q2_5_`j'') (" (") (`2017_q1_5_`j'') ("-") (`2017_q3_5_`j'') (")") _tab (`2018_q2_5_`j'') (" (") (`2018_q1_5_`j'') ("-") (`2018_q3_5_`
> j'') (")") _tab (`2019_q2_5_`j'') (" (") (`2019_q1_5_`j'') ("-") (`2019_q3_5_`j'') (")") _tab (`2020_q2_5_`j'') (" (") (`2020_q1_5_`j'') ("-") (`2020_q3_5_`j'') (")") _tab (`2021_q2_5_`j'') (" (") (`2021_q1_
> 5_`j'') ("-") (`2021_q3_5_`j'') (")") _tab (`2022_q2_5_`j'') (" (") (`2022_q1_5_`j'') ("-") (`2022_q3_5_`j'') (")") _tab (`2017_mode_5_`j'') _tab (`2018_mode_5_`j'') _tab (`2019_mode_5_`j'') _tab (`2020_mode
> _5_`j'') _tab (`2021_mode_5_`j'') _tab (`2022_mode_5_`j'') _n
 33. }
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,637 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,535 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,647 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,606 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,644 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,568 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,641 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,533 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,672 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,633 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,660 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,560 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,324 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,238 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,375 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,297 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,357 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,262 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,611 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,542 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,655 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,625 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,635 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,578 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,653 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,527 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,662 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,590 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,617 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,580 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,596 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,538 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,642 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,587 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,652 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,549 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,603 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,545 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,690 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,643 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,657 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,593 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,624 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,526 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,695 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,582 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,620 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,584 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,615 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,504 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,650 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,629 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,630 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(2,558 observations deleted)

. 
. *Rural/urban
. forvalues j=0/1 {
  2. local label`j': label urban `j'
  3. foreach x of local year {
  4. use ./output/`x'_ckd_complete.dta, clear
  5. drop _merge
  6. merge 1:1 patient_id using ./output/`x'_nockd_complete
  7. drop if ckd_progression!=6 & urban!=`j'
  8. 
. qui su age, d
  9. local `x'_q2_`j' = r(p50)
 10. local `x'_q1_`j' = r(p25)
 11. local `x'_q3_`j' = r(p75)
 12. egen mode_age = mode(age), minmode
 13. qui su mode_age
 14. local `x'_mode_`j' = r(mean)
 15. drop mode_age
 16. 
. bysort ckd_group: egen mode_age = mode(age), minmode
 17. forvalues i=0/5{
 18. qui su age if ckd_group==`i', d
 19. local `x'_q2_`i'_`j' = r(p50)
 20. local `x'_q1_`i'_`j' = r(p25)
 21. local `x'_q3_`i'_`j' = r(p75)
 22. qui su mode_age if ckd_group==`i'
 23. local `x'_mode_`i'_`j' = r(mean)
 24. }
 25. }
 26. file write tablecontent ("`label`j''") _tab ("All") _tab (`2017_q2_`j'') (" (") (`2017_q1_`j'') ("-") (`2017_q3_`j'') (")") _tab (`2018_q2_`j'') (" (") (`2018_q1_`j'') ("-") (`2018_q3_`j'') (")") _tab (`2
> 019_q2_`j'') (" (") (`2019_q1_`j'') ("-") (`2019_q3_`j'') (")") _tab (`2020_q2_`j'') (" (") (`2020_q1_`j'') ("-") (`2020_q3_`j'') (")") _tab (`2021_q2_`j'') (" (") (`2021_q1_`j'') ("-") (`2021_q3_`j'') (")")
>  _tab (`2022_q2_`j'') (" (") (`2022_q1_`j'') ("-") (`2022_q3_`j'') (")") _tab (`2017_mode_`j'') _tab (`2018_mode_`j'') _tab (`2019_mode_`j'') _tab (`2020_mode_`j'') _tab (`2021_mode_`j'') _tab (`2022_mode_`j
> '') _n
 27. file write tablecontent ("`label`j''") _tab ("No CKD") _tab (`2017_q2_0_`j'') (" (") (`2017_q1_0_`j'') ("-") (`2017_q3_0_`j'') (")") _tab (`2018_q2_0_`j'') (" (") (`2018_q1_0_`j'') ("-") (`2018_q3_0_`j'')
>  (")") _tab (`2019_q2_0_`j'') (" (") (`2019_q1_0_`j'') ("-") (`2019_q3_0_`j'') (")") _tab (`2020_q2_0_`j'') (" (") (`2020_q1_0_`j'') ("-") (`2020_q3_0_`j'') (")") _tab (`2021_q2_0_`j'') (" (") (`2021_q1_0_`j
> '') ("-") (`2021_q3_0_`j'') (")") _tab (`2022_q2_0_`j'') (" (") (`2022_q1_0_`j'') ("-") (`2022_q3_0_`j'') (")") _tab (`2017_mode_0_`j'') _tab (`2018_mode_0_`j'') _tab (`2019_mode_0_`j'') _tab (`2020_mode_0_`
> j'') _tab (`2021_mode_0_`j'') _tab (`2022_mode_0_`j'') _n
 28. file write tablecontent ("`label`j''") _tab ("Albuminuria") _tab (`2017_q2_1_`j'') (" (") (`2017_q1_1_`j'') ("-") (`2017_q3_1_`j'') (")") _tab (`2018_q2_1_`j'') (" (") (`2018_q1_1_`j'') ("-") (`2018_q3_1_
> `j'') (")") _tab (`2019_q2_1_`j'') (" (") (`2019_q1_1_`j'') ("-") (`2019_q3_1_`j'') (")") _tab (`2020_q2_1_`j'') (" (") (`2020_q1_1_`j'') ("-") (`2020_q3_1_`j'') (")") _tab (`2021_q2_1_`j'') (" (") (`2021_q1
> _1_`j'') ("-") (`2021_q3_1_`j'') (")") _tab (`2022_q2_1_`j'') (" (") (`2022_q1_1_`j'') ("-") (`2022_q3_1_`j'') (")") _tab (`2017_mode_1_`j'') _tab (`2018_mode_1_`j'') _tab (`2019_mode_1_`j'') _tab (`2020_mod
> e_1_`j'') _tab (`2021_mode_1_`j'') _tab (`2022_mode_1_`j'') _n
 29. file write tablecontent ("`label`j''") _tab ("CKD stage 3") _tab (`2017_q2_2_`j'') (" (") (`2017_q1_2_`j'') ("-") (`2017_q3_2_`j'') (")") _tab (`2018_q2_2_`j'') (" (") (`2018_q1_2_`j'') ("-") (`2018_q3_2_
> `j'') (")") _tab (`2019_q2_2_`j'') (" (") (`2019_q1_2_`j'') ("-") (`2019_q3_2_`j'') (")") _tab (`2020_q2_2_`j'') (" (") (`2020_q1_2_`j'') ("-") (`2020_q3_2_`j'') (")") _tab (`2021_q2_2_`j'') (" (") (`2021_q1
> _2_`j'') ("-") (`2021_q3_2_`j'') (")") _tab (`2022_q2_2_`j'') (" (") (`2022_q1_2_`j'') ("-") (`2022_q3_2_`j'') (")") _tab (`2017_mode_2_`j'') _tab (`2018_mode_2_`j'') _tab (`2019_mode_2_`j'') _tab (`2020_mod
> e_2_`j'') _tab (`2021_mode_2_`j'') _tab (`2022_mode_2_`j'') _n
 30. file write tablecontent ("`label`j''") _tab ("CKD stage 4/5") _tab (`2017_q2_3_`j'') (" (") (`2017_q1_3_`j'') ("-") (`2017_q3_3_`j'') (")") _tab (`2018_q2_3_`j'') (" (") (`2018_q1_3_`j'') ("-") (`2018_q3_
> 3_`j'') (")") _tab (`2019_q2_3_`j'') (" (") (`2019_q1_3_`j'') ("-") (`2019_q3_3_`j'') (")") _tab (`2020_q2_3_`j'') (" (") (`2020_q1_3_`j'') ("-") (`2020_q3_3_`j'') (")") _tab (`2021_q2_3_`j'') (" (") (`2021_
> q1_3_`j'') ("-") (`2021_q3_3_`j'') (")") _tab (`2022_q2_3_`j'') (" (") (`2022_q1_3_`j'') ("-") (`2022_q3_3_`j'') (")") _tab (`2017_mode_3_`j'') _tab (`2018_mode_3_`j'') _tab (`2019_mode_3_`j'') _tab (`2020_m
> ode_3_`j'') _tab (`2021_mode_3_`j'') _tab (`2022_mode_3_`j'') _n
 31. file write tablecontent ("`label`j''") _tab ("Dialysis") _tab (`2017_q2_4_`j'') (" (") (`2017_q1_4_`j'') ("-") (`2017_q3_4_`j'') (")") _tab (`2018_q2_4_`j'') (" (") (`2018_q1_4_`j'') ("-") (`2018_q3_4_`j'
> ') (")") _tab (`2019_q2_4_`j'') (" (") (`2019_q1_4_`j'') ("-") (`2019_q3_4_`j'') (")") _tab (`2020_q2_4_`j'') (" (") (`2020_q1_4_`j'') ("-") (`2020_q3_4_`j'') (")") _tab (`2021_q2_4_`j'') (" (") (`2021_q1_4_
> `j'') ("-") (`2021_q3_4_`j'') (")") _tab (`2022_q2_4_`j'') (" (") (`2022_q1_4_`j'') ("-") (`2022_q3_4_`j'') (")") _tab (`2017_mode_4_`j'') _tab (`2018_mode_4_`j'') _tab (`2019_mode_4_`j'') _tab (`2020_mode_4
> _`j'') _tab (`2021_mode_4_`j'') _tab (`2022_mode_4_`j'') _n
 32. file write tablecontent ("`label`j''") _tab ("Transplant") _tab (`2017_q2_5_`j'') (" (") (`2017_q1_5_`j'') ("-") (`2017_q3_5_`j'') (")") _tab (`2018_q2_5_`j'') (" (") (`2018_q1_5_`j'') ("-") (`2018_q3_5_`
> j'') (")") _tab (`2019_q2_5_`j'') (" (") (`2019_q1_5_`j'') ("-") (`2019_q3_5_`j'') (")") _tab (`2020_q2_5_`j'') (" (") (`2020_q1_5_`j'') ("-") (`2020_q3_5_`j'') (")") _tab (`2021_q2_5_`j'') (" (") (`2021_q1_
> 5_`j'') ("-") (`2021_q3_5_`j'') (")") _tab (`2022_q2_5_`j'') (" (") (`2022_q1_5_`j'') ("-") (`2022_q3_5_`j'') (")") _tab (`2017_mode_5_`j'') _tab (`2018_mode_5_`j'') _tab (`2019_mode_5_`j'') _tab (`2020_mode
> _5_`j'') _tab (`2021_mode_5_`j'') _tab (`2022_mode_5_`j'') _n
 33. }
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,136 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,097 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,175 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,129 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,179 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,162 observations deleted)
(label sex already defined)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,210
        from master                     2,123  (_merge==1)
        from using                      1,087  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,777 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,137
        from master                     2,049  (_merge==1)
        from using                      1,088  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,714 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,293
        from master                     2,233  (_merge==1)
        from using                      1,060  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,786 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,231
        from master                     2,125  (_merge==1)
        from using                      1,106  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,770 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,280
        from master                     2,139  (_merge==1)
        from using                      1,141  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,755 observations deleted)
(label egfr_end already defined)
(label ckd_progression already defined)
(label ethnicity already defined)
(label imd already defined)
(label region already defined)
(label urban already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         3,152
        from master                     2,054  (_merge==1)
        from using                      1,098  (_merge==2)

    Matched                                 0  (_merge==3)
    -----------------------------------------
(1,692 observations deleted)

. 
. file close tablecontent

. 
end of do-file

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD6f1c_000000.tmp"

. capture noisily import delimited ./output/2017_nockd.csv, clear
(encoding automatically selected: ISO-8859-1)
(17 vars, 10,901 obs)

. tempfile 2017_nockd

. save ./output/2017_nockd, replace
file ./output/2017_nockd.dta saved

. capture noisily import delimited ./output/input_2017_nockd_complete.csv, clear
(encoding automatically selected: ISO-8859-1)
(24 vars, 50,000 obs)

. merge 1:1 patient_id using ./output/2017_nockd

    Result                      Number of obs
    -----------------------------------------
    Not matched                        58,727
        from master                    48,913  (_merge==1)
        from using                      9,814  (_merge==2)

    Matched                             1,087  (_merge==3)
    -----------------------------------------

. keep if _merge==3
(58,727 observations deleted)

. drop _merge

. tempfile 2017_nockd_complete

. save ./output/2017_nockd_complete, replace
file ./output/2017_nockd_complete.dta saved

. */
. 
. *Dialysis & kidney transplant outcome classification
. foreach var of varlist  dialysis_outcome_primary_care   ///
>                                                 dialysis_outcome_icd_10                 ///
>                                                 dialysis_outcome_opcs_4                 ///
>                                                 dialysis_outcome_date                   ///
>                                                 kt_outcome_primary_care                 ///
>                                                 kt_outcome_icd_10                               ///
>                                                 kt_outcome_opcs_4                               ///
>                                                 kidney_transplant_outcome_date  ///
>                                                 died                                                    {
  2.         drop `var'
  3.         }

. 
. *eGFR outcome classification based on updated mean eGFR over previous 18 months by the end of year
. gen sex = 1 if male == "Male"
(487 missing values generated)

. replace sex = 0 if male == "Female"
(487 real changes made)

. label define sex 0"Female" 1"Male"

. label values sex sex

. replace creatinine_outcome = . if !inrange(creatinine_outcome, 20, 3000)
(477 real changes made, 477 to missing)

. gen mgdl_creatinine_outcome = creatinine_outcome/88.4
(477 missing values generated)

. gen min_creatinine_outcome=.
(1,087 missing values generated)

. replace min_creatinine_outcome = mgdl_creatinine_outcome/0.7 if sex==0
(270 real changes made)

. replace min_creatinine_outcome = mgdl_creatinine_outcome/0.9 if sex==1
(340 real changes made)

. replace min_creatinine_outcome = min_creatinine_outcome^-0.329  if sex==0
(270 real changes made)

. replace min_creatinine_outcome = min_creatinine_outcome^-0.411  if sex==1
(340 real changes made)

. replace min_creatinine_outcome = 1 if min_creatinine_outcome<1
(376 real changes made)

. gen max_creatinine_outcome=.
(1,087 missing values generated)

. replace max_creatinine_outcome = mgdl_creatinine_outcome/0.7 if sex==0
(270 real changes made)

. replace max_creatinine_outcome = mgdl_creatinine_outcome/0.9 if sex==1
(340 real changes made)

. replace max_creatinine_outcome = max_creatinine_outcome^-1.209
(610 real changes made)

. replace max_creatinine_outcome = 1 if max_creatinine_outcome>1
(711 real changes made)

. gen egfr_outcome = min_creatinine_outcome*max_creatinine_outcome*141
(477 missing values generated)

. replace egfr_outcome = egfr_outcome*(0.993^age)
(610 real changes made)

. replace egfr_outcome = egfr_outcome*1.018 if sex==0
(270 real changes made)

. drop creatinine_outcome

. drop mgdl_creatinine_outcome

. drop min_creatinine_outcome

. drop max_creatinine_outcome

. egen egfr_end = cut(egfr_outcome), at(0, 30, 60, 5000)
(477 missing values generated)

. recode egfr_end 0=3 30=2 60=1
(610 changes made to egfr_end)

. label define egfr_end 1 "60" 2 "30-59" 3 "<30"

. label values egfr_end egfr_end

. label var egfr_end "Final eGFR"

. gen ckd_progression = 0

. replace ckd_progression = 1 if egfr_end==2
(124 real changes made)

. replace ckd_progression = 2 if egfr_end==3
(7 real changes made)

. egen esrd_egfr_end = cut(egfr_outcome), at (0, 15, 5000)
(477 missing values generated)

. recode esrd_egfr_end 0=1 15=0
(610 changes made to esrd_egfr_end)

. tab esrd_egfr_end, m

esrd_egfr_e |
         nd |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        610       56.12       56.12
          . |        477       43.88      100.00
------------+-----------------------------------
      Total |      1,087      100.00

. gen dialysis_outcome = 0

. replace dialysis_outcome = 1 if modality_outcome=="Dialysis"
(45 real changes made)

. replace dialysis_outcome = 1 if modality_outcome=="Modality unclear" & esrd_egfr_end==1
(0 real changes made)

. gen kidney_transplant_outcome = 0

. replace kidney_transplant_outcome = 1 if modality_outcome=="Kidney transplant"
(47 real changes made)

. replace kidney_transplant_outcome = 1 if modality_outcome=="Modality unclear" & esrd_egfr_end==0
(7 real changes made)

. replace ckd_progression = 5 if modality_outcome=="Modality unclear" & modality_outcome_date!=.
(2 real changes made)

. replace ckd_progression = 3 if dialysis_outcome==1
(45 real changes made)

. replace ckd_progression = 4 if kidney_transplant_outcome==1
(54 real changes made)

. replace ckd_progression = 6 if modality_outcome=="Deceased"
(103 real changes made)

. label define ckd_progression 0 "No progression" 1 "CKD 3" 2 "CKD 4/5 pre-KRT" 3 "Dialysis" 4 "Kidney transplant" 5 "KRT unclear modality" 6 "Deceased"

. label values ckd_progression ckd_progression

. label var ckd_progression "CKD progression"

. tab ckd_progression, m

     CKD progression |      Freq.     Percent        Cum.
---------------------+-----------------------------------
      No progression |        774       71.21       71.21
               CKD 3 |        105        9.66       80.86
     CKD 4/5 pre-KRT |          6        0.55       81.42
            Dialysis |         45        4.14       85.56
   Kidney transplant |         54        4.97       90.52
            Deceased |        103        9.48      100.00
---------------------+-----------------------------------
               Total |      1,087      100.00

. gen ckd_group = 0

. 
. **Potential effect modifiers
. * Ethnicity
. * 1 = White ethnicities (white British, white Irish, with other)
. * 2 = Mixed ethnicities (white & black Caribbean, white & black African, white & Asian, other mixed ethnicities)
. * 3 = South Asian ethnicities (Indian, Pakistani, Bangladeshi, other South Asian)
. * 4 = Black ethnicities (black Caribbean, black African, other black)
. * 5 = Other ethnicities (Chinese, all other ethnicities)
. * . = Unknown ethnicity
. replace ethnicity = . if ethnicity==.
(0 real changes made)

. replace ethnicity=6 if ethnicity==2
(49 real changes made)

. replace ethnicity=2 if ethnicity==3
(35 real changes made)

. replace ethnicity=3 if ethnicity==4
(41 real changes made)

. replace ethnicity=4 if ethnicity==6
(49 real changes made)

. replace ethnicity=6 if ethnicity==.
(267 real changes made)

. label define ethnicity  1 "White"                                       ///
>                                                 2 "South Asian"                         ///                                             
>                                                 3 "Black"                                       ///
>                                                 4 "Mixed"                                       ///
>                                                 5 "Other"                                       ///
>                                                 6 "Unknown"     

. label values ethnicity ethnicity

. 
. * Index of multiple deprivation
. * Ordered 1-5 from most deprived to least deprived
. label define imd 1 "1 Most deprived" 2 "2" 3 "3" 4 "4" 5 "5 Least deprived"

. label values imd imd

. 
. * Region
. rename region region_string

. gen region = 1 if region_string=="East Midlands"
(983 missing values generated)

. replace region = 2 if region_string=="East"
(109 real changes made)

. replace region = 3 if region_string=="London"
(227 real changes made)

. replace region = 4 if region_string=="North East"
(108 real changes made)

. replace region = 5 if region_string=="North West"
(104 real changes made)

. replace region = 6 if region_string=="South East"
(122 real changes made)

. replace region = 7 if region_string=="South West"
(98 real changes made)

. replace region = 8 if region_string=="West Midlands"
(114 real changes made)

. replace region = 9 if region_string=="Yorkshire and The Humber"
(101 real changes made)

. label define region     1 "East Midlands"                                       ///
>                                                 2 "East"                                                        ///
>                                                 3 "London"                                                      ///
>                                                 4 "North East"                                          ///
>                                                 5 "North West"                                          ///
>                                                 6 "South East"                                          ///
>                                                 7 "South West"                                          ///
>                                                 8 "West Midlands"                                       ///
>                                                 9 "Yorkshire and The Humber"            

. label values region region

. label var region "Region"

. 
. * Urban/rural
. replace rural_urban=. if rural_urban<1|rural_urban>8
(0 real changes made)

. label define rural_urban 1 "Urban major conurbation"                                            ///
>                                                  2 "Urban minor conurbation"                                            ///
>                                                  3 "Urban city and town"                                                        ///
>                                                  4 "Urban city and town in a sparse setting"            ///
>                                                  5 "Rural town and fringe"                                                      ///
>                                                  6 "Rural town and fringe in a sparse setting"          ///
>                                                  7 "Rural village and dispersed"                                        ///
>                                                  8 "Rural village and dispersed in a sparse setting"

. label values rural_urban rural_urban

. * Urban (binary)
. * Urban = 1-4 + missing, Rural = 5-8
. generate urban=.
(1,087 missing values generated)

. replace urban=1 if rural_urban<=4|rural_urban==.
(414 real changes made)

. replace urban=0 if rural_urban>4 & rural_urban!=.
(673 real changes made)

. label var urban "Urban/rural"

. label define urban 0 "Rural" 1 "Urban"

. label values urban urban

. drop rural_urban

. 
end of do-file

. count if modality_outcome_date!=.
  279

. do "C:\Users\LSH170~1\AppData\Local\Temp\STD6f1c_000000.tmp"

. sysdir set PLUS ./analysis/adofiles

. sysdir set PERSONAL ./analysis/adofiles

. pwd
C:\Users\lsh1703468\Documents\repo\ckd-healthcare-use

. 
. local dataset `1'

. 
. cap log close
